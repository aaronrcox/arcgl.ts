parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JaNV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.x=t,this.y=n}return t.prototype[Symbol.iterator]=function(){var t=this,n=0;return{next:function(){return{value:t[n++],done:n>2}}}},Object.defineProperty(t.prototype,"x",{get:function(){return this[0]},set:function(t){this[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this[1]},set:function(t){this[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xy",{get:function(){return[this.x,this.y]},set:function(t){this.x=t[0],this.y=t[1]},enumerable:!0,configurable:!0}),t.add=function(n,e){return new t(n.x+e.x,n.y+e.y)},t.sub=function(n,e){return new t(n.x-e.x,n.y-e.y)},t.mul=function(n,e){return new t(n.x*e.x,n.y*e.y)},t.scale=function(n,e){return new t(n.x*e,n.y*e)},t.div=function(n,e){return new t(n.x/e.x,n.y/e.y)},t.negate=function(n){return new t(-n.x,-n.y)},t.normalise=function(n){var e=t.len(n);return new t(n.x/e,n.y/e)},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.distance=function(n,e){return t.sub(e,n).length()},t.dot=function(t,n){return t.x*n.x+t.y*n.y},t.pivot=function(n,e,r){void 0===r&&(r={x:0,y:0});var i=n.x-r.x,o=n.y-r.y;return new t(i*Math.cos(e)-o*Math.sin(e)+r.x,o*Math.cos(e)+i*Math.sin(e)+r.y)},t.reflect=function(n,e){var r=t.dot(n,e);return new t(n.x-2*r*e.x,n.y-2*r*e.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.mul=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalise=function(){var t=this.length();return 0===t?this:(this.x/=t,this.y/=t,this)},t.prototype.length=function(){return t.len(this)},t.prototype.dot=function(n){return t.dot(this,n)},t.prototype.pivot=function(t,n){void 0===n&&(n={x:0,y:0});var e=this.x-n.x,r=this.y-n.y;return this.x=e*Math.cos(t)-r*Math.sin(t)+n.x,this.y=r*Math.cos(t)+e*Math.sin(t)+n.y,this},t.perpendicular=function(n){return new t(n.y,-n.x)},t.ZERO=new t(0,0),t}();exports.Vec2=t;
},{}],"hxyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return{value:t[e++],done:e>3}}}},Object.defineProperty(t.prototype,"x",{get:function(){return this[0]},set:function(t){this[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this[1]},set:function(t){this[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this[2]},set:function(t){this[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xyz",{get:function(){return[this.x,this.y,this.z]},set:function(t){this.x=t[0],this.y=t[1],this.z=t[2]},enumerable:!0,configurable:!0}),t.add=function(e,n){return new t(e.x+n.x,e.y+n.y,e.z+n.z)},t.sub=function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z)},t.mul=function(e,n){return new t(e.x*n.x,e.y*n.y,e.z*n.z)},t.div=function(e,n){return new t(e.x/n.x,e.y/n.y,e.z/n.z)},t.normalise=function(e){var n=t.len(e);return new t(e.x/n,e.y/n,e.z/n)},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},t.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.mul=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},t.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},t.prototype.normalise=function(){var t=this.length();return this.x/=t,this.y/=t,this.z/=t,this},t.prototype.length=function(){return t.len(this)},t.prototype.dot=function(e){return t.dot(this,e)},t}();exports.Vec3=t;
},{}],"yoDL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=n,this.w=i}return t.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return{value:t[e++],done:e>4}}}},Object.defineProperty(t.prototype,"x",{get:function(){return this[0]},set:function(t){this[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this[1]},set:function(t){this[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this[2]},set:function(t){this[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this[3]},set:function(t){this[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xyzw",{get:function(){return[this.x,this.y,this.z,this.w]},set:function(t){this.x=t[0],this.y=t[1],this.z=t[2],this.w=t[3]},enumerable:!0,configurable:!0}),t.add=function(e,n){return new t(e.x+n.x,e.y+n.y,e.z+n.z,e.w+n.w)},t.sub=function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z,e.w-n.w)},t.mul=function(e,n){return new t(e.x*n.x,e.y*n.y,e.z*n.z,e.w*n.w)},t.div=function(e,n){return new t(e.x/n.x,e.y/n.y,e.z/n.z,e.w/n.w)},t.normalise=function(e){var n=t.len(e);return new t(e.x/n,e.y/n,e.z/n,e.w/n)},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},t.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},t.prototype.mul=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},t.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},t.prototype.normalise=function(){var t=this.length();return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this},t.prototype.length=function(){return t.len(this)},t.prototype.dot=function(e){return t.dot(this,e)},t.ONE=new t(1,1,1,1),t}();exports.Vec4=t;
},{}],"gVZ7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./vec2"),t=require("./vec3"),n=function(){function n(e){for(var t=0;t<9;t++)this[t]=e[t];this.mul=this.mul.bind(this)}return n.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return{value:e[t++],done:t>9}}}},Object.defineProperty(n.prototype,"right",{get:function(){return new e.Vec2(this[0],this[1])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"up",{get:function(){return new e.Vec2(this[4],this[5])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pos",{get:function(){return new e.Vec2(this[6],this[7])},enumerable:!0,configurable:!0}),n.row=function(e,n){var r=3*n;return new t.Vec3(e[r+0],e[r+1],e[r+2])},n.col=function(e,n){return new t.Vec3(e[n+0],e[n+3],e[n+6])},n.translation=function(e,t){return new n([1,0,0,0,1,0,e,t,1])},n.rotation=function(e){var t=Math.sin(e),r=Math.cos(e);return new n([r,t,0,-t,r,0,0,0,1])},n.scale=function(e,t){return new n([e,0,0,0,t,0,0,0,1])},n.mul=function(e,t){return new n([e[0]*t[0]+e[1]*t[3]+e[2]*t[6],e[0]*t[1]+e[1]*t[4]+e[2]*t[7],e[0]*t[2]+e[1]*t[5]+e[2]*t[8],e[3]*t[0]+e[4]*t[3]+e[5]*t[6],e[3]*t[1]+e[4]*t[4]+e[5]*t[7],e[3]*t[2]+e[4]*t[5]+e[5]*t[8],e[6]*t[0]+e[7]*t[3]+e[8]*t[6],e[6]*t[1]+e[7]*t[4]+e[8]*t[7],e[6]*t[2]+e[7]*t[5]+e[8]*t[8]])},n.transformPoint=function(e,t){return{x:t.x*e[0]+t.y*e[3]+t.z*e[6],y:t.x*e[1]+t.y*e[4]+t.z*e[7],z:t.x*e[2]+t.y*e[5]+t.z*e[8]}},n.prototype.mul=function(e){return n.mul(this,e)},n}();exports.Mat3=n;
},{"./vec2":"JaNV","./vec3":"hxyE"}],"WuWw":[function(require,module,exports) {
"use strict";var e=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,c=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=c.next()).done;)i.push(o.value)}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return i},t=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(e(arguments[r]));return t};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./vec3"),o=require("./vec4"),n=function(){function e(t){void 0===t&&(t=e.Identity);for(var r=0;r<16;r++)this[r]=t[r]}return e.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return{value:e[t++],done:t>16}}}},Object.defineProperty(e.prototype,"right",{get:function(){return new r.Vec3(this[0],this[1],this[2])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"up",{get:function(){return new r.Vec3(this[4],this[5],this[6])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forward",{get:function(){return new r.Vec3(this[8],this[9],this[10])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return new r.Vec3(this[12],this[13],this[14])},enumerable:!0,configurable:!0}),e.prototype.toArray=function(){return t(this)},e.row=function(e,t){var r=4*t;return new o.Vec4(e[r+0],e[r+1],e[r+2],e[r+3])},e.col=function(e,t){return new o.Vec4(e[t+0],e[t+4],e[t+8],e[t+12])},e.translation=function(t,r,o){return new e([1,0,0,0,0,1,0,0,0,0,1,0,t,r,o,1])},e.scale=function(t,r,o){return new e([t,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1])},e.orthographicProjection=function(t,r,o,n,c,i){return new e([2/(r-t),0,0,0,0,2/(n-o),0,0,0,0,-2/(i-c),0,-(r+t)/(r-t),-(n+o)/(n-o),-(i+c)/(i-c),1])},e.mul=function(t,r){var n=e.row(t,0),c=e.row(t,1),i=e.row(t,2),u=e.row(t,3),a=e.col(r,0),f=e.col(r,1),d=e.col(r,2),l=e.col(r,3);return new e([o.Vec4.dot(n,a),o.Vec4.dot(n,f),o.Vec4.dot(n,d),o.Vec4.dot(n,l),o.Vec4.dot(c,a),o.Vec4.dot(c,f),o.Vec4.dot(c,d),o.Vec4.dot(c,l),o.Vec4.dot(i,a),o.Vec4.dot(i,f),o.Vec4.dot(i,d),o.Vec4.dot(i,l),o.Vec4.dot(u,a),o.Vec4.dot(u,f),o.Vec4.dot(u,d),o.Vec4.dot(u,l)])},e.Identity=new e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e}();exports.Mat4=n;
},{"./vec3":"hxyE","./vec4":"yoDL"}],"S1Ps":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./vec2"),t=function(){function t(t,o,r,i){this.pos=new e.Vec2(t,o),this.size=new e.Vec2(r,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.pos.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.pos.x+this.size.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.pos.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.pos.y+this.size.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return new e.Vec2(this.pos.x,this.pos.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return e.Vec2.add(this.pos,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.pos.x,y:this.pos.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.pos.x+this.size.x,y:this.pos.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.pos.x+this.size.x,y:this.pos.y+this.size.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.pos.x,y:this.pos.y+this.size.y}},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){return e.x>=this.left&&e.x<this.right&&e.y>=this.top&&e.y<this.bottom},t}();exports.Rect=t;
},{"./vec2":"JaNV"}],"XEYV":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("."),e=function(){function e(t,e){this.pos=new i.Vec2,this.dir=new i.Vec2,this.hit=null,this.pos.x=t.x,this.pos.y=t.y,this.dir.x=e.x,this.dir.y=e.y}return e.prototype.castToLine=function(t,r,s,n,o){void 0===o&&(o=!1),this.hit=null;var h=this.pos.x,a=this.pos.y,l=this.pos.x+this.dir.x,u=this.pos.y+this.dir.y,c=(t-s)*(a-u)-(r-n)*(h-l);if(0===c)return!1;var y=((t-h)*(a-u)-(r-a)*(h-l))/c;if(!(y>=0&&y<=1&&-((t-s)*(r-a)-(r-n)*(t-h))/c>=0))return!1;var p=new i.Vec2(t+y*(s-t),r+y*(n-r)),v=i.Vec2.perpendicular(i.Vec2.normalise(i.Vec2.sub(new i.Vec2(t,r),new i.Vec2(s,n))));v.dot(this.dir)<0&&(v.x=-v.x,v.y=-v.y);var d=null;o&&(d=new e(i.Vec2.sub(p,this.dir),i.Vec2.reflect(this.dir,v)));var f={point:p,normal:v,distance:i.Vec2.distance(this.pos,p),incomingRay:this,reflectedRay:d,target:null};return this.hit=f,!0},e.prototype.castToShapes=function(i,e){var r,s;void 0===e&&(e=0);var n=null;this.hit=null;try{for(var o=t(i),h=o.next();!h.done;h=o.next())for(var a=h.value,l=0;l<a.points.length-1;l++){var u=a.points[l],c=a.points[l+1];this.castToLine(u.x,u.y,c.x,c.y,e>=1)&&(this.hit.distance<(null==n?void 0:n.distance)||null==n)&&((n=this.hit).target=a)}}catch(y){r={error:y}}finally{try{h&&!h.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}return this.hit=n,e>0&&this.hit&&this.hit.reflectedRay.castToShapes(i,e-1),null!==this.hit},e.prototype.rays=function(){var t=[];return this.recursiveGetRays(t),t},e.prototype.hits=function(){var t=[];return this.recursiveGetHits(t),t},e.prototype.recursiveGetHits=function(t){var i;null!=this.hit&&(t.push(this.hit),null===(i=this.hit.reflectedRay)||void 0===i||i.recursiveGetHits(t))},e.prototype.recursiveGetRays=function(t){var i,e;t.push(this),null===(e=null===(i=this.hit)||void 0===i?void 0:i.reflectedRay)||void 0===e||e.recursiveGetRays(t)},e}();exports.Ray=e;
},{".":"sYjz"}],"WR27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){void 0===e&&(e=[]),this.points=e}return e.makeCircle=function(n,t,r,o){for(var i=[],u=0;u<=o;u++){var a=2*Math.PI/o*u,x=Math.sin(a)*r,s=-Math.cos(a)*r;i.push({x:n+x,y:t+s})}return new e(i)},e.makeLine=function(n,t,r,o){return new e([{x:n,y:t},{x:r,y:o}])},e.makeBox=function(n,t,r,o){return new e([{x:n,y:t},{x:n+r,y:t},{x:n+r,y:t+o},{x:n,y:t+o},{x:n,y:t}])},e}();exports.Shape=e;
},{}],"sYjz":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./vec2")),e(require("./vec3")),e(require("./vec4")),e(require("./mat3")),e(require("./mat4")),e(require("./rect")),e(require("./ray")),e(require("./shape"));
},{"./vec2":"JaNV","./vec3":"hxyE","./vec4":"yoDL","./mat3":"gVZ7","./mat4":"WuWw","./rect":"S1Ps","./ray":"XEYV","./shape":"WR27"}],"vCX4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../math"),t=function(){function t(t){var n=this;this.canvas=t,this.pos=new e.Vec2,this.dt=new e.Vec2,this.leftButtonDown=!1,this.mouseDownEventHandler=function(e){n.leftButtonDown=!0},this.mouseMoveEventHandler=function(t){var s=n.canvas.getBoundingClientRect(),o=n.pos;n.pos=new e.Vec2(t.pageX-s.x,t.pageY-s.y),n.dt=e.Vec2.sub(n.pos,o)},this.mouseUpEventHandler=function(){n.leftButtonDown=!1},this.canvas.addEventListener("mousedown",this.mouseDownEventHandler),this.canvas.addEventListener("mousemove",this.mouseMoveEventHandler),this.canvas.addEventListener("mouseup",this.mouseUpEventHandler)}return t.prototype.destroy=function(){this.canvas.removeEventListener("mousedown",this.mouseDownEventHandler),this.canvas.removeEventListener("mousemove",this.mouseMoveEventHandler),this.canvas.removeEventListener("mouseup",this.mouseUpEventHandler)},t.prototype.update=function(){this.dt=new e.Vec2},t}();exports.MouseInput=t;
},{"../math":"sYjz"}],"uEQW":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(e){var t=this;this.canvas=e,this.lastKeyState={},this.keyState={},this.keyDownEventHandler=function(e){console.log(e.key+" : "+e.keyCode),t.keyState[e.keyCode]=!0},this.keyUpEventHandler=function(e){t.keyState[e.keyCode]=!1},console.log("creating keyboard input"),document.addEventListener("keydown",this.keyDownEventHandler),document.addEventListener("keyup",this.keyUpEventHandler)}return t.prototype.destroy=function(){document.removeEventListener("keydown",this.keyDownEventHandler),document.removeEventListener("keyup",this.keyUpEventHandler)},t.prototype.isKeyDown=function(e){return this.keyState[e]||!1},t.prototype.wasKeyPressed=function(e){return this.keyState[e]&&!this.lastKeyState[e]||!1},t.prototype.wasKeyReleased=function(e){return this.keyState[e]&&!this.lastKeyState[e]||!1},t.prototype.update=function(){this.lastKeyState=e({},this.keyState)},t}();exports.KeyboardInput=t;
},{}],"MPCL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./mouseInput"),t=require("./keyboardInput"),o=function(){function o(o){this.mouse=new e.MouseInput(o),this.keyboard=new t.KeyboardInput(o)}return o.prototype.destroy=function(){this.mouse.destroy(),this.keyboard.destroy(),this.keyboard=null,this.mouse=null},o}();exports.InputManager=o;
},{"./mouseInput":"vCX4","./keyboardInput":"uEQW"}],"LCz5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){this.gl=e,this.image=new Image}return Object.defineProperty(e.prototype,"width",{get:function(){return this.image.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.image.height},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.gl.deleteTexture(this.handle),this.handle=null},e.prototype.load=function(e){var t=this;return new Promise(function(r,g){t.image.crossOrigin="anonymous",t.image.src=e,t.image.addEventListener("load",function(){t.handle=t.gl.createTexture(),t.gl.bindTexture(t.gl.TEXTURE_2D,t.handle),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MIN_FILTER,t.gl.NEAREST),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MAG_FILTER,t.gl.NEAREST),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_S,t.gl.REPEAT),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_T,t.gl.REPEAT),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,t.width,t.height,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,t.image),t.gl.bindTexture(t.gl.TEXTURE_2D,t.handle),r(t)})})},e}();exports.Texture2D=e;
},{}],"LQfK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.gl=t,this.infoLog=[],this.program=null,this.attributes={}}return t.prototype.destroy=function(){this.gl.deleteProgram(this.program)},t.prototype.enable=function(){this.gl.useProgram(this.program)},t.prototype.disable=function(){this.gl.useProgram(this.program)},t.prototype.bindTexture2d=function(t,r,e){this.gl.uniform1i(r,e),this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.activeTexture(this.gl.TEXTURE0)},t.prototype.createShader=function(t,r){var e=this.gl.createShader(r);this.gl.shaderSource(e,t),this.gl.compileShader(e);var i=this.gl.getShaderInfoLog(e);return this.infoLog.push("[ VERT ] "+i),e},t.prototype.createProgram=function(t,r,e,i){void 0===i&&(i=!0);var o=this.gl.createProgram();this.gl.attachShader(o,t),this.gl.attachShader(o,r);for(var h=0;h<e.length;h++)this.attributes[e[h]]=h,this.gl.bindAttribLocation(o,h,e[h]);this.gl.linkProgram(o),this.gl.validateProgram(o);var s=this.gl.getProgramInfoLog(o);return this.infoLog.push("[ FRAG ] "+s),i&&(this.gl.deleteShader(t),this.gl.deleteShader(r)),o},t}();exports.Shader=t;
},{}],"JNHK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var r,i=require("../math"),s=require("./texture"),n=require("./shader"),o=require("../math/mat3");!function(t){t[t.FILL=0]="FILL",t[t.WIREFRAME=1]="WIREFRAME"}(r=exports.RenderMode||(exports.RenderMode={}));var u="\n    precision mediump float;\n\n    attribute vec3 a_position;\n    attribute vec4 a_color;\n    attribute vec2 a_uv;\n\n    uniform mat4 u_projection;\n\n    varying vec2 v_uv;\n    varying vec4 v_color;\n    varying float v_uvId;\n\n    void main() \n    {\n        v_uvId = a_position.z;\n        v_color = a_color;\n        v_uv = a_uv;\n        gl_Position = vec4(a_position.x, a_position.y, 0.0, 1.0) * u_projection;\n    }\n",h="\n    precision mediump float;\n\n    varying vec2 v_uv;\n    varying vec4 v_color;\n    varying float v_uvId;\n\n    uniform sampler2D u_texture0;\n    uniform sampler2D u_texture1;\n    uniform sampler2D u_texture2;\n    uniform sampler2D u_texture3;\n    uniform sampler2D u_texture4;\n\n    void main() \n    {\n        if      ( v_uvId == 0.0 ) gl_FragColor = texture2D(u_texture0, v_uv.st) * v_color;\n        else if ( v_uvId == 1.0 ) gl_FragColor = texture2D(u_texture1, v_uv.st) * v_color;\n        else if ( v_uvId == 2.0 ) gl_FragColor = texture2D(u_texture2, v_uv.st) * v_color;\n        else if ( v_uvId == 3.0 ) gl_FragColor = texture2D(u_texture3, v_uv.st) * v_color;\n        else if ( v_uvId == 4.0 ) gl_FragColor = texture2D(u_texture4, v_uv.st) * v_color;\n        else gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n",a=function(e){function r(t){var r=e.call(this,t)||this;return r.program=r.createProgram(r.createShader(u,r.gl.VERTEX_SHADER),r.createShader(h,r.gl.FRAGMENT_SHADER),["a_position","a_color","a_uv"],!0),r}return t(r,e),r.prototype.setTexture=function(t,e){var r=this.gl.getUniformLocation(this.program,"u_texture"+e);this.bindTexture2d(t,r,e)},r.prototype.setProjection=function(t){var e=this.gl.getUniformLocation(this.program,"u_projection"),r=t.toArray();this.gl.uniformMatrix4fv(e,!0,r)},r}(n.Shader),l=function(){function t(t,e,r){this.gl=t,this.vSizeBytes=e,this.iSizeBytes=r,this.vao=this.gl.createVertexArray(),this.vbo=this.gl.createBuffer(),this.ibo=this.gl.createBuffer()}return t.prototype.destroy=function(){this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo),this.gl.deleteVertexArray(this.vao)},t.prototype.bind=function(){this.gl.bindVertexArray(this.vao),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo)},t.prototype.unbind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null)},t.prototype.setVertexBufferSize=function(t){var e=t*this.vSizeBytes;this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.DYNAMIC_DRAW)},t.prototype.setIndexBufferSize=function(t){var e=t*this.iSizeBytes;this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.DYNAMIC_DRAW)},t.prototype.setVertexBufferData=function(t,e,r){this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,t,0)},t.prototype.setIndexBufferData=function(t,e){this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,t,0)},t.prototype.draw=function(t,e){void 0===e&&(e=this.gl.TRIANGLES),this.gl.drawElements(e,t,this.gl.UNSIGNED_SHORT,0)},t}(),c=function(){function t(t){this.gl=t,this.verts=new Float32Array(4608),this.indices=new Uint16Array(768),this.size=9*Float32Array.BYTES_PER_ELEMENT,this.currentVert=0,this.currentFace=0,this.buffer=new l(this.gl,9*Float32Array.BYTES_PER_ELEMENT,Uint16Array.BYTES_PER_ELEMENT),this.buffer.bind(),this.buffer.setIndexBufferSize(this.indices.length),this.buffer.setVertexBufferSize(this.verts.length),this.gl.enableVertexAttribArray(0),this.gl.enableVertexAttribArray(1),this.gl.enableVertexAttribArray(2);var e=this.size,r=Float32Array.BYTES_PER_ELEMENT;this.gl.vertexAttribPointer(0,3,this.gl.FLOAT,!1,e,0*r),this.gl.vertexAttribPointer(1,4,this.gl.FLOAT,!1,e,3*r),this.gl.vertexAttribPointer(2,2,this.gl.FLOAT,!1,e,7*r),this.buffer.unbind()}return Object.defineProperty(t.prototype,"currentVertIndex",{get:function(){return 9*this.currentVert},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentIndicyIndex",{get:function(){return 3*this.currentFace},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.buffer.destroy(),this.buffer=null},t.prototype.draw=function(t){void 0===t&&(t=this.gl.TRIANGLES),this.buffer.bind(),this.buffer.setVertexBufferData(this.verts,this.currentVert,9),this.buffer.setIndexBufferData(this.indices,this.currentIndicyIndex),this.buffer.draw(this.currentIndicyIndex,t),this.buffer.unbind()},t.prototype.getPos=function(t){var e=t*this.size,r=this.verts;return{x:r[e+0],y:r[e+1],z:r[e+2]}},t.prototype.getColor=function(t){var e=t*this.size,r=this.verts;return{x:r[e+3],y:r[e+4],z:r[e+5],w:r[e+6]}},t.prototype.getUV=function(t){var e=t*this.size,r=this.verts;return{x:r[e+7],y:r[e+8]}},t.prototype.setPos=function(t){var e=this.currentVertIndex,r=this.verts;return r[e+0]=t.x,r[e+1]=t.y,r[e+2]=t.z,this},t.prototype.setColor=function(t){var e=this.currentVertIndex,r=this.verts;return r[e+3]=t.x,r[e+4]=t.y,r[e+5]=t.z,r[e+6]=t.w,this},t.prototype.setUV=function(t){var e=this.currentVertIndex,r=this.verts;return r[e+7]=t.x,r[e+8]=t.y,this},t.prototype.clear=function(){this.currentVert=0,this.currentFace=0},t.prototype.saveVert=function(){return this.currentVert++},t.prototype.saveFace=function(t,e,r){return this.indices[this.currentIndicyIndex+0]=t,this.indices[this.currentIndicyIndex+1]=e,this.indices[this.currentIndicyIndex+2]=r,this.currentFace+=1,this},t}(),f=function(){function t(t,e){this.canvas=t,this.gl=e,this.projection=new i.Mat4,this.maxTextures=5,this.activeTextures=[null,null,null,null,null],this.currentTextureId=0,this.processingRender=!1,this.renderState=[],this.numFlushes=0,this.blankTexture=new s.Texture2D(this.gl),this.blankTexture.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII="),this.saveState(!0),this.projection=i.Mat4.orthographicProjection(0,this.canvas.width,this.canvas.height,0,0,100),this.shader=new a(this.gl),this.spriteBuffer=new c(this.gl)}return t.prototype.destroy=function(){this.spriteBuffer.destroy(),this.shader.destroy()},t.prototype.begin=function(){this.processingRender=!0,this.spriteBuffer.clear(),this.currentTextureId=0,this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE),this.shader.enable(),this.shader.setProjection(this.projection)},t.prototype.end=function(){this.flushBatch(),this.processingRender=!1,this.renderState=[],this.saveState(!0),console.log("Flushes: "+this.numFlushes),this.numFlushes=0},t.prototype.darwRect=function(t,e,r,s,n,u,h){var a,l,c;this.shouldFlush()&&this.flushBatch();var f=this.renderState[this.renderState.length-1],d=this.useTexture(null!==(a=f.texture)&&void 0!==a?a:this.blankTexture),p=null!==(l=f.color)&&void 0!==l?l:[i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE],v=null!==(c=f.uvRect)&&void 0!==c?c:new i.Rect(0,0,1,1),g=o.Mat3.scale(r,s).mul(o.Mat3.rotation(n)).mul(o.Mat3.translation(t,e)),x=o.Mat3.transformPoint(g,{x:0-u,y:0-h,z:1}),y=o.Mat3.transformPoint(g,{x:1-u,y:0-h,z:1}),_=o.Mat3.transformPoint(g,{x:1-u,y:1-h,z:1}),A=o.Mat3.transformPoint(g,{x:0-u,y:1-h,z:1});x.z=d,y.z=d,_.z=d,A.z=d;var b=this.spriteBuffer.setPos(x).setColor(p[0]).setUV(v.topLeft).saveVert(),E=this.spriteBuffer.setPos(y).setColor(p[1]).setUV(v.topRight).saveVert(),R=this.spriteBuffer.setPos(_).setColor(p[2]).setUV(v.bottomRight).saveVert(),S=this.spriteBuffer.setPos(A).setColor(p[3]).setUV(v.bottomLeft).saveVert();this.spriteBuffer.saveFace(b,E,R).saveFace(b,R,S)},t.prototype.drawLine=function(t,e,r,s,n,o){this.drawLines([new i.Vec2(t,e),new i.Vec2(r,s)],n,o)},t.prototype.drawLines=function(t,e,r){var s,n,o;this.shouldFlush()&&this.flushBatch(),r=null!=r?r:[],this.saveState();for(var u=this.renderState[this.renderState.length-1],h=this.useTexture(this.blankTexture),a=null!==(s=u.color[0])&&void 0!==s?s:i.Vec4.ONE,l=[],c=i.Vec2.ZERO,f=0;f<t.length;f++){var d=t[f],p=null!==(n=t[f+1])&&void 0!==n?n:i.Vec2.add(d,c),v=i.Vec2.sub(null!=p?p:d,d).normalise(),g=i.Vec2.add(c,v).normalise(),x=i.Vec2.perpendicular(g),y=e/x.dot(i.Vec2.perpendicular(v))*.5,_=i.Vec2.mul(x,{x:y,y:y}),A=null!==(o=r[f])&&void 0!==o?o:a,b=this.spriteBuffer.setPos({x:d.x+_.x,y:d.y+_.y,z:h}).setColor(A).setUV({x:0,y:0}).saveVert(),E=this.spriteBuffer.setPos({x:d.x-_.x,y:d.y-_.y,z:h}).setColor(A).setUV({x:0,y:0}).saveVert();l.push(b),l.push(E),c=v}for(f=0;f<l.length-2;f+=2){var R=l[f];this.spriteBuffer.saveFace(R,R+1,R+2),this.spriteBuffer.saveFace(R+1,R+2,R+3)}this.popState()},t.prototype.drawCircle=function(t,e,r,s){var n,o,u;this.shouldFlush()&&this.flushBatch();for(var h=this.renderState[this.renderState.length-1],a=this.useTexture(null!==(n=h.texture)&&void 0!==n?n:this.blankTexture),l=null!==(o=h.color[0])&&void 0!==o?o:i.Vec4.ONE,c=null!==(u=h.uvRect)&&void 0!==u?u:new i.Rect(0,0,1,1),f=this.spriteBuffer.setPos({x:t,y:e,z:a}).setColor(l).setUV({x:.5*(c.right-c.left),y:.5*(c.bottom-c.top)}).saveVert(),d=0;d<=s;d++){var p=2*Math.PI/s*d,v=Math.sin(p),g=-Math.cos(p);this.spriteBuffer.setPos({x:v*r+t,y:g*r+e,z:a}).setColor(l).setUV({x:.5*v+.5,y:.5*g+.5}).saveVert()}for(d=0;d<=s;d++)this.spriteBuffer.saveFace(f,f+d,f+d+1)},t.prototype.setTexture=function(t){this.renderState[this.renderState.length-1].texture=t},t.prototype.setColor=function(t){var e=this.renderState[this.renderState.length-1];e.color[0]=t,e.color[1]=t,e.color[2]=t,e.color[3]=t},t.prototype.setColorPoints=function(t,e,r,i){var s=this.renderState[this.renderState.length-1];s.color[0]=t,s.color[1]=e,s.color[2]=r,s.color[3]=i},t.prototype.setUvRect=function(t){this.renderState[this.renderState.length-1].uvRect=t},t.prototype.setRenderMode=function(t){var e=this.renderState[this.renderState.length-1];e.renderMode!=t&&(this.flushBatch(),e.renderMode=t)},t.prototype.saveState=function(t){void 0===t&&(t=!1);var s=this.renderState[this.renderState.length-1],n=t?{color:[i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE],uvRect:new i.Rect(0,0,1,1),texture:this.blankTexture,renderMode:r.FILL}:s;this.renderState.push(e(e({},this.renderState[this.renderState.length-1]),n))},t.prototype.popState=function(){if(!(this.renderState.length<=1)){var t=this.renderState[this.renderState.length-1],e=this.renderState[this.renderState.length-2],r=!1;(r=r||t.renderMode!=e.renderMode)&&this.flushBatch(),this.renderState.pop()}},t.prototype.useTexture=function(t){for(var e=0;e<=this.currentTextureId;e++)if(this.activeTextures[e]==t)return e;return this.currentTextureId>=this.maxTextures&&this.flushBatch(),this.activeTextures[this.currentTextureId]=t,this.shader.setTexture(t.handle,this.currentTextureId),this.currentTextureId+=1,this.currentTextureId-1},t.prototype.flushBatch=function(){if(0!==this.spriteBuffer.currentIndicyIndex&&0!==this.spriteBuffer.currentVertIndex&&!1!==this.processingRender){var t=this.gl.TRIANGLES;switch(this.renderState[this.renderState.length-1].renderMode){case r.FILL:t=this.gl.TRIANGLES;break;case r.WIREFRAME:t=this.gl.LINE_STRIP}this.spriteBuffer.draw(t),this.spriteBuffer.clear();for(var e=0;e<this.maxTextures;e++)this.activeTextures[e]=null;this.currentTextureId=0,this.numFlushes+=1}},t.prototype.shouldFlush=function(){return this.spriteBuffer.currentVertIndex>=this.spriteBuffer.verts.length-1||this.spriteBuffer.currentVertIndex>=this.spriteBuffer.indices.length-1},t}();exports.Renderer2d=f;
},{"../math":"sYjz","./texture":"LCz5","./shader":"LQfK","../math/mat3":"gVZ7"}],"ATgh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this.deltaTime=0,this.startTime=0,this.stopTime=0}return t.prototype.start=function(){this.stopTime=0,this.startTime=performance.now()/1e3},t.prototype.stop=function(){this.stopTime=performance.now()/1e3,this.deltaTime=this.stopTime-this.startTime},t}();exports.Timer=t;
},{}],"DiVr":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./timer"),r=function(e){function r(){var t=e.call(this)||this;return t.framesPerSecond=0,t.frameCounter=0,t.runningTime=0,t}return t(r,e),r.prototype.update=function(){this.stop(),this.runningTime+=this.deltaTime,this.frameCounter+=1,this.runningTime>=1&&(this.framesPerSecond=this.frameCounter,this.runningTime=0,this.frameCounter=0),this.start()},r}(e.Timer);exports.FrameTimer=r;
},{"./timer":"ATgh"}],"gfsx":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{u(i.next(t))}catch(e){a(e)}}function o(t){try{u(i.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,o)}u((i=i.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var n,i,r,a,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(o){a=[6,o],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./input/inputManager"),i=require("./graphics/renderer2d"),r=require("./utils/frameTimer"),a=function(){function a(t){this.canvas=document.getElementById(t),this.resize(),this.input=new n.InputManager(this.canvas),this.time=new r.FrameTimer,this.gl=this.canvas.getContext("webgl2",{antialias:!0}),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.renderer2d=new i.Renderer2d(this.canvas,this.gl)}return a.prototype.destroy=function(){this.input.destroy(),this.input=null},a.prototype.loadAssets=function(){return t(this,void 0,void 0,function(){return e(this,function(t){return[2]})})},a.prototype.launch=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.loadAssets()];case 1:return t.sent(),this.run(),[2]}})})},a.prototype.update=function(){},a.prototype.draw=function(){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},a.prototype.run=function(){var t=this;this.time.update(),this.update(),this.draw(),this.input.keyboard.update(),this.input.mouse.update(),requestAnimationFrame(function(){t.run()})},a.prototype.resize=function(){var t=this.canvas.clientWidth,e=this.canvas.clientHeight;this.canvas.width===t&&this.canvas.height===e||(this.canvas.width=t,this.canvas.height=e)},a}();exports.App=a;
},{"./input/inputManager":"MPCL","./graphics/renderer2d":"JNHK","./utils/frameTimer":"DiVr"}],"EfLs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../engine/math");exports.levels=[{tileSize:55,rows:8,cols:8,startTile:[4,1],layout:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,2,4,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],lights:[[0,0,0,0,0,41,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],fixed:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],zones:[new e.Rect(2,2,4,4)]}];
},{"../../engine/math":"sYjz"}],"yqaZ":[function(require,module,exports) {
module.exports="/tile-type-solid.9305ec5a.png";
},{}],"FPNe":[function(require,module,exports) {
module.exports="/tile-type-1.bd51c170.png";
},{}],"bAtR":[function(require,module,exports) {
module.exports="/tile-type-2.f5d3dc10.png";
},{}],"Dx1e":[function(require,module,exports) {
module.exports="/tile-type-3.70a14a96.png";
},{}],"i24t":[function(require,module,exports) {
module.exports="/tile-type-4.4e3909cc.png";
},{}],"zwX6":[function(require,module,exports) {
module.exports="/tile-type-5.662af8c0.png";
},{}],"pWGR":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{a(i.next(e))}catch(t){o(t)}}function l(e){try{a(i.throw(e))}catch(t){o(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,l)}a((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(l){o=[6,l],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var o,s,l=require("../../engine/app"),a=require("../../engine/math"),h=require("./levels"),c=n(require("./assets/tile-type-solid.png")),u=n(require("./assets/tile-type-1.png")),p=n(require("./assets/tile-type-2.png")),d=n(require("./assets/tile-type-3.png")),y=n(require("./assets/tile-type-4.png")),v=n(require("./assets/tile-type-5.png")),f=require("../../engine/graphics/texture"),x=new a.Vec4(236/255,239/255,241/255,1),w=new a.Vec4(1,1,1,1),T={1:new a.Vec4(1,138/255,128/255,1),2:new a.Vec4(43/255,187/255,173/255,1),3:new a.Vec4(179/255,136/255,1,1),4:new a.Vec4(149/255,158/255,1,1),5:new a.Vec4(63/255,114/255,155/255,1)};!function(e){e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.UP=2]="UP",e[e.RIGHT=3]="RIGHT",e[e.DOWN=4]="DOWN"}(o||(o={})),function(e){e[e.NONE=0]="NONE",e[e.EMPTY=1]="EMPTY",e[e.CORNER_TL=2]="CORNER_TL",e[e.CORNER_TR=3]="CORNER_TR",e[e.CORNER_BR=4]="CORNER_BR",e[e.CORNER_BL=5]="CORNER_BL",e[e.SOLID=6]="SOLID"}(s||(s={}));var g=function(){function e(e){this.tileTextures={},this.tiles=[],this.movingTiles=new Set,this.data=e}return e.prototype.posToIndex=function(e){var t=Math.floor((e.x-this.pos.x)/this.data.tileSize),r=Math.floor((e.y-this.pos.y)/this.data.tileSize);return new a.Vec2(t,r)},e.prototype.indexToPos=function(e){var t=.5*this.data.tileSize,r=Math.floor(e.x*this.data.tileSize+this.pos.x+t),i=Math.floor(e.y*this.data.tileSize+this.pos.y+t);return new a.Vec2(r,i)},e.prototype.inZone=function(e){var t,r;try{for(var n=i(this.data.zones),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.contains(e))return s}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return null},e.prototype.calculateLightPoints=function(){var e,t;try{for(var r=i(this.tiles),n=r.next();!n.done;n=r.next()){var o=n.value;o instanceof R&&o.calculateLightPoints()}}catch(s){e={error:s}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.findTileAtIndex=function(e){var t,r;try{for(var n=i(this.tiles),o=n.next();!o.done;o=n.next()){var s=o.value,l=this.posToIndex(s.pos);if(l.x===e.x&&l.y==e.y)return s}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e}(),L=function(){function e(e,t,r,i){this.isMovingToTarget=!1,this.level=e,this.pos=t,this.size=r,this.targetPos=new a.Vec2(t.x,t.y),this.type=i}return e.prototype.update=function(e){this.moveToTargetPos(e)},e.prototype.draw=function(e){var t=this.level.data.tileSize;e.setTexture(this.level.tileTextures[1]),e.darwRect(this.pos.x,this.pos.y,t,t,0,.5,.5),this.type>=1&&(e.setTexture(this.level.tileTextures[this.type]),e.darwRect(this.pos.x,this.pos.y,t,t,0,.5,.5))},e.prototype.moveToTargetPos=function(e){if(!1!==this.isMovingToTarget){var t=a.Vec2.sub(this.targetPos,this.pos).normalise();this.pos.add({x:t.x*e*this.size.x*8,y:t.y*e*this.size.y*8}),Math.abs(this.pos.x-this.targetPos.x)<4&&(this.pos.x=this.targetPos.x),Math.abs(this.pos.y-this.targetPos.y)<4&&(this.pos.y=this.targetPos.y),this.pos.x==this.targetPos.x&&this.pos.y==this.targetPos.y&&(this.isMovingToTarget=!1,this.onMoveFinished&&this.onMoveFinished(this))}},e.prototype.move=function(e){var t=this.level.posToIndex(this.pos).add(e);this.targetPos=this.level.indexToPos(t),this.isMovingToTarget=!0},e.prototype.moveWith=function(e,t){var r=this.level.posToIndex(this.pos);return(r.y==t.y&&0!==e.x||r.x==t.x&&0!==e.y)&&(this.move(e),!0)},e}(),R=function(t){function r(e,r,i,n){var s=t.call(this,e,r,i,n)||this;return s.lightDir=o.NONE,s.lightPoints=[],s}return e(r,t),Object.defineProperty(r.prototype,"color",{get:function(){var e;return null!==(e=T[this.colorId])&&void 0!==e?e:new a.Vec4(1,1,1,1)},enumerable:!0,configurable:!0}),r.prototype.draw=function(e){t.prototype.draw.call(this,e),e.saveState(!0);var r=new a.Vec4(this.color.x,this.color.y,this.color.z,.5);r.w=.5,e.setColor(r),e.darwRect(this.pos.x,this.pos.y,this.level.data.tileSize/2,this.level.data.tileSize/2,0,.5,.5),e.popState()},r.prototype.drawLight=function(e){var t,r;if(0!=this.lightPoints.length)try{for(var n=i(this.lightPoints),o=n.next();!o.done;o=n.next()){var s=o.value,l=s.map(function(e){return e.pos}),h=s.map(function(e){return new a.Vec4(e.color.x,e.color.y,e.color.z,e.color.w)});h[h.length-1].w=0,e.saveState(!0),e.setColor(new a.Vec4(this.color.x,this.color.y,this.color.z,.5));var c=this.level.data.tileSize/3;e.drawLines(l,c,h),e.popState()}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},r.prototype.calculateLightPoints=function(){if(this.lightPoints=[],this.lightDir!=o.NONE){var e=this.dirToVec(this.lightDir),t=[];this.lightPoints.push(t),t.push({dir:e,index:this.level.posToIndex(this.pos),pos:new a.Vec2(this.pos.x,this.pos.y).sub({x:9*e.x,y:9*e.y}),color:this.color,tile:null}),this.traceLightPoints(t,this.dirToVec(this.lightDir),this.pos)}},r.prototype.traceLightPoints=function(e,t,r){r=new a.Vec2(r.x,r.y);var i=this.level.data.tileSize,n=.5*i,o=this.level.posToIndex(r);if(o.x<0||o.x>this.level.data.cols||o.y<0||o.y>this.level.data.rows)e.push({dir:new a.Vec2(0,0),index:o,pos:r,color:this.color,tile:null});else{var l=this.level.findTileAtIndex(o),h=!1,c=t,u=new a.Vec2;if(l&&l.type!=s.NONE){var p=this.level.indexToPos(o),d=a.Vec2.sub(p,l.pos).length();if(Math.abs(t.x)>0&&(r.x=l.pos.x),Math.abs(t.y)>0&&(r.y=l.pos.y),l.type==s.CORNER_TL){if(1==t.x&&(h=!0,u.x-=n-6),1==t.y&&(h=!0,u.y-=n-6),-1==t.x){d>=0&&d<=n-7-i/3/2&&(c=new a.Vec2(t.y,-t.x),u.x+=d*t.x,!0)}-1==t.y&&(c=new a.Vec2(t.y,-t.x))}l.type==s.CORNER_TR&&-1==t.x&&(h=!0,u.x+=n-6),l.type==s.CORNER_TR&&1==t.y&&(h=!0,u.y-=n-6),l.type==s.CORNER_TR&&1==t.x&&(c=new a.Vec2(t.y,t.x)),l.type==s.CORNER_TR&&-1==t.y&&(c=new a.Vec2(t.y,-t.x)),l.type==s.CORNER_BR&&1==t.x&&(c=new a.Vec2(t.y,-t.x)),l.type==s.CORNER_BR&&1==t.y&&(c=new a.Vec2(-t.y,t.x)),l.type==s.CORNER_BR&&-1==t.x&&(h=!0,u.x+=n-6),l.type==s.CORNER_BR&&-1==t.y&&(h=!0,u.y+=n-6),l.type==s.CORNER_BL&&1==t.x&&(h=!0,u.x-=n-6),l.type==s.CORNER_BL&&1==t.y&&(c=new a.Vec2(t.y,-t.x)),l.type==s.CORNER_BL&&-1==t.x&&(c=new a.Vec2(-t.y,t.x)),l.type==s.CORNER_BL&&-1==t.y&&(h=!0,u.y+=n-6),l.type==s.SOLID&&1==t.x&&(h=!0),l.type==s.SOLID&&1==t.y&&(h=!0),l.type==s.SOLID&&-1==t.x&&(h=!0),l.type==s.SOLID&&-1==t.y&&(h=!0)}if((t!=c||h)&&(r.x+=u.x,r.y+=u.y,e.push({dir:c,index:o,pos:r,color:this.color,tile:l})),!h){var y=a.Vec2.mul(c,{x:i,y:i}).add(r);this.traceLightPoints(e,c,y)}}},r.prototype.dirToVec=function(e){switch(e){case o.LEFT:return new a.Vec2(-1,0);case o.UP:return new a.Vec2(0,-1);case o.RIGHT:return new a.Vec2(1,0);case o.DOWN:return new a.Vec2(0,1);default:return new a.Vec2(0,0)}},r}(L),V=function(n){function o(e){var t=n.call(this,e)||this;return t.currentLevelIndex=0,t.tileTextures={},t.currentLevel=new g(h.levels[t.currentLevelIndex]),t.currentLevel.tileTextures=t.tileTextures,t.loadLevel(),t}return e(o,n),o.prototype.loadAssets=function(){return t(this,void 0,Promise,function(){return r(this,function(e){switch(e.label){case 0:return[4,n.prototype.loadAssets.call(this)];case 1:return e.sent(),this.tileTextures[0]=null,this.tileTextures[1]=new f.Texture2D(this.gl),this.tileTextures[1].load(u.default),this.tileTextures[2]=new f.Texture2D(this.gl),this.tileTextures[2].load(p.default),this.tileTextures[3]=new f.Texture2D(this.gl),this.tileTextures[3].load(d.default),this.tileTextures[4]=new f.Texture2D(this.gl),this.tileTextures[4].load(y.default),this.tileTextures[5]=new f.Texture2D(this.gl),this.tileTextures[5].load(v.default),this.tileTextures[6]=new f.Texture2D(this.gl),this.tileTextures[6].load(c.default),[2]}})})},o.prototype.update=function(){var e,t;n.prototype.update.call(this);var r=this.input.keyboard,o=new a.Vec2(0,0);r.wasKeyPressed(38)?o.y=-1:r.wasKeyPressed(40)?o.y=1:r.wasKeyPressed(37)?o.x=-1:r.wasKeyPressed(39)&&(o.x=1),0===o.x&&0===o.y||this.moveActiveTile(o);try{for(var s=i(this.currentLevel.tiles),l=s.next();!l.done;l=s.next()){l.value.update(this.time.deltaTime)}}catch(h){e={error:h}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}this.currentLevel.calculateLightPoints()},o.prototype.draw=function(){n.prototype.draw.call(this),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.renderer2d.begin(),this.drawBackgroundGrid(),this.drawLightBeams(),this.drawTiles(),this.renderer2d.end()},o.prototype.drawBackgroundGrid=function(){var e=this.currentLevel.data.tileSize,t=this.currentLevel.data.cols-2,r=this.currentLevel.data.rows-2,i=.5*(this.canvas.width-t*e),n=.5*(this.canvas.height-r*e);this.renderer2d.saveState(!0);var o=new a.Vec4(1,1,1,.2);this.renderer2d.setColor(o);for(var s=[new a.Vec4(o.x,o.y,o.z,0),new a.Vec4(o.x,o.y,o.z,o.w),new a.Vec4(o.x,o.y,o.z,o.w),new a.Vec4(o.x,o.y,o.z,0)],l=0;l<=t;l++){var h=[new a.Vec2(i+l*e,n-2*e),new a.Vec2(i+l*e,n-0),new a.Vec2(i+l*e,n+r*e),new a.Vec2(i+l*e,n+(r+2)*e)];this.renderer2d.drawLines(h,1,s)}for(l=0;l<=r;l++){h=[new a.Vec2(i-2*e,n+l*e),new a.Vec2(i-0,n+l*e),new a.Vec2(i+t*e,n+l*e),new a.Vec2(i+(t+2)*e,n+l*e)];this.renderer2d.drawLines(h,1,s)}this.renderer2d.popState()},o.prototype.drawLightBeams=function(){var e,t;try{for(var r=i(this.currentLevel.tiles),n=r.next();!n.done;n=r.next()){var o=n.value;o instanceof R&&o.drawLight(this.renderer2d)}}catch(s){e={error:s}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},o.prototype.drawTiles=function(){this.renderer2d.saveState(!0);for(var e=0;e<this.currentLevel.tiles.length;e++){this.currentLevel.tiles[e].draw(this.renderer2d)}this.renderer2d.popState()},o.prototype.moveActiveTile=function(e){var t,r,n=this;if(!(this.currentLevel.movingTiles.size>0||null===this.currentLevel.activeTile)){var o=this.currentLevel.posToIndex(this.currentLevel.activeTile.pos),s=a.Vec2.add(o,e),l=this.currentLevel.inZone(s),h=function(e){n.currentLevel.movingTiles.delete(e),e.onMoveFinished=null;var t=n.currentLevel.posToIndex(e.pos);(null==l?void 0:l.contains(t))||(n.currentLevel.activeTile=e)};if(this.currentLevel.activeTile.move(e),this.currentLevel.activeTile.onMoveFinished=h,this.currentLevel.activeTile=null,null!==l)try{for(var c=i(this.currentLevel.tiles),u=c.next();!u.done;u=c.next()){var p=u.value,d=this.currentLevel.posToIndex(p.pos);l.contains(d)&&p.moveWith(e,o)&&(this.currentLevel.movingTiles.add(p),p.onMoveFinished=h)}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}}},o.prototype.loadLevel=function(){var e=this.currentLevel,t=e.data.layout,r=e.data.lights;0===t[e.data.startTile[1]][e.data.startTile[0]]&&(t[e.data.startTile[1]][e.data.startTile[0]]=1);var i=e.data.tileSize,n=e.data.cols-2,o=e.data.rows-2,s=.5*(this.canvas.width-(n+2)*i),l=.5*(this.canvas.height-(o+2)*i);e.pos=new a.Vec2(s,l),this.currentLevel.tiles=[];for(var h=e.data.rows,c=e.data.cols,u=0;u<h;u++)for(var p=0;p<c;p++){var d=r[u][p],y=t[u][p];if(0!=d&&(y=1),0!==y){var v=s+p*i+.5*i,f=l+u*i+.5*i,x=null;d>0?((x=new R(this.currentLevel,new a.Vec2(v,f),new a.Vec2(i,i),y)).lightDir=Math.floor(d/10),x.colorId=d-10*x.lightDir):x=new L(this.currentLevel,new a.Vec2(v,f),new a.Vec2(i,i),y),p===e.data.startTile[0]&&u===e.data.startTile[1]&&(this.currentLevel.activeTile=x),this.currentLevel.tiles.push(x)}}},o}(l.App);exports.LightBender=V;
},{"../../engine/app":"gfsx","../../engine/math":"sYjz","./levels":"EfLs","./assets/tile-type-solid.png":"yqaZ","./assets/tile-type-1.png":"FPNe","./assets/tile-type-2.png":"bAtR","./assets/tile-type-3.png":"Dx1e","./assets/tile-type-4.png":"i24t","./assets/tile-type-5.png":"zwX6","../../engine/graphics/texture":"LCz5"}],"ZDti":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{l(n.next(t))}catch(e){a(e)}}function s(t){try{l(n.throw(t))}catch(e){a(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,s)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../../engine/app"),s=require("../../engine/math"),l=function(n){function i(t){var e=n.call(this,t)||this;return e.polygons=[],e.rays=[],e.rayHits=[],e.allRays=[],e.elapsedTime=0,e}return t(i,n),i.prototype.loadAssets=function(){return e(this,void 0,Promise,function(){var t,e,o,a,i,l,u,h,p;return r(this,function(r){switch(r.label){case 0:return[4,n.prototype.loadAssets.call(this)];case 1:return r.sent(),t=this.canvas.width,e=this.canvas.height,o=t/1.5,a=e/1.5,i=Math.min(o,a),l=t/2-i/2,u=t/2+i/2,h=e/2-i/2,p=e/2+i/2,this.polygons.push(s.Shape.makeCircle(t/2-i/4,e/2,i/10,4)),this.polygons.push(s.Shape.makeCircle(t/2+i/4,e/2,i/10,4)),this.polygons.push(s.Shape.makeCircle(t/2,e/2-i/4,i/10,4)),this.polygons.push(s.Shape.makeCircle(t/2,e/2+i/4,i/10,4)),this.polygons.push(s.Shape.makeBox(l,h,u-l,p-h)),this.polygons.push(s.Shape.makeBox(0,0,t,e)),this.rays=[],[2]}})})},i.prototype.update=function(){var t,e;n.prototype.update.call(this),this.elapsedTime+=this.time.deltaTime,this.elapsedTime=Math.PI/3,this.rays=this.makeRayFan(this.input.mouse.pos.x,this.input.mouse.pos.y,64),this.rayHits=[],this.allRays=[];for(var r=0;r<this.rays.length;r++){var a=this.rays[r];a.castToShapes(this.polygons,0),(t=this.rayHits).push.apply(t,o(a.hits())),(e=this.allRays).push.apply(e,o(a.rays()))}},i.prototype.draw=function(){var t,e;n.prototype.draw.call(this),this.renderer2d.begin();try{for(var r=a(this.polygons),o=r.next();!o.done;o=r.next()){var i=o.value;this.drawShape(i)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.drawRays(this.allRays),this.renderer2d.end()},i.prototype.drawShape=function(t){this.renderer2d.saveState(),this.renderer2d.drawLines(t.points,1),this.renderer2d.popState()},i.prototype.updateRayPositions=function(t,e){for(var r=0;r<this.rays.length;r++){var n=this.rays[r];n.pos.x=t,n.pos.y=e}},i.prototype.drawRays=function(t){var e,r,n,o;try{for(var i=a(t),l=i.next();!l.done;l=i.next()){var u=l.value,h=u.pos,p=Math.min(null!==(o=null===(n=u.hit)||void 0===n?void 0:n.distance)&&void 0!==o?o:2e3),c=s.Vec2.mul(u.dir,{x:p,y:p}).add(u.pos);this.renderer2d.drawLine(h.x,h.y,c.x,c.y,1)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},i.prototype.drawRayHits=function(t){var e,r;try{for(var n=a(t),o=n.next();!o.done;o=n.next()){var i=o.value;this.renderer2d.drawLine(i.incomingRay.pos.x,i.incomingRay.pos.y,i.point.x,i.point.y,1)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},i.prototype.makeRayFan=function(t,e,r){for(var n=[],o=0;o<r;o++){var a=2*Math.PI/r*o;n.push(new s.Ray(new s.Vec2(t,e),new s.Vec2(Math.sin(a),-Math.cos(a))))}return n},i.prototype.makeRaysToShapes=function(t,e,r){var n,o,i,l,u=new s.Vec2(t,e),h=[];try{for(var p=a(r),c=p.next();!c.done;c=p.next()){var y=c.value;try{for(var f=(i=void 0,a(y.points)),d=f.next();!d.done;d=f.next()){var v=d.value;h.push(new s.Ray(u,s.Vec2.sub(v,u).normalise()))}}catch(w){i={error:w}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(i)throw i.error}}}}catch(m){n={error:m}}finally{try{c&&!c.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return h},i.prototype.makeRayLine=function(t,e,r,n){for(var o=[],a=s.Vec2.perpendicular(e),i=0;i<r;i++)o.push(new s.Ray(s.Vec2.add(t,s.Vec2.scale(a,i*n)),e));return o},i}(i.App);exports.RayCastingDemo=l;
},{"../../engine/app":"gfsx","../../engine/math":"sYjz"}],"OeKX":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(u,a)}c((r=r.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../engine/app"),o=require("../../engine/math"),i=function(r){function i(t){return r.call(this,t)||this}return t(i,r),i.prototype.loadAssets=function(){return e(this,void 0,Promise,function(){return n(this,function(t){switch(t.label){case 0:return[4,r.prototype.loadAssets.call(this)];case 1:return t.sent(),[2]}})})},i.prototype.update=function(){r.prototype.update.call(this)},i.prototype.draw=function(){r.prototype.draw.call(this),this.renderer2d.begin();var t=[new o.Vec2(100,100),new o.Vec2(200,100),this.input.mouse.pos];this.renderer2d.drawLines(t,20),this.renderer2d.drawLine(300,300,400,400,6),this.renderer2d.end()},i}(r.App);exports.LineRenderingDemo=i;
},{"../../engine/app":"gfsx","../../engine/math":"sYjz"}],"coan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./lightBender"),r=require("./rayCasting"),n=require("./lineRendering"),i=require("../engine/app");function t(t,a){switch(a){case"LightBender":return new e.LightBender(t);case"RayCastingDemo":return new r.RayCastingDemo(t);case"LineRenderingDemo":return new n.LineRenderingDemo(t);default:return new i.App(t)}}exports.default=t;
},{"./lightBender":"pWGR","./rayCasting":"ZDti","./lineRendering":"OeKX","../engine/app":"gfsx"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("./demos"));function t(){var e;return null!==(e=window.location.hash.substr(1).split("/").filter(function(e){return""!==e})[0])&&void 0!==e?e:"LightBender"}function o(){n.default("canvas",t()).launch()}window.addEventListener("hashchange",function(){o()}),window.onload=function(){o()};var i=document.querySelector(".menu-btn"),s=document.querySelector(".page-nav ul"),r=!1;i.addEventListener("click",function(){(r=!r)?(i.classList.add("open"),s.classList.add("open")):(i.classList.remove("open"),s.classList.remove("open")),console.log("clicky")});
},{"./demos":"coan"}]},{},["QCba"], null)
//# sourceMappingURL=/src.1508cdaa.js.map