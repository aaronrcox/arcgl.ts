{"version":3,"sources":["engine/math/vec2.ts","engine/math/vec3.ts","engine/math/vec4.ts","engine/math/mat3.ts","engine/math/mat4.ts","engine/math/rect.ts","engine/math/ray.ts","engine/math/shape.ts","engine/math/index.ts","engine/input/mouseInput.ts","engine/input/keyboardInput.ts","engine/input/inputManager.ts","engine/graphics/texture.ts","engine/graphics/shader.ts","engine/graphics/renderer2d.ts","engine/utils/timer.ts","engine/utils/frameTimer.ts","engine/app.ts","demos/lightBender/levels.ts","demos/lightBender/index.ts","demos/rayCasting/index.ts","demos/lineRendering/index.ts","demos/index.ts","index.ts","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.77de5100.js","sourceRoot":"..\\src","sourcesContent":["\r\nexport interface IVec2 {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport class Vec2 implements IVec2 {\r\n\r\n    [key: number]: number;\r\n    [Symbol.iterator]() {\r\n        let step = 0;\r\n        return { next: () => ({ value: this[step++], done: step > 2 }) }\r\n    }\r\n\r\n    static readonly ZERO: Vec2 = new Vec2(0, 0);\r\n\r\n    get x() { return this[0]; }\r\n    get y() { return this[1]; }\r\n    get xy() { return [this.x, this.y]; }\r\n\r\n    set x(value: number) { this[0] = value; }\r\n    set y(value: number) { this[1] = value; }\r\n    set xy(value: [number, number]) { \r\n        this.x = value[0]; \r\n        this.y = value[1];\r\n    }\r\n\r\n    constructor(x: number = 0, y: number = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n     }\r\n\r\n    static add(lhs: IVec2, rhs: IVec2): Vec2 {\r\n        return new Vec2(lhs.x + rhs.x, lhs.y + rhs.y);\r\n    }\r\n    static sub(lhs: IVec2, rhs: IVec2): Vec2 {\r\n        return new Vec2(lhs.x - rhs.x, lhs.y - rhs.y);\r\n    }\r\n    static mul(lhs: IVec2, rhs: IVec2): Vec2 {\r\n        return new Vec2(lhs.x * rhs.x, lhs.y * rhs.y);\r\n    }\r\n    static scale(lhs: IVec2, rhs: number) {\r\n        return new Vec2(lhs.x * rhs, lhs.y * rhs);\r\n    }\r\n    static div(lhs: IVec2, rhs: IVec2): Vec2 {\r\n        return new Vec2(lhs.x / rhs.x, lhs.y / rhs.y);\r\n    }\r\n    static negate(vec: IVec2) {\r\n        return new Vec2(-vec.x, -vec.y);\r\n    }\r\n    static normalise(vec: IVec2): Vec2 {\r\n        const len = Vec2.len(vec);\r\n        return new Vec2(vec.x / len, vec.y / len );\r\n    }\r\n    static len(vec: IVec2): number {\r\n        return Math.sqrt(vec.x * vec.x + vec.y * vec.y);\r\n    }\r\n\r\n    static distance(vec1: IVec2, vec2: IVec2): number {\r\n        return Vec2.sub(vec2, vec1).length();\r\n    }\r\n    static dot(lhs: IVec2, rhs: IVec2): number {\r\n        return lhs.x * rhs.x + lhs.y * rhs.y;\r\n    }\r\n    static pivot(vec: IVec2, rot: number, point: IVec2 = {x: 0, y: 0}): Vec2 {\r\n        const x = vec.x - point.x;\r\n        const y = vec.y - point.y;\r\n\r\n        return new Vec2(\r\n            (x * Math.cos(rot)) - (y * Math.sin(rot)) + point.x, \r\n            (y * Math.cos(rot)) + (x * Math.sin(rot)) + point.y\r\n        );\r\n    }\r\n    static reflect(vec: IVec2, normal: IVec2) {\r\n        const d = Vec2.dot(vec, normal);\r\n        return new Vec2(\r\n            vec.x - 2 * d * normal.x,\r\n            vec.y - 2 * d * normal.y\r\n        )\r\n    }\r\n\r\n    add(rhs: IVec2): Vec2 {\r\n        this.x += rhs.x;\r\n        this.y += rhs.y;\r\n        return this;\r\n    }\r\n\r\n    sub(rhs: IVec2): Vec2 {\r\n        this.x -= rhs.x;\r\n        this.y -= rhs.y;\r\n        return this;\r\n    }\r\n\r\n    mul(rhs: IVec2) : Vec2 {\r\n        this.x *= rhs.x;\r\n        this.y *= rhs.y;\r\n        return this;\r\n    }\r\n\r\n    div(rhs: IVec2) : Vec2 {\r\n        this.x /= rhs.x;\r\n        this.y /= rhs.y;\r\n        return this;\r\n    }\r\n\r\n    scale(rhs: number) {\r\n        this.x *= rhs;\r\n        this.y *- rhs;\r\n    }\r\n\r\n    negate() {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        return this;\r\n    }\r\n\r\n    normalise() : Vec2 {\r\n        const len = this.length();\r\n        if(len === 0)\r\n            return this;\r\n            \r\n        this.x /= len;\r\n        this.y /= len;\r\n        return this;\r\n    }\r\n\r\n    length(): number {\r\n        return Vec2.len(this);\r\n    }\r\n\r\n    dot(rhs: IVec2): number{\r\n        return Vec2.dot(this, rhs);\r\n    }\r\n\r\n    pivot(rot: number, point: IVec2 = {x: 0, y: 0}): Vec2 {\r\n        let x = this.x - point.x;\r\n        let y = this.y - point.y;\r\n        \r\n        this.x = (x * Math.cos(rot)) - (y * Math.sin(rot)) + point.x;\r\n        this.y = (y * Math.cos(rot)) + (x * Math.sin(rot)) + point.y;\r\n\r\n        return this;\r\n    }\r\n\r\n    // 90 degree rotation cw\r\n    static perpendicular(vec: IVec2): Vec2 {\r\n        return new Vec2(vec.y, -vec.x);\r\n    }\r\n}\r\n","\r\nexport interface IVec3 {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n}\r\n\r\nexport class Vec3 implements IVec3 {\r\n\r\n    [key: number]: number;\r\n    [Symbol.iterator]() {\r\n        let step = 0;\r\n        return { next: () => ({ value: this[step++], done: step > 3 }) }\r\n    }\r\n\r\n    get x() { return this[0]; }\r\n    get y() { return this[1]; }\r\n    get z() { return this[2]; }\r\n    get xyz() { return [this.x, this.y, this.z]; }\r\n\r\n    set x(value: number) { this[0] = value; }\r\n    set y(value: number) { this[1] = value; }\r\n    set z(value: number) { this[2] = value; }\r\n    set xyz(value: [number, number, number]) { \r\n        this.x = value[0]; \r\n        this.y = value[1];\r\n        this.z = value[2];\r\n    }\r\n\r\n    constructor(x: number = 0, y: number = 0, z: number = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n     }\r\n\r\n    static add(lhs: IVec3, rhs: IVec3): Vec3 {\r\n        return new Vec3(lhs.x + rhs.x, lhs.y + rhs.y, lhs.z + rhs.z);\r\n    }\r\n    static sub(lhs: IVec3, rhs: IVec3): Vec3 {\r\n        return new Vec3(lhs.x - rhs.x, lhs.y - rhs.y, lhs.z - rhs.z);\r\n    }\r\n    static mul(lhs: IVec3, rhs: IVec3): Vec3 {\r\n        return new Vec3(lhs.x * rhs.x, lhs.y * rhs.y, lhs.z * rhs.z);\r\n    }\r\n    static div(lhs: IVec3, rhs: IVec3): Vec3 {\r\n        return new Vec3(lhs.x / rhs.x, lhs.y / rhs.y, lhs.z / rhs.z);\r\n    }\r\n    static normalise(vec: IVec3): Vec3 {\r\n        const len = Vec3.len(vec);\r\n        return new Vec3(vec.x / len, vec.y / len, vec.z / len );\r\n    }\r\n    static len(vec: IVec3): number {\r\n        return Math.sqrt(vec.x * vec.x + vec.y * vec.y + vec.z * vec.z);\r\n    }\r\n    static dot(lhs: IVec3, rhs: IVec3): number {\r\n        return lhs.x * rhs.x + lhs.y * rhs.y + lhs.z * rhs.z;\r\n    }\r\n\r\n\r\n    add(rhs: IVec3): Vec3 {\r\n        this.x += rhs.x;\r\n        this.y += rhs.y;\r\n        this.z += rhs.z;\r\n        return this;\r\n    }\r\n\r\n    sub(rhs: IVec3): Vec3 {\r\n        this.x -= rhs.x;\r\n        this.y -= rhs.y;\r\n        this.z -= rhs.z;\r\n        return this;\r\n    }\r\n\r\n    mul(rhs: IVec3) : Vec3 {\r\n        this.x *= rhs.x;\r\n        this.y *= rhs.y;\r\n        this.z *= rhs.z;\r\n        return this;\r\n    }\r\n\r\n    div(rhs: IVec3) : Vec3 {\r\n        this.x /= rhs.x;\r\n        this.y /= rhs.y;\r\n        this.z /= rhs.z;\r\n        return this;\r\n    }\r\n\r\n    normalise() : Vec3 {\r\n        const len = this.length();\r\n        this.x /= len;\r\n        this.y /= len;\r\n        this.z /= len;\r\n        return this;\r\n    }\r\n\r\n    length(): number {\r\n        return Vec3.len(this);\r\n    }\r\n\r\n    dot(rhs: IVec3): number{\r\n        return Vec3.dot(this, rhs);\r\n    }\r\n}","\r\nexport interface IVec4 {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n    w: number;\r\n}\r\n\r\nexport class Vec4 implements IVec4 {\r\n\r\n    static readonly ONE = new Vec4(1,1,1,1);\r\n\r\n    [key: number]: number;\r\n    [Symbol.iterator]() {\r\n        let step = 0;\r\n        return { next: () => ({ value: this[step++], done: step > 4 }) }\r\n    }\r\n\r\n    get x() { return this[0]; }\r\n    get y() { return this[1]; }\r\n    get z() { return this[2]; }\r\n    get w() { return this[3]; }\r\n    get xyzw() { return [this.x, this.y, this.z, this.w]; }\r\n\r\n    set x(value: number) { this[0] = value; }\r\n    set y(value: number) { this[1] = value; }\r\n    set z(value: number) { this[2] = value; }\r\n    set w(value: number) { this[3] = value; }\r\n    set xyzw(value: [number, number, number, number]) { \r\n        this.x = value[0]; \r\n        this.y = value[1];\r\n        this.z = value[2];\r\n        this.w = value[3];\r\n    }\r\n\r\n    constructor(x: number = 0, y: number = 0, z: number = 0, w: number = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n     }\r\n\r\n    static add(lhs: IVec4, rhs: IVec4): Vec4 {\r\n        return new Vec4(lhs.x + rhs.x, lhs.y + rhs.y, lhs.z + rhs.z, lhs.w + rhs.w);\r\n    }\r\n    static sub(lhs: IVec4, rhs: IVec4): Vec4 {\r\n        return new Vec4(lhs.x - rhs.x, lhs.y - rhs.y, lhs.z - rhs.z, lhs.w - rhs.w);\r\n    }\r\n    static mul(lhs: IVec4, rhs: IVec4): Vec4 {\r\n        return new Vec4(lhs.x * rhs.x, lhs.y * rhs.y, lhs.z * rhs.z, lhs.w * rhs.w);\r\n    }\r\n    static div(lhs: IVec4, rhs: IVec4): Vec4 {\r\n        return new Vec4(lhs.x / rhs.x, lhs.y / rhs.y, lhs.z / rhs.z, lhs.w / rhs.w);\r\n    }\r\n    static normalise(vec: IVec4): Vec4 {\r\n        const len = Vec4.len(vec);\r\n        return new Vec4(vec.x / len, vec.y / len, vec.z / len, vec.w / len );\r\n    }\r\n    static len(vec: IVec4): number {\r\n        return Math.sqrt(vec.x * vec.x + vec.y * vec.y + vec.z * vec.z + vec.w * vec.w);\r\n    }\r\n    static dot(lhs: IVec4, rhs: IVec4): number {\r\n        return lhs.x * rhs.x + lhs.y * rhs.y + lhs.z * rhs.z + lhs.w * rhs.w;\r\n    }\r\n\r\n    add(rhs: IVec4): Vec4 {\r\n        this.x += rhs.x;\r\n        this.y += rhs.y;\r\n        this.z += rhs.z;\r\n        this.w += rhs.w;\r\n        return this;\r\n    }\r\n\r\n    sub(rhs: IVec4): Vec4 {\r\n        this.x -= rhs.x;\r\n        this.y -= rhs.y;\r\n        this.z -= rhs.z;\r\n        this.w -= rhs.w;\r\n        return this;\r\n    }\r\n\r\n    mul(rhs: IVec4) : Vec4 {\r\n        this.x *= rhs.x;\r\n        this.y *= rhs.y;\r\n        this.z *= rhs.z;\r\n        this.w *= rhs.w;\r\n        return this;\r\n    }\r\n\r\n    div(rhs: IVec4) : Vec4 {\r\n        this.x /= rhs.x;\r\n        this.y /= rhs.y;\r\n        this.z /= rhs.z;\r\n        this.w /= rhs.w;\r\n        return this;\r\n    }\r\n\r\n    normalise() : Vec4 {\r\n        const len = this.length();\r\n        this.x /= len;\r\n        this.y /= len;\r\n        this.z /= len;\r\n        this.w /= len;\r\n        return this;\r\n    }\r\n\r\n    length(): number {\r\n        return Vec4.len(this);\r\n    }\r\n\r\n    dot(rhs: IVec4): number{\r\n        return Vec4.dot(this, rhs);\r\n    }\r\n\r\n}\r\n","\r\nimport { Vec2 } from './vec2';\r\nimport { Vec3, IVec3 } from './vec3';\r\n\r\n\r\nexport interface IMat3 {\r\n    [key: number]: number;\r\n}\r\n\r\nexport class Mat3 implements IMat3 {\r\n\r\n    [key: number]: number;\r\n    [Symbol.iterator]() {\r\n        let step = 0;\r\n        return { next: () => ({ value: this[step++], done: step > 9 }) }\r\n    }\r\n\r\n    get right(): Vec2 { return new Vec2(this[0], this[1]); }\r\n    get up(): Vec2 { return new Vec2(this[4], this[5]); }\r\n    get pos(): Vec2 { return new Vec2(this[6], this[7]); }\r\n\r\n    static row(mat: IMat3, i: number): Vec3 {\r\n        const ri = (i * 3);\r\n        return new Vec3( mat[ri+0], mat[ri+1], mat[ri+2] );\r\n    }\r\n\r\n    static col(mat: IMat3, i: number): Vec3 {\r\n        return new Vec3(mat[i+0], mat[i+3], mat[i+6]);\r\n    }\r\n\r\n    constructor(mat3: IMat3) {\r\n        for(let i=0; i<9; i++)\r\n            this[i] = mat3[i];\r\n\r\n        this.mul = this.mul.bind(this);\r\n    }\r\n\r\n    static translation(x: number, y: number): Mat3 {\r\n        return new Mat3([\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            x, y, 1\r\n        ])\r\n    }\r\n\r\n    static rotation(rot: number): Mat3 {\r\n        const s = Math.sin(rot);\r\n        const c = Math.cos(rot);\r\n        return new Mat3([\r\n            c, s, 0,\r\n           -s, c, 0,\r\n            0, 0, 1\r\n        ]);\r\n    }\r\n\r\n    static scale(xs: number, ys: number): Mat3 {\r\n        const result = new Mat3([\r\n            xs, 0,  0,\r\n            0,  ys, 0,\r\n            0,  0,  1\r\n        ]);\r\n        return result;\r\n    }\r\n\r\n    static mul(lhs: IMat3, rhs: IMat3) {\r\n\r\n        return new Mat3([\r\n            lhs[0]*rhs[0] + lhs[1]*rhs[3] + lhs[2]*rhs[6], // Vec3.dot(r1, c1),\r\n            lhs[0]*rhs[1] + lhs[1]*rhs[4] + lhs[2]*rhs[7], // Vec3.dot(r1, c2), \r\n            lhs[0]*rhs[2] + lhs[1]*rhs[5] + lhs[2]*rhs[8], // Vec3.dot(r1, c3),\r\n            lhs[3]*rhs[0] + lhs[4]*rhs[3] + lhs[5]*rhs[6], // Vec3.dot(r2, c1),\r\n            lhs[3]*rhs[1] + lhs[4]*rhs[4] + lhs[5]*rhs[7], // Vec3.dot(r2, c2), \r\n            lhs[3]*rhs[2] + lhs[4]*rhs[5] + lhs[5]*rhs[8], // Vec3.dot(r2, c3),\r\n            lhs[6]*rhs[0] + lhs[7]*rhs[3] + lhs[8]*rhs[6], // Vec3.dot(r3, c1),\r\n            lhs[6]*rhs[1] + lhs[7]*rhs[4] + lhs[8]*rhs[7], // Vec3.dot(r3, c2),\r\n            lhs[6]*rhs[2] + lhs[7]*rhs[5] + lhs[8]*rhs[8]  // Vec3.dot(r3, c3)\r\n        ]);\r\n\r\n        // const r1 = Mat3.row(lhs, 0);\r\n        // const r2 = Mat3.row(lhs, 1);\r\n        // const r3 = Mat3.row(lhs, 2);\r\n\r\n        // const c1 = Mat3.col(rhs, 0);\r\n        // const c2 = Mat3.col(rhs, 1);\r\n        // const c3 = Mat3.col(rhs, 2);\r\n\r\n        // return new Mat3([\r\n        //     Vec3.dot(r1, c1), Vec3.dot(r1,c2),  Vec3.dot(r1, c3),\r\n        //     Vec3.dot(r2, c1), Vec3.dot(r2,c2),  Vec3.dot(r2, c3),\r\n        //     Vec3.dot(r3, c1), Vec3.dot(r3,c2),  Vec3.dot(r3, c3)\r\n        // ]);\r\n    }\r\n\r\n    static transformPoint(mat: Mat3, point: IVec3): IVec3 {\r\n\r\n        return {\r\n            x: point.x*mat[0] + point.y*mat[3] + point.z*mat[6],\r\n            y: point.x*mat[1] + point.y*mat[4] + point.z*mat[7],\r\n            z: point.x*mat[2] + point.y*mat[5] + point.z*mat[8]\r\n        };\r\n\r\n        // const c1 = Mat3.col(mat, 0);\r\n        // const c2 = Mat3.col(mat, 1);\r\n        // const c3 = Mat3.col(mat, 2);\r\n        // return {\r\n        //     x: Vec3.dot(point, c1 ),\r\n        //     y: Vec3.dot(point, c2 ),\r\n        //     z: Vec3.dot(point, c3 )\r\n        // }\r\n    }\r\n\r\n    mul(rhs: Mat3): Mat3 {\r\n        const result = Mat3.mul(this, rhs);\r\n        return result;\r\n    }\r\n}\r\n","\r\nimport { Vec3 } from './vec3';\r\nimport { Vec4 } from './vec4';\r\n\r\n\r\nexport interface IMat4 {\r\n    [key: number]: number;\r\n}\r\n\r\nexport class Mat4 implements IMat4 {\r\n\r\n    /*\r\n        0,  1,  2,  3,\r\n        4,  5,  6,  7,\r\n        8,  9,  10, 11\r\n        12, 13, 14, 15\r\n    */\r\n\r\n    [key: number]: number;\r\n\r\n    [Symbol.iterator]() {\r\n        let step = 0;\r\n        return { next: () => ({ value: this[step++], done: step > 16 }) }\r\n    }\r\n\r\n    static Identity: Mat4 = new Mat4([\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    ]);\r\n\r\n    get right(): Vec3 { return new Vec3(this[0], this[1], this[2]); }\r\n    get up(): Vec3 { return new Vec3(this[4], this[5], this[6]); }\r\n    get forward(): Vec3 { return new Vec3(this[8], this[9], this[10]); }\r\n    get pos(): Vec3 { return new Vec3(this[12], this[13], this[14]); }\r\n    toArray() { return [...this] }\r\n\r\n    static row(mat: IMat4, i: number): Vec4 {\r\n        const ri = (i * 4);\r\n        return new Vec4( mat[ri+0], mat[ri+1], mat[ri+2], mat[ri+3] );\r\n    }\r\n\r\n    static col(mat: IMat4, i: number): Vec4 {\r\n        return new Vec4(mat[i+0], mat[i+4], mat[i+8], mat[i+12]);\r\n    }\r\n\r\n    constructor(mat: IMat4 = Mat4.Identity) {\r\n        for(let i=0; i<16; i++)\r\n            this[i] = mat[i];\r\n    }\r\n\r\n    static translation(x: number, y: number, z: number) {\r\n        return new Mat4([\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            x, y, z, 1\r\n        ]);\r\n    }\r\n\r\n    static scale(xs: number, ys: number, zs: number) {\r\n        return new Mat4([\r\n            xs, 0,  0, 0,\r\n            0,  ys, 0, 0,\r\n            0,  0,  zs, 0,\r\n            0, 0, 0, 1\r\n        ]);\r\n    }\r\n\r\n    static orthographicProjection(left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n\r\n        return new Mat4([\r\n            2.0 / (right - left), 0.0, 0.0, 0.0,\r\n            0.0, 2.0 / (top - bottom), 0.0, 0.0,\r\n            0.0, 0.0,-2.0 / (far - near), 0.0,\r\n\r\n            -( (right + left) / (right - left)), \r\n            -( (top + bottom) / (top - bottom)), \r\n            -( (far + near) / (far - near)), \r\n            1.0\r\n        ]);\r\n    }\r\n\r\n    static mul(lhs: IMat4, rhs: IMat4) {\r\n        const r1 = Mat4.row(lhs, 0);\r\n        const r2 = Mat4.row(lhs, 1);\r\n        const r3 = Mat4.row(lhs, 2);\r\n        const r4 = Mat4.row(lhs, 3);\r\n\r\n        const c1 = Mat4.col(rhs, 0);\r\n        const c2 = Mat4.col(rhs, 1);\r\n        const c3 = Mat4.col(rhs, 2);\r\n        const c4 = Mat4.col(rhs, 3);\r\n\r\n        return new Mat4([\r\n            Vec4.dot(r1, c1), Vec4.dot(r1,c2),  Vec4.dot(r1, c3), Vec4.dot(r1, c4),\r\n            Vec4.dot(r2, c1), Vec4.dot(r2,c2),  Vec4.dot(r2, c3), Vec4.dot(r2, c4),\r\n            Vec4.dot(r3, c1), Vec4.dot(r3,c2),  Vec4.dot(r3, c3), Vec4.dot(r3, c4),\r\n            Vec4.dot(r4, c1), Vec4.dot(r4,c2),  Vec4.dot(r4, c3), Vec4.dot(r4, c4)\r\n        ]);\r\n    }\r\n\r\n}","import { Vec2, IVec2 } from \"./vec2\";\r\n\r\nexport class Rect {\r\n    pos: Vec2;\r\n    size: Vec2;\r\n\r\n    get left() { return this.pos.x; }\r\n    get right() { return this.pos.x + this.size.x; }\r\n    get top() { return this.pos.y; }\r\n    get bottom() { return this.pos.y + this.size.y; }\r\n\r\n    get min() { return new Vec2(this.pos.x, this.pos.y); }\r\n    get max() { return Vec2.add(this.pos, this.size); }\r\n\r\n    get topLeft(): IVec2       { return {x: this.pos.x, y: this.pos.y } }\r\n    get topRight(): IVec2      { return {x: this.pos.x + this.size.x, y: this.pos.y} }\r\n    get bottomRight(): IVec2   { return {x: this.pos.x + this.size.x, y: this.pos.y + this.size.y} }\r\n    get bottomLeft(): IVec2    { return {x: this.pos.x, y: this.pos.y + this.size.y} }\r\n\r\n    constructor(x: number, y: number, w: number, h: number) {\r\n        this.pos = new Vec2(x, y);\r\n        this.size = new Vec2(w, h);\r\n    }\r\n\r\n    contains(point: IVec2): boolean {\r\n        return point.x >= this.left && point.x < this.right &&\r\n            point.y >= this.top && point.y < this.bottom;\r\n    }\r\n}","import { Vec2, IVec2, Shape } from \".\";\r\n\r\n\r\nexport interface RayHit {\r\n    incomingRay: Ray;\r\n    reflectedRay: Ray;\r\n    point: IVec2;\r\n    normal: IVec2;\r\n    distance: number;\r\n    target: Shape;\r\n}\r\n\r\nexport class Ray {\r\n    pos: Vec2 = new Vec2();\r\n    dir: Vec2 = new Vec2();\r\n    hit: RayHit = null;\r\n\r\n    constructor(pos: IVec2, dir: IVec2) {\r\n        this.pos.x = pos.x;\r\n        this.pos.y = pos.y;\r\n        this.dir.x = dir.x;\r\n        this.dir.y = dir.y;\r\n    }\r\n\r\n    castToLine(x1: number, y1: number, x2: number, y2: number, createReflected: boolean = false): boolean {\r\n\r\n        // Line Intersection formula\r\n        // https://en.wikipedia.org/wiki/Line-line_intersection\r\n\r\n        this.hit = null;\r\n\r\n        const x3 = this.pos.x;\r\n        const y3 = this.pos.y;\r\n        const x4 = this.pos.x + this.dir.x;\r\n        const y4 = this.pos.y + this.dir.y;\r\n\r\n        const den = (x1-x2) * (y3-y4) - (y1 - y2) * (x3 - x4);\r\n        if(den === 0)\r\n            return false;\r\n\r\n        const t = ((x1-x3) * (y3-y4) - (y1 - y3) * (x3-x4)) / den;\r\n        const u = -((x1-x2) * (y1-y3) - (y1 - y2) * (x1-x3)) / den\r\n\r\n        // this means the lines are not intersecting, so return\r\n        if(!(t >= 0 && t <= 1 && u >= 0)) {\r\n            return false;\r\n        }\r\n\r\n        const point = new Vec2( x1 + t * (x2 - x1), y1 + t * (y2 - y1));\r\n        const normal = Vec2.perpendicular( Vec2.normalise(Vec2.sub(new Vec2(x1, y1), new Vec2(x2, y2))) );\r\n        if( normal.dot(this.dir) < 0 ) {\r\n            normal.x = -normal.x;\r\n            normal.y = -normal.y;\r\n        }\r\n            \r\n        // calculate a new ray, that contains the point of intersection\r\n        // and a reflected direction\r\n\r\n        let reflectRay = null; \r\n        if(createReflected) {\r\n            reflectRay = new Ray(Vec2.sub(point, this.dir), Vec2.reflect(this.dir, normal));\r\n        }\r\n\r\n        const hit: RayHit = {\r\n            point: point,\r\n            normal: normal,\r\n            distance: Vec2.distance(this.pos, point),\r\n            incomingRay: this,\r\n            reflectedRay: reflectRay,\r\n            target: null\r\n        };\r\n        \r\n        this.hit = hit;\r\n        return true;\r\n    }\r\n\r\n    castToShapes(shapes: Shape[], numReflections: number = 0): boolean {\r\n        let bestHit: RayHit = null;\r\n        this.hit = null;\r\n\r\n        for(const shape of shapes) {\r\n            for(let i=0; i<shape.points.length-1; i++) {\r\n                const p1 = shape.points[i];\r\n                const p2 = shape.points[i+1];\r\n    \r\n                if( this.castToLine(p1.x, p1.y, p2.x, p2.y,  numReflections >= 1) ) {\r\n                    if((this.hit.distance < bestHit?.distance) || bestHit == null) {\r\n                        bestHit = this.hit;\r\n                        bestHit.target = shape;\r\n                    }\r\n                        \r\n                }\r\n            }\r\n        }\r\n\r\n        this.hit = bestHit;\r\n        if(numReflections > 0 && this.hit)\r\n            this.hit.reflectedRay.castToShapes(shapes, numReflections -1);\r\n        \r\n        return this.hit !== null;\r\n    }\r\n\r\n    rays(): Ray[] {\r\n        const rays: Ray[] = [];\r\n        this.recursiveGetRays(rays);\r\n        return rays;\r\n    }\r\n\r\n    hits(): RayHit[] {\r\n        const hits: RayHit[] = [];\r\n        this.recursiveGetHits(hits);\r\n        return hits;\r\n    }\r\n\r\n    private recursiveGetHits(outHits: RayHit[]) {        \r\n        if(this.hit == null)\r\n            return;\r\n\r\n        outHits.push(this.hit);\r\n        this.hit.reflectedRay?.recursiveGetHits(outHits);\r\n    }\r\n\r\n    private recursiveGetRays(outRays: Ray[]) {\r\n        outRays.push(this);\r\n        this.hit?.reflectedRay?.recursiveGetRays(outRays);\r\n    }\r\n}","import { IVec2 } from \".\";\r\n\r\n\r\nexport class Shape {\r\n\r\n    constructor(public points: IVec2[] = []) {\r\n    }\r\n\r\n    static makeCircle(xPos: number, yPos: number, radius: number, segments: number) {\r\n        const points: IVec2[] = [];\r\n        for(let i=0; i<=segments;  i++) {\r\n\r\n            const r = ((2.0 * Math.PI) / segments) * i;\r\n            const x =  Math.sin(r) * radius;\r\n            const y = -Math.cos(r) * radius;\r\n\r\n            points.push({x: xPos + x, y: yPos + y});\r\n        }\r\n\r\n        return new Shape(points);\r\n    }\r\n\r\n    static makeLine(x1: number, y1: number, x2: number, y2: number) {\r\n        const points: IVec2[] = [\r\n            {x: x1, y: y1}, {x: x2, y: y2}\r\n        ];\r\n\r\n        return new Shape(points);\r\n    }\r\n\r\n    static makeBox(x: number, y: number, width: number, height: number) {\r\n        const points: IVec2[] = [\r\n            {x: x, y: y}, \r\n            {x: x+width, y: y},\r\n            {x: x+width, y: y+height},\r\n            {x: x, y: y+height},\r\n            {x: x, y: y}, \r\n        ];\r\n        return new Shape(points);\r\n    }\r\n}","\r\nexport * from './vec2';\r\nexport * from './vec3';\r\nexport * from './vec4';\r\nexport * from './mat3';\r\nexport * from './mat4';\r\nexport * from './rect';\r\nexport * from './ray';\r\nexport * from './shape';","\r\nimport { Vec2 } from '../math';\r\n\r\n\r\nexport class MouseInput {\r\n    \r\n    pos: Vec2 = new Vec2();\r\n    dt: Vec2 = new Vec2();\r\n    leftButtonDown: boolean = false;\r\n\r\n    constructor(private canvas: HTMLCanvasElement) {\r\n        this.canvas.addEventListener(\"mousedown\", this.mouseDownEventHandler);\r\n        this.canvas.addEventListener(\"mousemove\", this.mouseMoveEventHandler);\r\n        this.canvas.addEventListener(\"mouseup\", this.mouseUpEventHandler);\r\n    }\r\n\r\n    destroy() {\r\n        this.canvas.removeEventListener(\"mousedown\", this.mouseDownEventHandler);\r\n        this.canvas.removeEventListener(\"mousemove\", this.mouseMoveEventHandler);\r\n        this.canvas.removeEventListener(\"mouseup\", this.mouseUpEventHandler);\r\n    }\r\n\r\n    update() {\r\n        this.dt = new Vec2();\r\n    }\r\n\r\n    private mouseDownEventHandler = (e: MouseEvent) => {\r\n        this.leftButtonDown = true;\r\n    }\r\n\r\n    private mouseMoveEventHandler = (e: MouseEvent) => {\r\n\r\n        const area = this.canvas.getBoundingClientRect();\r\n\r\n        const lastPos = this.pos;\r\n        this.pos = new Vec2(e.pageX - area.x, e.pageY - area.y);\r\n        this.dt = Vec2.sub(this.pos, lastPos);\r\n    }\r\n    private mouseUpEventHandler = () => {\r\n        this.leftButtonDown = false;\r\n    }\r\n}","\r\n\r\nexport class KeyboardInput {\r\n    \r\n    lastKeyState: {[key: number]: boolean} = {};\r\n    keyState: {[key: number]: boolean} = {};\r\n\r\n    constructor(private canvas: HTMLCanvasElement) {\r\n        console.log('creating keyboard input');\r\n        document.addEventListener(\"keydown\", this.keyDownEventHandler);\r\n        document.addEventListener(\"keyup\", this.keyUpEventHandler);\r\n        \r\n        // this.canvas.onkeydown = this.keyDownEventHandler;\r\n        // this.canvas.onkeydown = this.keyUpEventHandler;\r\n\r\n        //this.canvas.addEventListener(\"keydown\", this.keyDownEventHandler);\r\n        //this.canvas.addEventListener(\"keyup\", this.keyUpEventHandler);\r\n    }\r\n\r\n    destroy() {\r\n        document.removeEventListener(\"keydown\", this.keyDownEventHandler);\r\n        document.removeEventListener(\"keyup\", this.keyUpEventHandler);\r\n    }\r\n\r\n    isKeyDown(key: number): boolean {\r\n        return this.keyState[key] || false;\r\n    }\r\n\r\n    wasKeyPressed(key: number): boolean {\r\n        return (this.keyState[key] && !this.lastKeyState[key]) || false;\r\n    }\r\n\r\n    wasKeyReleased(key: number): boolean {\r\n        return (this.keyState[key] && !this.lastKeyState[key]) || false;\r\n    }\r\n\r\n    update() {\r\n        this.lastKeyState = {...this.keyState};\r\n    }\r\n\r\n    private keyDownEventHandler = (e: KeyboardEvent) => {\r\n        \r\n        console.log(e.key + ' : ' + e.keyCode);\r\n        this.keyState[e.keyCode] = true;\r\n    }\r\n\r\n    private keyUpEventHandler = (e: KeyboardEvent) => {\r\n        this.keyState[e.keyCode] = false;\r\n    }\r\n\r\n}","import { MouseInput } from './mouseInput';\r\nimport { KeyboardInput } from './keyboardInput';\r\n\r\nexport class InputManager {\r\n\r\n    mouse: MouseInput;\r\n    keyboard: KeyboardInput;\r\n\r\n\r\n    constructor(canvas: HTMLCanvasElement) {\r\n        this.mouse = new MouseInput(canvas);\r\n        this.keyboard = new KeyboardInput(canvas);\r\n    }\r\n\r\n    destroy() {\r\n        this.mouse.destroy();\r\n        this.keyboard.destroy();\r\n        \r\n        this.keyboard = null;\r\n        this.mouse = null;\r\n    }\r\n}","\r\nexport interface ITexture2d {\r\n    \r\n    handle: WebGLTexture;\r\n    width: number;\r\n    height: number;\r\n\r\n}\r\n\r\nexport class Texture2D implements ITexture2d {\r\n\r\n    image: HTMLImageElement;\r\n    handle: WebGLTexture;\r\n\r\n    get width() {\r\n        return this.image.width;\r\n    }\r\n\r\n    get height() {\r\n        return this.image.height;\r\n    }\r\n\r\n    constructor(private gl: WebGL2RenderingContext) {\r\n        this.image = new Image();\r\n    }\r\n\r\n    destroy() {\r\n        this.gl.deleteTexture(this.handle);\r\n        this.handle = null;\r\n    }\r\n\r\n    load(location: string): Promise<Texture2D> {\r\n        return new Promise<Texture2D>((resolve, reject) => {\r\n            this.image.crossOrigin = 'anonymous';\r\n            this.image.src = location;\r\n            this.image.addEventListener('load', () => {\r\n\r\n                this.handle = this.gl.createTexture();\r\n                this.gl.bindTexture(this.gl.TEXTURE_2D, this.handle);\r\n\r\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\r\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\r\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.REPEAT);\r\n                this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.REPEAT);\r\n\r\n                this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.width, this.height, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.image);\r\n\r\n                this.gl.bindTexture(this.gl.TEXTURE_2D, this.handle);\r\n\r\n                resolve(this);\r\n            });\r\n        });\r\n    }\r\n\r\n}","\r\n\r\nexport abstract class Shader \r\n{\r\n    infoLog: string[] = [];\r\n    program: WebGLProgram = null;\r\n    attributes: {[key: string]: number} = {};\r\n\r\n    constructor(protected gl: WebGL2RenderingContext) {\r\n    }\r\n\r\n    destroy() {\r\n        this.gl.deleteProgram(this.program);\r\n    }\r\n\r\n    enable() {\r\n        this.gl.useProgram(this.program);\r\n    }\r\n\r\n    disable() {\r\n        this.gl.useProgram(this.program);\r\n    }\r\n\r\n    bindTexture2d(textureHandle: WebGLTexture, uniformLoc: WebGLUniformLocation, textureChanelIndex: number) {\r\n        this.gl.uniform1i(uniformLoc, textureChanelIndex);\r\n        this.gl.activeTexture( this.gl.TEXTURE0 + textureChanelIndex);\r\n        this.gl.bindTexture(this.gl.TEXTURE_2D, textureHandle);\r\n        this.gl.activeTexture( this.gl.TEXTURE0 );\r\n    }\r\n\r\n    protected createShader(source: string, type: number): WebGLShader {\r\n        const shader = this.gl.createShader(type);\r\n        this.gl.shaderSource(shader, source);\r\n        this.gl.compileShader(shader);\r\n\r\n        const log = this.gl.getShaderInfoLog(shader);\r\n        this.infoLog.push('[ VERT ] ' + log);\r\n\r\n        return shader;\r\n    }\r\n\r\n    protected createProgram(vertexShader: WebGLShader, fragmentShader: WebGLShader, inputs: string[], deleteShaders: boolean = true): WebGLProgram {\r\n        const program = this.gl.createProgram();\r\n        this.gl.attachShader(program, vertexShader);\r\n        this.gl.attachShader(program, fragmentShader);\r\n        \r\n        for(let i = 0; i < inputs.length; i++) {\r\n            this.attributes[inputs[i]] = i;\r\n            this.gl.bindAttribLocation(program, i, inputs[i]);\r\n        }\r\n\r\n        this.gl.linkProgram(program);\r\n        this.gl.validateProgram(program);\r\n        \r\n        const log = this.gl.getProgramInfoLog(program);\r\n        this.infoLog.push('[ FRAG ] ' + log);        \r\n        \r\n        if(deleteShaders) {\r\n            this.gl.deleteShader(vertexShader);\r\n            this.gl.deleteShader(fragmentShader);\r\n        }\r\n\r\n        return program;\r\n    }\r\n\r\n}","\r\nimport { Vec2, IVec2, IVec3, Vec4, IVec4, Mat4, Rect } from '../math';\r\nimport { ITexture2d, Texture2D } from './texture';\r\nimport { Shader } from './shader';\r\nimport { Mat3 } from '../math/mat3';\r\n\r\nexport enum RenderMode {\r\n    FILL,\r\n    WIREFRAME,\r\n}\r\n\r\nconst vertex_shader = `\r\n    precision mediump float;\r\n\r\n    attribute vec3 a_position;\r\n    attribute vec4 a_color;\r\n    attribute vec2 a_uv;\r\n\r\n    uniform mat4 u_projection;\r\n\r\n    varying vec2 v_uv;\r\n    varying vec4 v_color;\r\n    varying float v_uvId;\r\n\r\n    void main() \r\n    {\r\n        v_uvId = a_position.z;\r\n        v_color = a_color;\r\n        v_uv = a_uv;\r\n        gl_Position = vec4(a_position.x, a_position.y, 0.0, 1.0) * u_projection;\r\n    }\r\n`;\r\n\r\nconst fragment_shader = `\r\n    precision mediump float;\r\n\r\n    varying vec2 v_uv;\r\n    varying vec4 v_color;\r\n    varying float v_uvId;\r\n\r\n    uniform sampler2D u_texture0;\r\n    uniform sampler2D u_texture1;\r\n    uniform sampler2D u_texture2;\r\n    uniform sampler2D u_texture3;\r\n    uniform sampler2D u_texture4;\r\n\r\n    void main() \r\n    {\r\n        if      ( v_uvId == 0.0 ) gl_FragColor = texture2D(u_texture0, v_uv.st) * v_color;\r\n        else if ( v_uvId == 1.0 ) gl_FragColor = texture2D(u_texture1, v_uv.st) * v_color;\r\n        else if ( v_uvId == 2.0 ) gl_FragColor = texture2D(u_texture2, v_uv.st) * v_color;\r\n        else if ( v_uvId == 3.0 ) gl_FragColor = texture2D(u_texture3, v_uv.st) * v_color;\r\n        else if ( v_uvId == 4.0 ) gl_FragColor = texture2D(u_texture4, v_uv.st) * v_color;\r\n        else gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n`;\r\n\r\nclass Renderer2DSpriteShader extends Shader {\r\n    constructor(gl: WebGL2RenderingContext) {\r\n        super(gl);\r\n\r\n        this.program = this.createProgram(\r\n            this.createShader(vertex_shader, this.gl.VERTEX_SHADER),\r\n            this.createShader(fragment_shader, this.gl.FRAGMENT_SHADER),\r\n            ['a_position', 'a_color', 'a_uv'], true\r\n        );\r\n    }\r\n\r\n    setTexture(textureHandle: WebGLTexture, index: number) {\r\n        const textureLoc = this.gl.getUniformLocation(this.program, `u_texture${index}`);\r\n        this.bindTexture2d(textureHandle, textureLoc, index);\r\n    }\r\n\r\n    setProjection(projection: Mat4) {\r\n        const uniformProjectionLoc = this.gl.getUniformLocation(this.program, \"u_projection\");\r\n        const arr = projection.toArray();\r\n\r\n        this.gl.uniformMatrix4fv(uniformProjectionLoc, true, arr );\r\n    }\r\n}\r\n\r\nclass GlMeshBuffer {\r\n\r\n    vao: WebGLVertexArrayObject;\r\n    vbo: WebGLBuffer;\r\n    ibo: WebGLBuffer;\r\n\r\n    vSizeBytes: number;\r\n    iSizeBytes: number;\r\n\r\n    constructor(protected gl: WebGL2RenderingContext, vSizeBytes: number, iSizeBytes: number) {\r\n        this.vSizeBytes = vSizeBytes;\r\n        this.iSizeBytes = iSizeBytes;\r\n\r\n        this.vao = this.gl.createVertexArray();\r\n        this.vbo = this.gl.createBuffer();\r\n        this.ibo = this.gl.createBuffer();\r\n    }\r\n\r\n    destroy() {\r\n        this.gl.deleteBuffer(this.ibo);\r\n        this.gl.deleteBuffer(this.vbo);\r\n        this.gl.deleteVertexArray(this.vao);\r\n    }\r\n\r\n    bind() {\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.ibo);\r\n    }\r\n\r\n    unbind() {\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\r\n        this.gl.bindVertexArray(null);        \r\n    }\r\n\r\n    setVertexBufferSize(vertexBufferLength: number) {\r\n        const vertexBufferSize = vertexBufferLength * this.vSizeBytes;\r\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexBufferSize, this.gl.DYNAMIC_DRAW);\r\n    }\r\n\r\n    setIndexBufferSize(indexBufferLength: number) {\r\n        const indexBufferSize = indexBufferLength * this.iSizeBytes;\r\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexBufferSize, this.gl.DYNAMIC_DRAW);\r\n    }\r\n\r\n    setVertexBufferData(verts: ArrayBufferView, numVerts: number, floatsPerVert: number) {\r\n        //this.gl.bufferSubData(this.gl.ARRAY_BUFFER, 0, verts, 0, numVerts * floatsPerVert);\r\n        this.gl.bufferSubData(this.gl.ARRAY_BUFFER, 0, verts, 0);       \r\n    }\r\n\r\n    setIndexBufferData(indices: ArrayBufferView, num: number) {\r\n        // this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER, 0, indices, 0, num); //,  num * this.iSizeBytes);\r\n        this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER, 0, indices, 0); \r\n    }\r\n\r\n    draw(numIndices: number, renderMode: number = this.gl.TRIANGLES) {\r\n        this.gl.drawElements(renderMode, numIndices, this.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n}\r\n\r\nclass SpriteBuffer\r\n{\r\n    // 512 sprites, 4 verts per quad, 9 floats per vert\r\n    verts: Float32Array = new Float32Array(128 * 4 * 9);\r\n\r\n    // 512 sprites, 6 indices per quad (3 per triangle)\r\n    indices: Uint16Array = new Uint16Array(128 * 6);\r\n\r\n    buffer: GlMeshBuffer;\r\n\r\n    size = Float32Array.BYTES_PER_ELEMENT * 9;\r\n\r\n    private currentVert: number = 0;\r\n    private currentFace: number = 0;\r\n\r\n    get currentVertIndex(): number { return this.currentVert * 9; }\r\n    get currentIndicyIndex(): number { return this.currentFace * 3; }\r\n\r\n    constructor(protected gl: WebGL2RenderingContext) {\r\n        this.buffer = new GlMeshBuffer(this.gl, Float32Array.BYTES_PER_ELEMENT * 9, Uint16Array.BYTES_PER_ELEMENT);\r\n\r\n        this.buffer.bind();\r\n        this.buffer.setIndexBufferSize(this.indices.length);\r\n        this.buffer.setVertexBufferSize(this.verts.length);\r\n\r\n        // tell opengl the structure of our vertex\r\n        this.gl.enableVertexAttribArray(0);\r\n        this.gl.enableVertexAttribArray(1);\r\n        this.gl.enableVertexAttribArray(2);\r\n        \r\n        const vSize = this.size;\r\n        const fSize = Float32Array.BYTES_PER_ELEMENT;\r\n        \r\n        this.gl.vertexAttribPointer(0, 3, this.gl.FLOAT, false, vSize, fSize * 0); // position\r\n        this.gl.vertexAttribPointer(1, 4, this.gl.FLOAT, false, vSize, fSize * 3); // color\r\n        this.gl.vertexAttribPointer(2, 2, this.gl.FLOAT, false, vSize, fSize * 7); // uv\r\n\r\n        this.buffer.unbind();\r\n    }\r\n\r\n    destroy() {\r\n        this.buffer.destroy();\r\n        this.buffer = null;\r\n    }\r\n\r\n    draw(renderMode: number = this.gl.TRIANGLES) {\r\n        this.buffer.bind();\r\n        this.buffer.setVertexBufferData(this.verts, this.currentVert, 9);\r\n        this.buffer.setIndexBufferData(this.indices, this.currentIndicyIndex);\r\n        this.buffer.draw(this.currentIndicyIndex, renderMode);\r\n        this.buffer.unbind();\r\n    }\r\n\r\n    getPos(index: number): IVec3 {\r\n        const i = index * this.size;\r\n        const data = this.verts;\r\n        return {x: data[i+0], y: data[i+1], z: data[i+2] };\r\n    }\r\n\r\n    getColor(index: number): IVec4 {\r\n        const i = index * this.size;\r\n        const data = this.verts;\r\n        return {x: data[i+3], y: data[i+4], z: data[i+5], w: data[i+6] };\r\n    }\r\n\r\n    getUV(index: number): IVec2 {\r\n        const i = index * this.size;\r\n        const data = this.verts;\r\n        return {x: data[i+7], y: data[i+8] };\r\n    }\r\n\r\n    setPos(value: IVec3) {\r\n        const i = this.currentVertIndex;\r\n        const data = this.verts;\r\n        data[i+0] = value.x;\r\n        data[i+1] = value.y;\r\n        data[i+2] = value.z;\r\n        return this;\r\n    }\r\n\r\n    setColor(value: IVec4) {\r\n        const i = this.currentVertIndex;\r\n        const data = this.verts;\r\n        data[i+3] = value.x;\r\n        data[i+4] = value.y;\r\n        data[i+5] = value.z;\r\n        data[i+6] = value.w;\r\n        return this;\r\n    }\r\n\r\n    setUV(value: IVec2) {\r\n        const i = this.currentVertIndex;\r\n        const data = this.verts;\r\n        data[i+7] = value.x;\r\n        data[i+8] = value.y;\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.currentVert = 0;\r\n        this.currentFace = 0;\r\n    }\r\n\r\n    saveVert() {\r\n        return this.currentVert++;\r\n    }\r\n\r\n    saveFace(i0: number, i1: number, i2: number) {\r\n        this.indices[this.currentIndicyIndex+0] = i0;\r\n        this.indices[this.currentIndicyIndex+1] = i1;\r\n        this.indices[this.currentIndicyIndex+2] = i2;\r\n        this.currentFace += 1;\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\ninterface IRenderState2D {\r\n    color: IVec4[];\r\n    uvRect?: Rect;\r\n    texture?: Texture2D,\r\n    lineThickness?: number,\r\n    renderMode?: RenderMode,\r\n}\r\n\r\nexport class Renderer2d {\r\n\r\n    private projection: Mat4 = new Mat4();\r\n\r\n    private spriteBuffer: SpriteBuffer;\r\n    private shader: Renderer2DSpriteShader;\r\n\r\n    private maxTextures: number = 5;\r\n    private activeTextures: ITexture2d[] = [null, null, null, null, null];\r\n    private currentTextureId: number = 0;\r\n\r\n    private processingRender: boolean = false;\r\n\r\n    private blankTexture: Texture2D;\r\n\r\n    private renderState: IRenderState2D[] = [];\r\n    private numFlushes: number = 0;\r\n    \r\n    constructor(private canvas: HTMLCanvasElement, private gl: WebGL2RenderingContext) {\r\n\r\n        // so that we can use a single shader for our 2d rendering\r\n        // things that do not have a texture, will be textured with this blank\r\n        // 1x1 white pixel image\r\n        this.blankTexture = new Texture2D(this.gl);\r\n        this.blankTexture.load(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\");\r\n\r\n        this.saveState(true);\r\n\r\n        // setup 2d projection matrix\r\n        this.projection = Mat4.orthographicProjection(0, this.canvas.width, this.canvas.height, 0, 0, 100);\r\n        \r\n        // load shader\r\n        this.shader = new Renderer2DSpriteShader(this.gl);\r\n\r\n        // setup sprite graphics buffers\r\n        this.spriteBuffer = new SpriteBuffer(this.gl);\r\n    }\r\n\r\n    destroy() {\r\n        this.spriteBuffer.destroy();\r\n        this.shader.destroy();\r\n    }\r\n\r\n    begin() {\r\n        this.processingRender = true;\r\n        this.spriteBuffer.clear();\r\n        this.currentTextureId = 0;\r\n\r\n        this.gl.enable(this.gl.BLEND);\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n        this.gl.blendFuncSeparate(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA, this.gl.ONE, this.gl.ONE);\r\n        \r\n        this.shader.enable();\r\n        this.shader.setProjection(this.projection);\r\n    }\r\n\r\n    end() {\r\n        this.flushBatch();\r\n        this.processingRender = false;\r\n\r\n        // reset the renderstate so its fresh\r\n        this.renderState = [];\r\n        this.saveState(true);\r\n\r\n        console.log(`Flushes: ${this.numFlushes}`);\r\n        this.numFlushes = 0;\r\n    }\r\n\r\n    darwRect(xPos: number, yPos: number, width: number, height: number, rot: number, xOrigin: number, yOrigin: number) {\r\n        \r\n        if(this.shouldFlush())\r\n            this.flushBatch();\r\n\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        const textureId = this.useTexture(state.texture ?? this.blankTexture);\r\n        const color = state.color ?? [Vec4.ONE, Vec4.ONE, Vec4.ONE, Vec4.ONE];\r\n        const uvRect = state.uvRect ?? new Rect(0, 0, 1, 1);\r\n\r\n        const transform = Mat3.scale(width, height).mul(Mat3.rotation(rot)).mul(Mat3.translation(xPos, yPos));\r\n\r\n        // calculate the position for each of the quads\r\n        const tl: IVec3 = Mat3.transformPoint(transform, { x: (0 - xOrigin), y: (0 - yOrigin), z: 1 } );\r\n        const tr: IVec3 = Mat3.transformPoint(transform, { x: (1 - xOrigin), y: (0 - yOrigin), z: 1 } );\r\n        const br: IVec3 = Mat3.transformPoint(transform, { x: (1 - xOrigin), y: (1 - yOrigin), z: 1 } );\r\n        const bl: IVec3 = Mat3.transformPoint(transform, { x: (0 - xOrigin), y: (1 - yOrigin), z: 1 } );\r\n\r\n        // kinda hacky, for our shader, we are storing which texture we should use in the 'z' coordinate\r\n        // as 'z' is not used for 2d rendering\r\n        tl.z = textureId; tr.z = textureId; br.z = textureId; bl.z = textureId;\r\n\r\n        // build our verts\r\n        const i0 = this.spriteBuffer.setPos(tl).setColor(color[0]).setUV(uvRect.topLeft).saveVert();\r\n        const i1 = this.spriteBuffer.setPos(tr).setColor(color[1]).setUV(uvRect.topRight).saveVert();\r\n        const i2 = this.spriteBuffer.setPos(br).setColor(color[2]).setUV(uvRect.bottomRight).saveVert();\r\n        const i3 = this.spriteBuffer.setPos(bl).setColor(color[3]).setUV(uvRect.bottomLeft).saveVert();\r\n\r\n        // save the face\r\n        this.spriteBuffer.saveFace(i0, i1, i2).saveFace(i0, i2, i3);\r\n    }\r\n\r\n    drawLine(x1: number, y1: number, x2: number, y2: number, thickness: number, vertColors?: IVec4[]) {\r\n        this.drawLines([new Vec2(x1, y1), new Vec2(x2, y2)], thickness, vertColors);\r\n    }\r\n\r\n    drawLines(points: IVec2[], width: number, vertColors?: IVec4[]) {\r\n\r\n        if(this.shouldFlush())\r\n            this.flushBatch();\r\n\r\n        vertColors = vertColors ?? [];\r\n\r\n        this.saveState();\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        const textureId = this.useTexture(this.blankTexture);\r\n        const color = state.color[0] ?? Vec4.ONE;\r\n\r\n        const indices = [];\r\n\r\n        let iDir = Vec2.ZERO; \r\n        for(let i=0; i<points.length; i++) {\r\n\r\n            const p0 = points[i];\r\n            const p1 = points[i+1] ?? Vec2.add(p0, iDir);\r\n\r\n            const oDir = Vec2.sub(p1 ?? p0, p0).normalise();\r\n\r\n            const tangent = Vec2.add(iDir, oDir).normalise();\r\n            const mighter = Vec2.perpendicular(tangent);\r\n            const distance = width / mighter.dot(Vec2.perpendicular(oDir)) * 0.5;\r\n            const p = Vec2.mul(mighter, {x: distance, y: distance});\r\n\r\n            const col = vertColors[i] ?? color;\r\n\r\n            const i0 = this.spriteBuffer.setPos({x: p0.x + p.x, y: p0.y + p.y, z: textureId}).setColor(col).setUV({x: 0, y: 0}).saveVert();\r\n            const i1 = this.spriteBuffer.setPos({x: p0.x - p.x, y: p0.y - p.y, z: textureId}).setColor(col).setUV({x: 0, y: 0}).saveVert();\r\n            indices.push(i0);\r\n            indices.push(i1);\r\n\r\n            iDir = oDir;\r\n        }\r\n\r\n        for(let i=0; i<indices.length-2; i += 2) {\r\n            const index = indices[i];\r\n            this.spriteBuffer.saveFace(index, index+1, index+2);\r\n            this.spriteBuffer.saveFace(index+1, index+2, index+3);\r\n        }\r\n\r\n        this.popState();\r\n\r\n    }\r\n\r\n    drawCircle(xPos: number, yPos: number, radius: number, segments: number) {\r\n        if(this.shouldFlush())\r\n            this.flushBatch();\r\n\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        const textureId = this.useTexture(state.texture ?? this.blankTexture);\r\n        const color = state.color[0] ?? Vec4.ONE;\r\n        const uvRect = state.uvRect ?? new Rect(0, 0, 1, 1);\r\n\r\n        const i0 = this.spriteBuffer\r\n            .setPos({x: xPos, y: yPos, z: textureId})\r\n            .setColor(color)\r\n            .setUV({x: (uvRect.right - uvRect.left) * 0.5, y: (uvRect.bottom - uvRect.top) * 0.5})\r\n            .saveVert();\r\n            \r\n        for(let i=0; i<=segments;  i++) {\r\n            const r = ((2.0 * Math.PI) / segments) * i;\r\n            const x =  Math.sin(r);\r\n            const y = -Math.cos(r);\r\n            //this.darwRect(x, y, 5, 5, r, 0.5, 0.5);\r\n            this.spriteBuffer\r\n                .setPos({x: x * radius + xPos, y: y * radius + yPos, z: textureId})\r\n                .setColor(color)\r\n                .setUV({x: x * 0.5 + 0.5, y: y * 0.5 + 0.5})\r\n                .saveVert();\r\n        }\r\n\r\n        for(let i=0; i<=segments; i++) {\r\n           this.spriteBuffer.saveFace(i0, i0+i, i0+i+1);\r\n        }\r\n    }\r\n\r\n    setTexture(texture: Texture2D) {\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        state.texture = texture;\r\n    }\r\n\r\n    setColor(color: IVec4) {\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        state.color[0] = color;\r\n        state.color[1] = color;\r\n        state.color[2] = color;\r\n        state.color[3] = color;\r\n    }\r\n\r\n    setColorPoints(tlc: IVec4, trc: IVec4, brc: IVec4, blc: IVec4) {\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        state.color[0] = tlc;\r\n        state.color[1] = trc;\r\n        state.color[2] = brc;\r\n        state.color[3] = blc;\r\n    }\r\n\r\n    setUvRect(uvRect: Rect) {\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        state.uvRect = uvRect;\r\n    }\r\n\r\n    setRenderMode(renderMode: RenderMode) {\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        if(state.renderMode != renderMode) {\r\n            this.flushBatch();\r\n            state.renderMode = renderMode;\r\n        }\r\n    }\r\n\r\n    saveState(setDefaults: boolean = false) {\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        const defaults = !setDefaults ? state : {\r\n            color: [Vec4.ONE, Vec4.ONE, Vec4.ONE, Vec4.ONE],\r\n            uvRect: new Rect(0, 0, 1, 1),\r\n            texture: this.blankTexture,\r\n            renderMode: RenderMode.FILL\r\n        };\r\n\r\n        this.renderState.push({...this.renderState[this.renderState.length-1], \r\n            ...defaults\r\n        });\r\n    }\r\n\r\n    popState() {\r\n        if(this.renderState.length <= 1 )\r\n            return;\r\n\r\n        // do we need to re-render based on state change?\r\n        const state = this.renderState[this.renderState.length - 1];\r\n        const newState = this.renderState[this.renderState.length - 2];\r\n\r\n        let flush = false;\r\n        flush = flush || state.renderMode != newState.renderMode;\r\n\r\n        if(flush)\r\n            this.flushBatch();\r\n\r\n        this.renderState.pop();\r\n    }\r\n\r\n    private useTexture(texture: ITexture2d) {\r\n        // check if the texture is already in use\r\n        // if so, return... we dont need to add it to our list of textures again.\r\n        for(let i=0; i<=this.currentTextureId; i++){\r\n            if(this.activeTextures[i] == texture)\r\n                return i;\r\n        }\r\n\r\n        // if we've used all the textures we can, then we need to flush to make room for another texture change\r\n        if( this.currentTextureId >= this.maxTextures )\r\n            this.flushBatch();\r\n\r\n        // store the texture in our active textuers array\r\n        this.activeTextures[this.currentTextureId] = texture;\r\n        \r\n        // send the texture to opengl\r\n        this.shader.setTexture(texture.handle, this.currentTextureId);\r\n\r\n        // increment our currentTextureId for next use.\r\n        this.currentTextureId += 1;\r\n\r\n        // return what the current texture was.\r\n        return this.currentTextureId - 1;\r\n    }\r\n\r\n    private flushBatch() {\r\n        if(this.spriteBuffer.currentIndicyIndex === 0 || this.spriteBuffer.currentVertIndex === 0 || this.processingRender === false)\r\n            return;\r\n\r\n        let renderMode = this.gl.TRIANGLES;\r\n        switch( this.renderState[this.renderState.length-1].renderMode ){\r\n            case RenderMode.FILL: renderMode = this.gl.TRIANGLES; break;\r\n            case RenderMode.WIREFRAME: renderMode = this.gl.LINE_STRIP; break;\r\n        }\r\n\r\n        // render the sprite buffer and reset for next flush\r\n        this.spriteBuffer.draw(renderMode);\r\n        this.spriteBuffer.clear();\r\n\r\n        // clear our active textures as well\r\n        for(let i=0; i<this.maxTextures; i++)\r\n            this.activeTextures[i] = null;\r\n\r\n        this.currentTextureId = 0;\r\n        this.numFlushes += 1;\r\n    }\r\n\r\n    private shouldFlush(): boolean {\r\n        const result =  this.spriteBuffer.currentVertIndex >= this.spriteBuffer.verts.length-1 || \r\n                        this.spriteBuffer.currentVertIndex >= this.spriteBuffer.indices.length-1;\r\n        return result;\r\n    }\r\n}","\r\nexport class Timer {\r\n    deltaTime: number = 0;\r\n    startTime: number = 0;\r\n    stopTime: number = 0;\r\n\r\n    start() {\r\n        this.stopTime = 0;\r\n        this.startTime = performance.now() / 1000;\r\n    }\r\n    stop() {\r\n        this.stopTime = performance.now() / 1000;\r\n        this.deltaTime = this.stopTime - this.startTime;\r\n    }\r\n}","\r\nimport { Timer } from './timer';\r\n\r\nexport class FrameTimer extends Timer\r\n{\r\n    framesPerSecond: number = 0;\r\n    \r\n    private frameCounter: number = 0;\r\n    private runningTime: number = 0;\r\n\r\n    constructor() {\r\n        super();\r\n     }\r\n\r\n    update() {\r\n        this.stop();\r\n        this.runningTime += this.deltaTime;\r\n        this.frameCounter += 1;\r\n\r\n        if(this.runningTime >= 1) {\r\n            this.framesPerSecond = this.frameCounter;\r\n            this.runningTime = 0;\r\n            this.frameCounter = 0;\r\n        }\r\n\r\n        this.start();\r\n    }\r\n}\r\n","\r\nimport { InputManager } from './input/inputManager';\r\nimport { Renderer2d } from './graphics/renderer2d';\r\nimport { FrameTimer } from './utils/frameTimer';\r\n\r\nexport class App\r\n{\r\n    canvas: HTMLCanvasElement;\r\n    input: InputManager;\r\n    time: FrameTimer;\r\n    renderer2d: Renderer2d;\r\n\r\n    gl: WebGL2RenderingContext;\r\n\r\n    constructor(htmlCanvasId: string) {\r\n        this.canvas = document.getElementById(htmlCanvasId) as HTMLCanvasElement;\r\n        this.resize();\r\n        this.input = new InputManager(this.canvas);\r\n        this.time = new FrameTimer();\r\n\r\n        this.gl = this.canvas.getContext(\"webgl2\", {\r\n            antialias: true\r\n        });\r\n\r\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        this.renderer2d = new Renderer2d(this.canvas, this.gl);\r\n    }\r\n\r\n    destroy() {\r\n        this.input.destroy();\r\n        this.input = null;\r\n    }\r\n\r\n    async loadAssets() {\r\n        // derrived classes will implement load asset logic.\r\n    }\r\n\r\n    async launch() {\r\n        await this.loadAssets();\r\n        this.run();\r\n    }\r\n\r\n    update() {\r\n    }\r\n\r\n    draw() {\r\n        this.gl.clearColor(0.0, 0.0, 0.0, 0.0); // black\r\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT)\r\n    }\r\n\r\n    run() {\r\n        this.time.update();\r\n        this.update();\r\n        this.draw();\r\n\r\n        this.input.keyboard.update();\r\n        this.input.mouse.update();\r\n        \r\n        requestAnimationFrame(() => {\r\n             this.run();\r\n        });\r\n    }\r\n\r\n    private resize() {\r\n        // Lookup the size the browser is displaying the canvas.\r\n        var displayWidth  = this.canvas.clientWidth;\r\n        var displayHeight = this.canvas.clientHeight;\r\n    \r\n        // Check if the canvas is not the same size.\r\n        if (this.canvas.width  !== displayWidth ||\r\n            this.canvas.height !== displayHeight) {\r\n    \r\n          // Make the canvas the same size\r\n          this.canvas.width  = displayWidth;\r\n          this.canvas.height = displayHeight;\r\n        }\r\n      }\r\n}","import { Rect } from \"../../engine/math\";\r\n\r\nexport interface ILevelData {\r\n    tileSize: number;\r\n    rows: number;\r\n    cols: number;\r\n    layout: Array<Array<number>>;\r\n    lights: Array<Array<number>>;\r\n    fixed: Array<Array<number>>;\r\n    startTile: [number, number];\r\n    zones: Rect[];\r\n}\r\n\r\nexport const levels: ILevelData[] = [\r\n    {\r\n        tileSize: 55,\r\n        rows: 8,\r\n        cols: 8,\r\n        startTile: [4, 1],\r\n        layout:  [\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 1, 1, 1, 1, 0, 0],\r\n            [0, 0, 1, 1, 2, 4, 0, 0],\r\n            [0, 0, 1, 1, 1, 1, 0, 0],\r\n            [0, 0, 1, 1, 1, 1, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0]\r\n        ],\r\n        lights: [\r\n            [0, 0, 0, 0, 0, 41, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 1, 0, 0, 0, 0]\r\n        ],\r\n        fixed: [\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0],\r\n            [0, 0, 0, 0, 0, 0, 0, 0]\r\n        ],\r\n        zones: [\r\n            new Rect(2, 2, 4, 4)\r\n        ]\r\n    }\r\n]","import { App } from \"../../engine/app\";\r\nimport { Vec4, Vec2, Rect } from \"../../engine/math\";\r\nimport { levels, ILevelData } from './levels';\r\n\r\n// import assets\r\nimport tileTypeSolidPng from './assets/tile-type-solid.png';\r\nimport tileImage1Png from './assets/tile-type-1.png';\r\nimport tileImage2Png from './assets/tile-type-2.png';\r\nimport tileImage3Png from './assets/tile-type-3.png';\r\nimport tileImage4Png from './assets/tile-type-4.png';\r\nimport tileImage5Png from './assets/tile-type-5.png';\r\n\r\nimport { Texture2D } from \"../../engine/graphics/texture\";\r\nimport { Renderer2d, RenderMode } from \"../../engine/graphics/renderer2d\";\r\n\r\nconst backgroundColor = new Vec4(236/255, 239/255, 241/255, 1.0);\r\nconst backgroundLineColor = new Vec4(1, 1, 1, 1);\r\n\r\nconst lightColors: {[key: number]: Vec4} = {\r\n    1: new Vec4(255/255, 138/255, 128/255, 1),  // red ff8a80\r\n    2: new Vec4(43/255, 187/255, 173/255, 1),   // green 2bbbad\r\n    3: new Vec4(179/255, 136/255, 255/255, 1),  // purple b388ff\r\n    4: new Vec4(149/255, 158/255, 255/255, 1),  // light blue 8c9eff\r\n    5: new Vec4(63/255, 114/255, 155/255, 1),   // dark blue 3f729b\r\n}\r\n\r\nenum LightDir {\r\n    NONE = 0,\r\n    LEFT = 1,\r\n    UP = 2,\r\n    RIGHT = 3,\r\n    DOWN = 4\r\n}\r\n\r\nenum TILE_SHAPE {\r\n    NONE = 0, \r\n    EMPTY = 1,\r\n    CORNER_TL = 2,\r\n    CORNER_TR = 3,\r\n    CORNER_BR = 4,\r\n    CORNER_BL = 5,\r\n    SOLID = 6\r\n}\r\n\r\ninterface TileLightPoint {\r\n    dir: Vec2;\r\n    pos: Vec2;\r\n    index: Vec2;\r\n    color: Vec4;\r\n    tile: Tile;\r\n}\r\n\r\nclass Level {\r\n    pos: Vec2;\r\n    data: ILevelData;\r\n    tileTextures: {[key: number]: Texture2D} = {};\r\n    tiles: Tile[] = [];\r\n\r\n\r\n    activeTile: Tile;\r\n    movingTiles: Set<Tile> = new Set();\r\n\r\n    constructor(data: ILevelData) {\r\n        this.data = data;\r\n    }\r\n\r\n    posToIndex(pos: Vec2): Vec2 {\r\n        const x = Math.floor((pos.x - this.pos.x) / this.data.tileSize);\r\n        const y = Math.floor((pos.y - this.pos.y) / this.data.tileSize);\r\n        return new Vec2(x, y);\r\n    }\r\n\r\n    indexToPos(index: Vec2): Vec2 {\r\n        const hs = this.data.tileSize * 0.5;\r\n        const x = Math.floor(index.x * this.data.tileSize + this.pos.x + hs);\r\n        const y = Math.floor(index.y * this.data.tileSize + this.pos.y + hs);\r\n        return new Vec2(x, y);\r\n    }\r\n\r\n    inZone(index: Vec2): Rect {\r\n        for(const zone of this.data.zones) {\r\n            if(zone.contains(index))\r\n                return zone;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    calculateLightPoints() {\r\n        for(const light of this.tiles) {\r\n            if(!(light instanceof LightTile)) \r\n                continue;\r\n\r\n            light.calculateLightPoints();\r\n        }\r\n    }\r\n\r\n    findTileAtIndex(index: Vec2): Tile {\r\n        for(const t of this.tiles) {\r\n            const ti = this.posToIndex(t.pos);\r\n            if(ti.x === index.x && ti.y==index.y)\r\n                return t;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nclass Tile {\r\n\r\n    level: Level;\r\n    pos: Vec2;\r\n    size: Vec2;\r\n    type: number;\r\n\r\n    isMovingToTarget: boolean = false;\r\n    targetPos: Vec2;\r\n\r\n    onMoveFinished: (tile: Tile) => void;\r\n\r\n    constructor(level: Level, pos: Vec2, size: Vec2, type: number) {\r\n        this.level = level;\r\n        this.pos = pos;\r\n        this.size = size;\r\n        this.targetPos = new Vec2(pos.x, pos.y);\r\n        this.type = type;\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.moveToTargetPos(dt);\r\n    }\r\n\r\n    draw(renderer: Renderer2d) {\r\n        const ts = this.level.data.tileSize;\r\n\r\n        renderer.setTexture(this.level.tileTextures[1]);\r\n        renderer.darwRect(this.pos.x, this.pos.y, ts, ts, 0, 0.5, 0.5 );\r\n\r\n        if(this.type >= 1) {\r\n            renderer.setTexture(this.level.tileTextures[this.type]);\r\n            renderer.darwRect(this.pos.x, this.pos.y, ts, ts, 0, 0.5, 0.5 );\r\n        }\r\n        \r\n    }\r\n\r\n    private moveToTargetPos(dt: number) {\r\n        if(this.isMovingToTarget === false)\r\n            return;\r\n        const speed = 8;\r\n        const moveDir = Vec2.sub(this.targetPos, this.pos).normalise();\r\n        this.pos.add({x: moveDir.x * dt * this.size.x * speed, y: moveDir.y * dt * this.size.y * speed});\r\n\r\n        // snap the position to target when its close enough.\r\n        if(Math.abs(this.pos.x - this.targetPos.x) < 4 )\r\n            this.pos.x = this.targetPos.x;\r\n\r\n        if(Math.abs(this.pos.y - this.targetPos.y) < 4 )\r\n            this.pos.y = this.targetPos.y;\r\n\r\n        if(this.pos.x == this.targetPos.x && this.pos.y == this.targetPos.y){\r\n            this.isMovingToTarget = false;\r\n            if(this.onMoveFinished)\r\n                this.onMoveFinished(this);\r\n        }\r\n    }\r\n\r\n    move(dir: Vec2) {\r\n        const index = this.level.posToIndex(this.pos).add(dir);\r\n        this.targetPos = this.level.indexToPos(index);\r\n        this,this.isMovingToTarget = true;\r\n    }\r\n\r\n    moveWith(dir: Vec2, withIndex: Vec2): boolean {\r\n        const index = this.level.posToIndex(this.pos);\r\n\r\n        if((index.y == withIndex.y && dir.x !== 0) || (index.x == withIndex.x && dir.y !== 0)) {\r\n            this.move(dir);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }    \r\n}\r\n\r\nclass LightTile extends Tile {\r\n\r\n    colorId: number;\r\n    lightDir: LightDir = LightDir.NONE;\r\n    lightPoints: Array<TileLightPoint[]> = [];\r\n\r\n    get color() { return lightColors[this.colorId] ?? new Vec4(1,1,1,1); }\r\n\r\n    constructor(level: Level, pos: Vec2, size: Vec2, type: number) {\r\n        super(level, pos, size, type);\r\n    }\r\n\r\n    draw(renderer: Renderer2d) {\r\n        super.draw(renderer);\r\n\r\n        renderer.saveState(true);\r\n\r\n        const color = new Vec4(this.color.x, this.color.y, this.color.z, 0.5);\r\n        color.w = 0.5;\r\n\r\n        renderer.setColor(color);\r\n        renderer.darwRect(this.pos.x, this.pos.y, this.level.data.tileSize/2, this.level.data.tileSize/2, 0, 0.5, 0.5);\r\n\r\n        renderer.popState();\r\n    }\r\n\r\n    \r\n    drawLight(renderer: Renderer2d) {\r\n        \r\n        if (this.lightPoints.length == 0 )\r\n            return;\r\n\r\n        for(const lps of this.lightPoints) {\r\n            const points = lps.map(z => z.pos);\r\n            const colors = lps.map(z => new Vec4(z.color.x, z.color.y, z.color.z, z.color.w));\r\n            colors[colors.length-1].w = 0;\r\n    \r\n            renderer.saveState(true);\r\n            renderer.setColor(new Vec4(this.color.x, this.color.y, this.color.z, 0.5));\r\n            const lineThickness = this.level.data.tileSize/3\r\n            renderer.drawLines(points, lineThickness, colors);\r\n            renderer.popState();\r\n        }\r\n    }\r\n\r\n    calculateLightPoints() {\r\n        this.lightPoints = [];\r\n        if(this.lightDir == LightDir.NONE)\r\n            return;\r\n\r\n        const dirVec = this.dirToVec(this.lightDir);\r\n\r\n        const ligtBeam: TileLightPoint[] = [];\r\n        this.lightPoints.push(ligtBeam);\r\n\r\n        ligtBeam.push({\r\n            dir: dirVec,\r\n            index: this.level.posToIndex(this.pos),\r\n            pos: new Vec2(this.pos.x, this.pos.y).sub({x: dirVec.x * 9, y: dirVec.y * 9}),\r\n            color: this.color,\r\n            tile: null\r\n        });\r\n        this.traceLightPoints(ligtBeam, this.dirToVec(this.lightDir), this.pos);\r\n    }\r\n\r\n    private traceLightPoints(results: TileLightPoint[], currentDir: Vec2, pos: Vec2) {\r\n\r\n        pos = new Vec2(pos.x, pos.y);\r\n        const ts = this.level.data.tileSize;\r\n        const hts = ts * 0.5;\r\n\r\n        const index = this.level.posToIndex(pos);\r\n        \r\n        // check if we are out of bounds\r\n        // if so, this will be the final point for the line to be added\r\n        if( index.x < 0 || index.x > this.level.data.cols || \r\n            index.y < 0 || index.y > this.level.data.rows) {\r\n\r\n            results.push({\r\n                dir: new Vec2(0, 0),\r\n                index: index,\r\n                pos: pos,\r\n                color: this.color,\r\n                tile: null\r\n            });\r\n\r\n            return;\r\n        }\r\n\r\n        // does a tile exist at this position?\r\n        const t = this.level.findTileAtIndex(index);\r\n\r\n        let isBlocker = false;\r\n        let nextDir = currentDir;\r\n        const offset = new Vec2();\r\n        \r\n        if(t && t.type != TILE_SHAPE.NONE)\r\n        {\r\n\r\n            const cPos = this.level.indexToPos(index);\r\n            const dirFromCenter = Vec2.sub(cPos, t.pos);\r\n            const distanceFromCenter = dirFromCenter.length();\r\n\r\n            if(Math.abs(currentDir.x) > 0)\r\n                pos.x = t.pos.x;\r\n\r\n            if(Math.abs(currentDir.y) > 0)\r\n                pos.y = t.pos.y;\r\n\r\n            // TILE_SHAPE.CORNER_TL\r\n            //=====================================================\r\n            if(t.type == TILE_SHAPE.CORNER_TL)\r\n            {\r\n                if(currentDir.x == 1) {\r\n                    isBlocker = true;\r\n                    offset.x -= hts - 6;\r\n                }\r\n                if(currentDir.y == 1) {\r\n                    isBlocker = true;\r\n                    offset.y -= hts - 6;\r\n                }\r\n                if(currentDir.x == -1) {\r\n                    let bent = false;\r\n                    if(distanceFromCenter >= 0 &&  distanceFromCenter <= hts - 7 - (ts/3/2)) {\r\n                        nextDir = new Vec2(currentDir.y,-currentDir.x);\r\n                        offset.x += distanceFromCenter * currentDir.x;\r\n                        bent = true;\r\n                    }\r\n\r\n                    // console.log(`Distance: ${distanceFromCenter} \\t ${bent}`);\r\n                    \r\n                    \r\n                }\r\n                if(currentDir.y == -1) {\r\n                    nextDir = new Vec2(currentDir.y,-currentDir.x);\r\n                   // offset.y += distanceFromCenter * currentDir.x;\r\n                }\r\n            }\r\n            \r\n\r\n            // TILE_SHAPE.CORNER_TR\r\n            //=====================================================\r\n            if(t.type == TILE_SHAPE.CORNER_TR && currentDir.x ==-1) {\r\n                isBlocker = true;\r\n                offset.x += hts - 6;\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_TR && currentDir.y == 1) {\r\n                isBlocker = true;\r\n                offset.y -= hts - 6;\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_TR && currentDir.x == 1) {\r\n                nextDir = new Vec2(currentDir.y, currentDir.x);\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_TR && currentDir.y == -1) {\r\n                nextDir = new Vec2(currentDir.y,-currentDir.x);\r\n            }\r\n\r\n            // TILE_SHAPE.CORNER_BR\r\n            //=====================================================\r\n            if(t.type == TILE_SHAPE.CORNER_BR && currentDir.x == 1) {\r\n                nextDir = new Vec2(currentDir.y,-currentDir.x);\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_BR && currentDir.y == 1) {\r\n                nextDir = new Vec2(-currentDir.y, currentDir.x);\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_BR && currentDir.x ==-1) {\r\n                isBlocker = true;\r\n                offset.x += hts - 6;\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_BR && currentDir.y ==-1) {\r\n                isBlocker = true;\r\n                offset.y += hts - 6;\r\n            }\r\n\r\n            // TILE_SHAPE.CORNER_BL\r\n            //=====================================================\r\n            if(t.type == TILE_SHAPE.CORNER_BL && currentDir.x == 1) {\r\n                isBlocker = true;\r\n                offset.x -= hts - 6;\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_BL && currentDir.y == 1) {\r\n                nextDir = new Vec2(currentDir.y,-currentDir.x);\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_BL && currentDir.x ==-1) {\r\n                nextDir = new Vec2(-currentDir.y, currentDir.x);\r\n            }\r\n            if(t.type == TILE_SHAPE.CORNER_BL && currentDir.y == -1) {\r\n                isBlocker = true;\r\n                offset.y += hts - 6;\r\n            }\r\n\r\n            // TILE_SHAPE.SOLID\r\n            //=====================================================\r\n            if(t.type == TILE_SHAPE.SOLID && currentDir.x == 1) {\r\n                isBlocker = true;\r\n            }\r\n            if(t.type == TILE_SHAPE.SOLID && currentDir.y == 1) {\r\n                isBlocker = true;\r\n                \r\n            }\r\n            if(t.type == TILE_SHAPE.SOLID && currentDir.x ==-1) {\r\n                isBlocker = true;\r\n            }\r\n            if(t.type == TILE_SHAPE.SOLID && currentDir.y == -1) {\r\n                isBlocker = true;\r\n            }\r\n        }\r\n\r\n        if(currentDir != nextDir || isBlocker) {\r\n            pos.x += offset.x;\r\n            pos.y += offset.y;\r\n            results.push({\r\n                dir: nextDir,\r\n                index: index,\r\n                pos: pos,\r\n                color: this.color,\r\n                tile: t\r\n            });\r\n        }\r\n        \r\n        if(!isBlocker) {\r\n            const nextPos = Vec2.mul(nextDir, {x: ts, y: ts}).add(pos);\r\n            this.traceLightPoints(results, nextDir, nextPos);\r\n        }\r\n    }\r\n\r\n    dirToVec(dir: LightDir) {\r\n        switch(dir) {\r\n            case LightDir.LEFT: return new Vec2(-1, 0);\r\n            case LightDir.UP: return new Vec2(0, -1);\r\n            case LightDir.RIGHT: return new Vec2(1, 0);\r\n            case LightDir.DOWN: return new Vec2(0, 1);\r\n            default: return new Vec2(0, 0);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class LightBender extends App {\r\n\r\n    currentLevelIndex: number = 0;\r\n    currentLevel: Level;\r\n\r\n    tileTextures: {[key: number]: Texture2D} = {};\r\n    \r\n    constructor(htmlCanvasId: string) {\r\n        super(htmlCanvasId);\r\n\r\n        this.currentLevel = new Level(levels[this.currentLevelIndex]);\r\n        this.currentLevel.tileTextures = this.tileTextures;\r\n        this.loadLevel();\r\n\r\n    }\r\n\r\n    async loadAssets(): Promise<void> {\r\n        await super.loadAssets();\r\n\r\n        this.tileTextures[0] = null;\r\n        \r\n        this.tileTextures[1] = new Texture2D(this.gl);\r\n        this.tileTextures[1].load(tileImage1Png);\r\n\r\n        this.tileTextures[2] = new Texture2D(this.gl);\r\n        this.tileTextures[2].load(tileImage2Png);\r\n\r\n        this.tileTextures[3] = new Texture2D(this.gl);\r\n        this.tileTextures[3].load(tileImage3Png);\r\n\r\n        this.tileTextures[4] = new Texture2D(this.gl);\r\n        this.tileTextures[4].load(tileImage4Png);\r\n\r\n        this.tileTextures[5] = new Texture2D(this.gl);\r\n        this.tileTextures[5].load(tileImage5Png);\r\n\r\n        this.tileTextures[6] = new Texture2D(this.gl);\r\n        this.tileTextures[6].load(tileTypeSolidPng);\r\n    }\r\n    \r\n    update() {\r\n        super.update();\r\n        const kb = this.input.keyboard;\r\n        const inputDir = new Vec2(0, 0);\r\n\r\n        if(kb.wasKeyPressed(38)) inputDir.y = -1;       // up arrow\r\n        else if(kb.wasKeyPressed(40)) inputDir.y =  1;  // down arrow\r\n        else if(kb.wasKeyPressed(37)) inputDir.x = -1;  // left arrow\r\n        else if(kb.wasKeyPressed(39)) inputDir.x =  1;  // right arrow\r\n            \r\n        if( inputDir.x !== 0 || inputDir.y !== 0) {\r\n            this.moveActiveTile(inputDir);\r\n        }\r\n\r\n        for(const t of this.currentLevel.tiles) {\r\n            t.update(this.time.deltaTime);\r\n        }\r\n\r\n        this.currentLevel.calculateLightPoints();\r\n    }\r\n\r\n    draw() {\r\n        super.draw();\r\n        this.gl.clearColor(0, 0, 0, 0);\r\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\r\n        this.renderer2d.begin();\r\n        this.drawBackgroundGrid();\r\n        this.drawLightBeams();\r\n        this.drawTiles();\r\n        this.renderer2d.end();\r\n    }\r\n\r\n    drawBackgroundGrid() {\r\n        const ts = this.currentLevel.data.tileSize; \r\n        const nx = this.currentLevel.data.cols-2; // Math.floor(this.canvas.width / ts);\r\n        const ny = this.currentLevel.data.rows-2; // Math.floor(this.canvas.height/ ts);\r\n        const xo = (this.canvas.width - nx * ts) * 0.5;\r\n        const yo = (this.canvas.height - ny * ts) * 0.5;\r\n\r\n        this.renderer2d.saveState(true);\r\n\r\n        // draw background:\r\n        // const mc = new Vec4(255/255, 232/255, 206/255, 1);\r\n        const oc = new Vec4(255/255, 255/255, 255/255, 0.2);\r\n\r\n        this.renderer2d.setColor(oc);\r\n        const colors = [new Vec4(oc.x, oc.y, oc.z, 0), new Vec4(oc.x, oc.y, oc.z, oc.w), new Vec4(oc.x, oc.y, oc.z, oc.w), new Vec4(oc.x, oc.y, oc.z, 0)];\r\n\r\n        for(let i=0; i<=nx; i++) {\r\n            const points = [\r\n                new Vec2(xo + (i*ts), yo - (2 * ts)), \r\n                new Vec2(xo + (i*ts), yo - 0), \r\n                new Vec2(xo + (i*ts), yo + (ny * ts)), \r\n                new Vec2(xo + (i*ts), yo + ((ny+2) * ts))\r\n            ];\r\n            this.renderer2d.drawLines(points, 1, colors);\r\n        }\r\n\r\n        for(let i=0; i<=ny; i++) {\r\n            const points = [\r\n                new Vec2(xo - (2 * ts), yo + (i*ts)),\r\n                new Vec2(xo - 0, yo + (i*ts)),\r\n                new Vec2(xo + (nx * ts), yo + (i*ts)),\r\n                new Vec2(xo + ((nx+2) * ts), yo + (i*ts))\r\n            ];\r\n            this.renderer2d.drawLines(points, 1, colors);\r\n        }\r\n\r\n        this.renderer2d.popState();\r\n    }\r\n\r\n    drawLightBeams() {\r\n        \r\n        for(const tile of this.currentLevel.tiles) {\r\n            if(tile instanceof LightTile) {\r\n                tile.drawLight(this.renderer2d);\r\n            }\r\n        }\r\n    }\r\n\r\n    drawTiles() {\r\n\r\n        this.renderer2d.saveState(true);\r\n\r\n        for(let i=0; i<this.currentLevel.tiles.length; i++) {\r\n            const tile = this.currentLevel.tiles[i];\r\n            tile.draw(this.renderer2d);\r\n        }\r\n\r\n        this.renderer2d.popState();\r\n    }\r\n\r\n\r\n    moveActiveTile(dir: Vec2) {\r\n\r\n        if( this.currentLevel.movingTiles.size > 0 || this.currentLevel.activeTile === null )\r\n            return;\r\n\r\n        \r\n        const activeTileIndex = this.currentLevel.posToIndex(this.currentLevel.activeTile.pos);\r\n        const targetTileIndex = Vec2.add(activeTileIndex, dir);\r\n        const zone = this.currentLevel.inZone(targetTileIndex);\r\n\r\n        const moveTileFinishedFunc = (tile: Tile) => {\r\n            this.currentLevel.movingTiles.delete(tile);\r\n            tile.onMoveFinished = null;\r\n            const index = this.currentLevel.posToIndex(tile.pos);\r\n            if(!zone?.contains(index)) {\r\n                this.currentLevel.activeTile = tile;\r\n            }\r\n        }\r\n\r\n        this.currentLevel.activeTile.move(dir);\r\n        this.currentLevel.activeTile.onMoveFinished = moveTileFinishedFunc;\r\n\r\n        this.currentLevel.activeTile = null;\r\n\r\n        if(zone === null)\r\n            return;\r\n\r\n        for(const t of this.currentLevel.tiles) {\r\n            const ti = this.currentLevel.posToIndex(t.pos);\r\n            if(zone.contains(ti) && t.moveWith(dir, activeTileIndex) ) {\r\n                this.currentLevel.movingTiles.add(t);\r\n                t.onMoveFinished = moveTileFinishedFunc;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    loadLevel() {\r\n\r\n        const level = this.currentLevel;\r\n        const layout = level.data.layout;\r\n        const lights = level.data.lights;\r\n\r\n        // if the start tile is blank, set it to the default type.\r\n        if( layout[level.data.startTile[1]][level.data.startTile[0]] === 0 )\r\n            layout[level.data.startTile[1]][level.data.startTile[0]] = 1;\r\n\r\n        const tileSize = level.data.tileSize;\r\n        const nx = level.data.cols-2; // Math.floor(this.canvas.width / ts);\r\n        const ny = level.data.rows-2; // Math.floor(this.canvas.height/ ts);\r\n        const xo = (this.canvas.width - (nx+2) * tileSize) * 0.5;\r\n        const yo = (this.canvas.height - (ny+2) * tileSize) * 0.5;\r\n\r\n        // set the position of the level, so that we can calculate index's from positions.\r\n        level.pos = new Vec2(xo, yo);\r\n\r\n        this.currentLevel.tiles = [];\r\n\r\n        const rows = level.data.rows;\r\n        const cols = level.data.cols;\r\n        \r\n        for(let yi = 0; yi<rows; yi++) {\r\n            for(let xi = 0; xi<cols; xi++) {\r\n\r\n                let lightId = lights[yi][xi];\r\n                let tileType = layout[yi][xi];\r\n\r\n                if(lightId != 0 )\r\n                    tileType = 1;\r\n                \r\n                if(tileType === 0 )\r\n                    continue;\r\n\r\n                const x = xo + (xi * tileSize) + (tileSize * 0.5);\r\n                const y = yo + (yi * tileSize) + (tileSize * 0.5);\r\n                let tile = null;\r\n                \r\n                if( lightId > 0 ) {\r\n                    tile = new LightTile(this.currentLevel, new Vec2(x, y), new Vec2(tileSize, tileSize), tileType);\r\n                    tile.lightDir = Math.floor(lightId / 10);\r\n                    tile.colorId = lightId - (tile.lightDir * 10);\r\n                }\r\n                else {\r\n                    tile = new Tile(this.currentLevel, new Vec2(x, y), new Vec2(tileSize, tileSize), tileType);\r\n                }\r\n\r\n                if(xi === level.data.startTile[0] && yi === level.data.startTile[1])\r\n                    this.currentLevel.activeTile = tile;\r\n\r\n                this.currentLevel.tiles.push(tile);\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","\r\n\r\nimport { App } from \"../../engine/app\";\r\nimport { Vec2, IVec2, Shape, Ray, RayHit } from \"../../engine/math\";\r\n\r\n\r\n\r\nexport class RayCastingDemo extends App {\r\n\r\n    polygons: Shape[] = [];\r\n    \r\n    rays: Ray[] = [];\r\n    rayHits: RayHit[] = [];\r\n\r\n    allRays: Array<Ray> = [];\r\n\r\n    elapsedTime: number = 0;\r\n\r\n    constructor(htmlCanvasId: string) {\r\n        super(htmlCanvasId);\r\n    }\r\n\r\n    async loadAssets(): Promise<void> {\r\n        await super.loadAssets();\r\n\r\n        const ww = this.canvas.width;\r\n        const wh = this.canvas.height;\r\n        const aw = ww/1.5;\r\n        const ah = wh/1.5;\r\n        const as = Math.min(aw, ah);\r\n        const left = ww/2 - as/2;\r\n        const right = ww/2 + as/2;\r\n        const top =  wh/2 - as/2;\r\n        const bottom = wh/2 + as/2;\r\n\r\n        this.polygons.push( Shape.makeCircle(ww/2 - as/4, wh/2, as/10,4));\r\n        this.polygons.push( Shape.makeCircle(ww/2 + as/4, wh/2, as/10,4));\r\n        this.polygons.push( Shape.makeCircle(ww/2, wh/2 - as/4, as/10,4));\r\n        this.polygons.push( Shape.makeCircle(ww/2, wh/2 + as/4, as/10,4));\r\n        // this.polygons.push( Shape.makeCircle(right, 300, 50,4));\r\n        // this.polygons.push( Shape.makeCircle(300, 500, 50,4));\r\n        // this.polygons.push( Shape.makeCircle(400, 400, 50,4));\r\n\r\n        this.polygons.push( Shape.makeBox(left, top, right-left, bottom-top));\r\n        this.polygons.push( Shape.makeBox(0, 0,ww, wh));\r\n\r\n        // this.polygons.push( Shape.makeLine(200, 100, 200, 400));\r\n        // this.polygons.push( Shape.makeLine(500, 400, 500, 100));\r\n        //this.polygons.push( Shape.makeLine(100, 300, 400, 300));\r\n        //this.polygons.push( Shape.makeLine(400, 300, 100, 300));\r\n\r\n        this.rays = [] // this.makeRayFan(100, 100, 64);\r\n\r\n\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0.707,-0.707)  ));\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0, 1)  ));\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0, 1)  ));\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0, 1)  ));\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0, 1)  ));\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0, 1)  ));\r\n        // this.rays.push(new Ray(new Vec2(0, 0), new Vec2(0, 1)  ));\r\n\r\n    }\r\n    \r\n    update() {\r\n        super.update();\r\n        this.elapsedTime += this.time.deltaTime;\r\n\r\n        // this.updateRayPositions(this.input.mouse.pos.x, this.input.mouse.pos.y);\r\n        // this.rays = this.makeRayFan(this.input.mouse.pos.x, this.input.mouse.pos.y, 64);\r\n        // this.rays = this.makeRaysToShapes(this.input.mouse.pos.x, this.input.mouse.pos.y, this.polygons);\r\n\r\n        this.elapsedTime = Math.PI / 3;\r\n        //this.rays = this.makeRayLine(this.input.mouse.pos, new Vec2(Math.cos(this.elapsedTime), Math.sin(this.elapsedTime)), 10, 1);\r\n        //this.rays = this.makeRaysToShapes(this.input.mouse.pos.x, this.input.mouse.pos.y, this.polygons);\r\n        this.rays = this.makeRayFan(this.input.mouse.pos.x, this.input.mouse.pos.y, 64);\r\n\r\n        this.rayHits = [];\r\n        this.allRays = [];\r\n\r\n        for(let i=0; i<this.rays.length; i++) {\r\n            const r = this.rays[i]\r\n            r.castToShapes(this.polygons, 0);\r\n            this.rayHits.push(...r.hits());\r\n            this.allRays.push(...r.rays());\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        super.draw();\r\n        this.renderer2d.begin();\r\n       \r\n        for(const p of this.polygons)\r\n            this.drawShape(p);\r\n\r\n        this.drawRays(this.allRays);\r\n        // this.drawRayHits(this.rayHits);\r\n\r\n        this.renderer2d.end();\r\n    }\r\n\r\n    drawShape(polygon: Shape) {\r\n        this.renderer2d.saveState();\r\n        this.renderer2d.drawLines(polygon.points, 1);\r\n        this.renderer2d.popState();\r\n    }\r\n\r\n\r\n\r\n    updateRayPositions(xPos: number, yPos: number) {\r\n        for(let i=0; i<this.rays.length; i++) {\r\n            const r = this.rays[i];\r\n\r\n            r.pos.x = xPos;\r\n            r.pos.y = yPos;\r\n        }\r\n    }\r\n\r\n    drawRays(rays: Ray[]) {\r\n        for(const r of rays) {\r\n            const p0 = r.pos;\r\n            \r\n            //this.renderer2d.drawCircle(p0.x, p0.y, 3, 4);\r\n\r\n            const d = Math.min(r.hit?.distance ?? 2000);\r\n            \r\n            const p1 = Vec2.mul(r.dir, {x: d, y:d}).add(r.pos);\r\n            this.renderer2d.drawLine(p0.x, p0.y, p1.x, p1.y, 1);\r\n        }\r\n    }\r\n\r\n    drawRayHits(rayHits: RayHit[]) {\r\n        for(const h of rayHits) {\r\n            this.renderer2d.drawLine(h.incomingRay.pos.x, h.incomingRay.pos.y, h.point.x, h.point.y, 1);\r\n        }\r\n    }\r\n\r\n\r\n    makeRayFan(xPos: number, yPos: number, numRays: number): Ray[] {\r\n        const rays: Ray[] = [];\r\n        for(let i=0; i<numRays;  i++) {\r\n            const r = ((2.0 * Math.PI) / numRays) * i;\r\n            rays.push(new Ray(\r\n                new Vec2(xPos, yPos), \r\n                new Vec2(Math.sin(r), -Math.cos(r))\r\n            ));\r\n        }\r\n\r\n        return rays;\r\n    }\r\n\r\n    makeRaysToShapes(xPos: number, yPos: number, shapes: Shape[]) {\r\n        const pos = new Vec2(xPos, yPos);\r\n        const rays: Ray[] = [];\r\n        for(const shape of shapes) {\r\n            for(const p of shape.points) {\r\n                rays.push(new Ray(pos, Vec2.sub(p, pos).normalise()) );\r\n            }\r\n        }\r\n\r\n        return rays;\r\n    }\r\n\r\n    makeRayLine(pos: IVec2, dir: IVec2, count: number, spacing: number) {\r\n        const rays: Ray[] = [];\r\n        const pDir = Vec2.perpendicular(dir);\r\n\r\n        for(let i=0; i<count; i++) {\r\n            rays.push(\r\n                new Ray(Vec2.add(pos, Vec2.scale(pDir, i*spacing)), dir)\r\n            )\r\n        }\r\n        return rays;\r\n    }\r\n}","\r\n\r\nimport { App } from \"../../engine/app\";\r\nimport { Vec2 } from \"../../engine/math\";\r\n\r\nexport class LineRenderingDemo extends App {\r\n\r\n    constructor(htmlCanvasId: string) {\r\n        super(htmlCanvasId);\r\n    }\r\n\r\n    async loadAssets(): Promise<void> {\r\n        await super.loadAssets();\r\n    }\r\n    \r\n    update() {\r\n        super.update();\r\n    }\r\n\r\n    draw() {\r\n        super.draw();\r\n\r\n        this.renderer2d.begin();\r\n\r\n        const points = [\r\n            new Vec2(100, 100),\r\n            new Vec2(200, 100),\r\n            this.input.mouse.pos\r\n        ];\r\n\r\n        this.renderer2d.drawLines(points, 20);\r\n\r\n        this.renderer2d.drawLine(300, 300, 400, 400, 6);\r\n\r\n        this.renderer2d.end();\r\n    }\r\n\r\n}","import { LightBender } from './lightBender';\r\nimport { RayCastingDemo } from './rayCasting';\r\nimport { LineRenderingDemo } from './lineRendering';\r\nimport { App } from '../engine/app';\r\n\r\n\r\nfunction RunDemo(canvasId: string, name: string) {\r\n    switch(name) {\r\n        case 'LightBender': return new LightBender(canvasId);\r\n        case 'RayCastingDemo': return new RayCastingDemo(canvasId);\r\n        case 'LineRenderingDemo': return new LineRenderingDemo(canvasId);\r\n        default: return new App(canvasId);\r\n    }\r\n}\r\n\r\nexport default RunDemo;","\r\nimport RunDemo from './demos';\r\n\r\n// ============================================================================\r\n// Launch the canvas demo\r\n// ============================================================================\r\n\r\nfunction getDemoNameFromHash() {\r\n    const pathnames: string[] = window.location.hash.substr(1).split('/').filter(z => z !== \"\");\r\n    const demoName = pathnames[0] ?? 'LightBender';\r\n    return demoName;\r\n}\r\n\r\nfunction runApp() {\r\n    const app = RunDemo(\"canvas\", getDemoNameFromHash());\r\n    app.launch();\r\n}\r\n\r\n// listen for hach value change events\r\nwindow.addEventListener('hashchange', () => {\r\n    runApp();\r\n});\r\n\r\nwindow.onload = (() => {\r\n    runApp();\r\n});\r\n\r\n\r\n\r\n\r\n// ============================================================================\r\n// APP MENU\r\n// ============================================================================\r\n{\r\n    const menuBtn = document.querySelector('.menu-btn');\r\n    const menuList = document.querySelector('.page-nav ul');\r\n    let menuOpen = false;\r\n    menuBtn.addEventListener('click', () => {\r\n        menuOpen = !menuOpen;\r\n        if(menuOpen){ \r\n            menuBtn.classList.add('open')\r\n            menuList.classList.add('open');\r\n        }\r\n        else {\r\n            menuBtn.classList.remove('open');\r\n            menuList.classList.remove('open');\r\n        }\r\n        console.log('clicky');\r\n        \r\n    })\r\n\r\n}","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}