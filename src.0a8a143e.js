parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JaNV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.x=t,this.y=n}return t.prototype[Symbol.iterator]=function(){var t=this,n=0;return{next:function(){return{value:t[n++],done:n>2}}}},Object.defineProperty(t.prototype,"x",{get:function(){return this[0]},set:function(t){this[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this[1]},set:function(t){this[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xy",{get:function(){return[this.x,this.y]},set:function(t){this.x=t[0],this.y=t[1]},enumerable:!0,configurable:!0}),t.add=function(n,e){return new t(n.x+e.x,n.y+e.y)},t.sub=function(n,e){return new t(n.x-e.x,n.y-e.y)},t.mul=function(n,e){return new t(n.x*e.x,n.y*e.y)},t.scale=function(n,e){return new t(n.x*e,n.y*e)},t.div=function(n,e){return new t(n.x/e.x,n.y/e.y)},t.negate=function(n){return new t(-n.x,-n.y)},t.normalise=function(n){var e=t.len(n);return new t(n.x/e,n.y/e)},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.distance=function(n,e){return t.sub(e,n).length()},t.dot=function(t,n){return t.x*n.x+t.y*n.y},t.pivot=function(n,e,r){void 0===r&&(r={x:0,y:0});var i=n.x-r.x,o=n.y-r.y;return new t(i*Math.cos(e)-o*Math.sin(e)+r.x,o*Math.cos(e)+i*Math.sin(e)+r.y)},t.reflect=function(n,e){var r=t.dot(n,e);return new t(n.x-2*r*e.x,n.y-2*r*e.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.mul=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalise=function(){var t=this.length();return 0===t?this:(this.x/=t,this.y/=t,this)},t.prototype.length=function(){return t.len(this)},t.prototype.dot=function(n){return t.dot(this,n)},t.prototype.pivot=function(t,n){void 0===n&&(n={x:0,y:0});var e=this.x-n.x,r=this.y-n.y;return this.x=e*Math.cos(t)-r*Math.sin(t)+n.x,this.y=r*Math.cos(t)+e*Math.sin(t)+n.y,this},t.perpendicular=function(n){return new t(n.y,-n.x)},t.ZERO=new t(0,0),t}();exports.Vec2=t;
},{}],"hxyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./vec2"),e=function(){function e(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return e.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return{value:t[e++],done:e>3}}}},Object.defineProperty(e.prototype,"x",{get:function(){return this[0]},set:function(t){this[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this[1]},set:function(t){this[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this[2]},set:function(t){this[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xy",{get:function(){return new t.Vec2(this[0],this[1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xyz",{set:function(t){this.x=t[0],this.y=t[1],this.z=t[2]},enumerable:!0,configurable:!0}),e.add=function(t,n){return new e(t.x+n.x,t.y+n.y,t.z+n.z)},e.sub=function(t,n){return new e(t.x-n.x,t.y-n.y,t.z-n.z)},e.mul=function(t,n){return new e(t.x*n.x,t.y*n.y,t.z*n.z)},e.div=function(t,n){return new e(t.x/n.x,t.y/n.y,t.z/n.z)},e.normalise=function(t){var n=e.len(t);return new e(t.x/n,t.y/n,t.z/n)},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},e.prototype.mul=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},e.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},e.prototype.normalise=function(){var t=this.length();return this.x/=t,this.y/=t,this.z/=t,this},e.prototype.length=function(){return e.len(this)},e.prototype.dot=function(t){return e.dot(this,t)},e}();exports.Vec3=e;
},{"./vec2":"JaNV"}],"yoDL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=n,this.w=i}return t.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return{value:t[e++],done:e>4}}}},Object.defineProperty(t.prototype,"x",{get:function(){return this[0]},set:function(t){this[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this[1]},set:function(t){this[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this[2]},set:function(t){this[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this[3]},set:function(t){this[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xyzw",{get:function(){return[this.x,this.y,this.z,this.w]},set:function(t){this.x=t[0],this.y=t[1],this.z=t[2],this.w=t[3]},enumerable:!0,configurable:!0}),t.add=function(e,n){return new t(e.x+n.x,e.y+n.y,e.z+n.z,e.w+n.w)},t.sub=function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z,e.w-n.w)},t.mul=function(e,n){return new t(e.x*n.x,e.y*n.y,e.z*n.z,e.w*n.w)},t.div=function(e,n){return new t(e.x/n.x,e.y/n.y,e.z/n.z,e.w/n.w)},t.normalise=function(e){var n=t.len(e);return new t(e.x/n,e.y/n,e.z/n,e.w/n)},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},t.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},t.prototype.mul=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},t.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},t.prototype.normalise=function(){var t=this.length();return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this},t.prototype.length=function(){return t.len(this)},t.prototype.dot=function(e){return t.dot(this,e)},t.ONE=new t(1,1,1,1),t}();exports.Vec4=t;
},{}],"gVZ7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./vec2"),e=require("./vec3"),n=function(){function n(t){for(var e=0;e<9;e++)this[e]=t[e]}return n.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return{value:t[e++],done:e>9}}}},Object.defineProperty(n.prototype,"right",{get:function(){return new t.Vec2(this[0],this[1])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"up",{get:function(){return new t.Vec2(this[4],this[5])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pos",{get:function(){return new t.Vec2(this[6],this[7])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return new t.Vec2(this.right.length(),this.up.length())},enumerable:!0,configurable:!0}),n.row=function(t,n){var r=3*n;return new e.Vec3(t[r+0],t[r+1],t[r+2])},n.col=function(t,n){return new e.Vec3(t[n+0],t[n+3],t[n+6])},n.identity=function(){return new n([1,0,0,0,1,0,0,0,1])},n.translation=function(t,e){return new n([1,0,0,0,1,0,t,e,1])},n.rotation=function(t){var e=Math.sin(t),r=Math.cos(t);return new n([r,e,0,-e,r,0,0,0,1])},n.scale=function(t,e){return new n([t,0,0,0,e,0,0,0,1])},n.mul=function(t,e){return new n([t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]])},n.transformPoint=function(t,e){return{x:e.x*t[0]+e.y*t[3]+e.z*t[6],y:e.x*t[1]+e.y*t[4]+e.z*t[7],z:e.x*t[2]+e.y*t[5]+e.z*t[8]}},n.prototype.copy=function(){return new n([this[0],this[1],this[2],this[3],this[4],this[5],this[6],this[7],this[8]])},n.prototype.equal=function(t){for(var e=Number.EPSILON,n=0;n<9;n++)if(Math.abs(this[n]-t[n])>e)return!1;return!0},n.prototype.move=function(t,e){this[6]+=t,this[7]+=e},n.prototype.setPos=function(t,e){this[6]=t,this[7]=e},n.prototype.setPosX=function(t){this[6]=t},n.prototype.setPosY=function(t){this[7]=t},n}();exports.Mat3=n;
},{"./vec2":"JaNV","./vec3":"hxyE"}],"WuWw":[function(require,module,exports) {
"use strict";var e=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,c=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=c.next()).done;)i.push(o.value)}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return i},t=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(e(arguments[r]));return t};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./vec3"),o=require("./vec4"),n=function(){function e(t){void 0===t&&(t=e.Identity);for(var r=0;r<16;r++)this[r]=t[r]}return e.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return{value:e[t++],done:t>16}}}},Object.defineProperty(e.prototype,"right",{get:function(){return new r.Vec3(this[0],this[1],this[2])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"up",{get:function(){return new r.Vec3(this[4],this[5],this[6])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forward",{get:function(){return new r.Vec3(this[8],this[9],this[10])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return new r.Vec3(this[12],this[13],this[14])},enumerable:!0,configurable:!0}),e.prototype.toArray=function(){return t(this)},e.row=function(e,t){var r=4*t;return new o.Vec4(e[r+0],e[r+1],e[r+2],e[r+3])},e.col=function(e,t){return new o.Vec4(e[t+0],e[t+4],e[t+8],e[t+12])},e.translation=function(t,r,o){return new e([1,0,0,0,0,1,0,0,0,0,1,0,t,r,o,1])},e.scale=function(t,r,o){return new e([t,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1])},e.orthographicProjection=function(t,r,o,n,c,i){return new e([2/(r-t),0,0,0,0,2/(n-o),0,0,0,0,-2/(i-c),0,-(r+t)/(r-t),-(n+o)/(n-o),-(i+c)/(i-c),1])},e.mul=function(t,r){var n=e.row(t,0),c=e.row(t,1),i=e.row(t,2),u=e.row(t,3),a=e.col(r,0),f=e.col(r,1),d=e.col(r,2),l=e.col(r,3);return new e([o.Vec4.dot(n,a),o.Vec4.dot(n,f),o.Vec4.dot(n,d),o.Vec4.dot(n,l),o.Vec4.dot(c,a),o.Vec4.dot(c,f),o.Vec4.dot(c,d),o.Vec4.dot(c,l),o.Vec4.dot(i,a),o.Vec4.dot(i,f),o.Vec4.dot(i,d),o.Vec4.dot(i,l),o.Vec4.dot(u,a),o.Vec4.dot(u,f),o.Vec4.dot(u,d),o.Vec4.dot(u,l)])},e.Identity=new e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e}();exports.Mat4=n;
},{"./vec3":"hxyE","./vec4":"yoDL"}],"S1Ps":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./vec2"),t=function(){function t(t,o,r,i){this.pos=new e.Vec2(t,o),this.size=new e.Vec2(r,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.pos.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.pos.x+this.size.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.pos.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.pos.y+this.size.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return new e.Vec2(this.pos.x,this.pos.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return e.Vec2.add(this.pos,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.pos.x,y:this.pos.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.pos.x+this.size.x,y:this.pos.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.pos.x+this.size.x,y:this.pos.y+this.size.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.pos.x,y:this.pos.y+this.size.y}},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){return e.x>=this.left&&e.x<this.right&&e.y>=this.top&&e.y<this.bottom},t}();exports.Rect=t;
},{"./vec2":"JaNV"}],"XEYV":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("."),e=function(){function e(t,e){this.pos=new i.Vec2,this.dir=new i.Vec2,this.hit=null,this.pos.x=t.x,this.pos.y=t.y,this.dir.x=e.x,this.dir.y=e.y}return e.prototype.castToLine=function(t,r,n,s,o){void 0===o&&(o=!1),this.hit=null;var h=this.pos.x,l=this.pos.y,u=this.pos.x+this.dir.x,a=this.pos.y+this.dir.y,c=(t-n)*(l-a)-(r-s)*(h-u);if(0===c)return!1;var y=((t-h)*(l-a)-(r-l)*(h-u))/c;if(!(y>=0&&y<=1&&-((t-n)*(r-l)-(r-s)*(t-h))/c>=0))return!1;var p=new i.Vec2(t+y*(n-t),r+y*(s-r)),v=i.Vec2.perpendicular(i.Vec2.normalise(i.Vec2.sub(new i.Vec2(t,r),new i.Vec2(n,s))));v.dot(this.dir)<0&&(v.x=-v.x,v.y=-v.y);var d=null;o&&(d=new e(i.Vec2.sub(p,this.dir),i.Vec2.reflect(this.dir,v)));var f={point:p,normal:v,distance:i.Vec2.distance(this.pos,p),incomingRay:this,reflectedRay:d,target:null};return this.hit=f,!0},e.prototype.castToShapes=function(i,e,r){var n,s;void 0===e&&(e=0),void 0===r&&(r=null);var o=null;this.hit=null;try{for(var h=t(i),l=h.next();!l.done;l=h.next())for(var u=l.value,a=0;a<u.points.length-1;a++){var c=u.points[a],y=u.points[a+1];this.castToLine(c.x,c.y,y.x,y.y,e>=1)&&(this.hit.distance<(null==o?void 0:o.distance)||null==o)&&((o=this.hit).target=u)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}(this.hit=o,e>0&&this.hit)&&((null==o||null===r||r(o))&&this.hit.reflectedRay.castToShapes(i,e-1));return null!==this.hit},e.prototype.rays=function(){var t=[];return this.recursiveGetRays(t),t},e.prototype.hits=function(){var t=[];return this.recursiveGetHits(t),t},e.prototype.recursiveGetHits=function(t){var i;null!=this.hit&&(t.push(this.hit),null===(i=this.hit.reflectedRay)||void 0===i||i.recursiveGetHits(t))},e.prototype.recursiveGetRays=function(t){var i,e;t.push(this),null===(e=null===(i=this.hit)||void 0===i?void 0:i.reflectedRay)||void 0===e||e.recursiveGetRays(t)},e}();exports.Ray=e;
},{".":"sYjz"}],"WR27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./mat3"),n=function(){function n(t){void 0===t&&(t=[]),this.points=t}return n.makeCircle=function(t,r,a,e){for(var o=[],i=0;i<=e;i++){var u=2*Math.PI/e*i,s=Math.sin(u)*a,x=-Math.cos(u)*a;o.push({x:t+s,y:r+x})}return new n(o)},n.makeLine=function(t,r,a,e){return new n([{x:t,y:r},{x:a,y:e}])},n.makeBox=function(r,a,e,o,i,u){void 0===u&&(u=!1);var s=[{x:e/2,y:o/2,z:1},{x:-e/2,y:o/2,z:1},{x:-e/2,y:-o/2,z:1},{x:e/2,y:-o/2,z:1}];return u||s.push({x:e/2,y:o/2,z:1}),new n(s=s.map(function(n){return t.Mat3.transformPoint(t.Mat3.mul(t.Mat3.rotation(i),t.Mat3.translation(r,a)),n)}))},n.makeAngleTriangle=function(r,a,e,o,i){var u=Math.ceil(.5*e),s=Math.ceil(.5*o),x=[{x:0-u,y:0-s,z:1},{x:0+u,y:0-s,z:1},{x:0-u,y:0+s,z:1},{x:0-u,y:0-s,z:1}];return new n(x=x.map(function(n){return t.Mat3.transformPoint(t.Mat3.mul(t.Mat3.rotation(i),t.Mat3.translation(r,a)),n)}))},n}();exports.Shape=n;
},{"./mat3":"gVZ7"}],"sYjz":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./vec2")),e(require("./vec3")),e(require("./vec4")),e(require("./mat3")),e(require("./mat4")),e(require("./rect")),e(require("./ray")),e(require("./shape"));
},{"./vec2":"JaNV","./vec3":"hxyE","./vec4":"yoDL","./mat3":"gVZ7","./mat4":"WuWw","./rect":"S1Ps","./ray":"XEYV","./shape":"WR27"}],"vCX4":[function(require,module,exports) {
"use strict";var t=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,s,r=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)u.push(o.value)}catch(i){s={error:i}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return u},e=this&&this.__spread||function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(t(arguments[n]));return e};Object.defineProperty(exports,"__esModule",{value:!0});var n,o=require("../math");!function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(n=exports.MOUSE||(exports.MOUSE={}));var s=function(){function t(t){var e=this;this.canvas=t,this.pos=new o.Vec2,this.dt=new o.Vec2,this.buttons=[],this.lastButtons=[],this.leftButtonDown=!1,this.mouseDownEventHandler=function(t){e.leftButtonDown=!0,e.buttons[t.button]=!0},this.mouseUpEventHandler=function(t){e.leftButtonDown=!1,e.buttons[t.button]=!1},this.mouseMoveEventHandler=function(t){var n=e.canvas.getBoundingClientRect(),s=e.pos;e.pos=new o.Vec2(t.pageX-n.x,t.pageY-n.y),e.dt=o.Vec2.sub(e.pos,s)},document.addEventListener("mousedown",this.mouseDownEventHandler),document.addEventListener("mousemove",this.mouseMoveEventHandler),document.addEventListener("mouseup",this.mouseUpEventHandler)}return t.prototype.destroy=function(){document.removeEventListener("mousedown",this.mouseDownEventHandler),document.removeEventListener("mousemove",this.mouseMoveEventHandler),document.removeEventListener("mouseup",this.mouseUpEventHandler)},t.prototype.update=function(){this.dt=new o.Vec2,this.lastButtons=e(this.buttons)},t.prototype.isButtonDown=function(t){return this.buttons[t]},t.prototype.wasButtonPressed=function(t){return this.buttons[t]&&!this.lastButtons[t]},t}();exports.MouseInput=s;
},{"../math":"sYjz"}],"uEQW":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(e){var t=this;this.canvas=e,this.lastKeyState={},this.keyState={},this.keyDownEventHandler=function(e){t.keyState[e.keyCode]=!0},this.keyUpEventHandler=function(e){t.keyState[e.keyCode]=!1},console.log("creating keyboard input"),document.addEventListener("keydown",this.keyDownEventHandler),document.addEventListener("keyup",this.keyUpEventHandler)}return t.prototype.destroy=function(){document.removeEventListener("keydown",this.keyDownEventHandler),document.removeEventListener("keyup",this.keyUpEventHandler)},t.prototype.isKeyDown=function(e){return this.keyState[e]||!1},t.prototype.wasKeyPressed=function(e){return this.keyState[e]&&!this.lastKeyState[e]||!1},t.prototype.wasKeyReleased=function(e){return this.keyState[e]&&!this.lastKeyState[e]||!1},t.prototype.update=function(){this.lastKeyState=e({},this.keyState)},t}();exports.KeyboardInput=t;
},{}],"MPCL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./mouseInput"),t=require("./keyboardInput"),o=function(){function o(o){this.mouse=new e.MouseInput(o),this.keyboard=new t.KeyboardInput(o)}return o.prototype.destroy=function(){this.mouse.destroy(),this.keyboard.destroy(),this.keyboard=null,this.mouse=null},o}();exports.InputManager=o;
},{"./mouseInput":"vCX4","./keyboardInput":"uEQW"}],"LCz5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){this.gl=e,this.image=new Image}return Object.defineProperty(e.prototype,"width",{get:function(){return this.image.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.image.height},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.gl.deleteTexture(this.handle),this.handle=null},e.prototype.load=function(e){var t=this;return new Promise(function(r,g){t.image.crossOrigin="anonymous",t.image.src=e,t.image.addEventListener("load",function(){t.handle=t.gl.createTexture(),t.gl.bindTexture(t.gl.TEXTURE_2D,t.handle),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MIN_FILTER,t.gl.NEAREST),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MAG_FILTER,t.gl.NEAREST),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_S,t.gl.REPEAT),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_T,t.gl.REPEAT),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,t.width,t.height,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,t.image),t.gl.bindTexture(t.gl.TEXTURE_2D,t.handle),r(t)})})},e}();exports.Texture2D=e;
},{}],"LQfK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.gl=t,this.infoLog=[],this.program=null,this.attributes={}}return t.prototype.destroy=function(){this.gl.deleteProgram(this.program)},t.prototype.enable=function(){this.gl.useProgram(this.program)},t.prototype.disable=function(){this.gl.useProgram(this.program)},t.prototype.bindTexture2d=function(t,r,e){this.gl.uniform1i(r,e),this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.activeTexture(this.gl.TEXTURE0)},t.prototype.createShader=function(t,r){var e=this.gl.createShader(r);this.gl.shaderSource(e,t),this.gl.compileShader(e);var i=this.gl.getShaderInfoLog(e);return this.infoLog.push("[ VERT ] "+i),e},t.prototype.createProgram=function(t,r,e,i){void 0===i&&(i=!0);var o=this.gl.createProgram();this.gl.attachShader(o,t),this.gl.attachShader(o,r);for(var h=0;h<e.length;h++)this.attributes[e[h]]=h,this.gl.bindAttribLocation(o,h,e[h]);this.gl.linkProgram(o),this.gl.validateProgram(o);var s=this.gl.getProgramInfoLog(o);return this.infoLog.push("[ FRAG ] "+s),i&&(this.gl.deleteShader(t),this.gl.deleteShader(r)),o},t}();exports.Shader=t;
},{}],"oObx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){this.gl=e,this.width=0,this.height=0,this.handle=null,this.glFrameBuffer=null,this.glDepthBuffer=null}return e.prototype.load=function(e,t){return this.width=e,this.height=t,this.handle=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.glFrameBuffer=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.glFrameBuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.handle,0),this.gl.drawBuffers([this.gl.COLOR_ATTACHMENT0]),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)==this.gl.FRAMEBUFFER_COMPLETE&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null),!0)},e.prototype.destroy=function(){this.gl.deleteFramebuffer(this.glFrameBuffer),this.gl.deleteTexture(this.handle)},e.prototype.enable=function(){e.enableRenderTarget(this.gl,this)},e.prototype.disable=function(){e.disableRenderTarget(this.gl)},e.enableRenderTarget=function(t,r){e.rendetTargetStack.push(r);var i=e.currentRenderTarget();t.bindFramebuffer(t.FRAMEBUFFER,i.glFrameBuffer),t.viewport(0,0,i.width,i.height)},e.disableRenderTarget=function(t){e.rendetTargetStack.length>1&&e.rendetTargetStack.pop();var r=e.currentRenderTarget();t.bindFramebuffer(t.FRAMEBUFFER,r.glFrameBuffer),t.viewport(0,0,r.width,r.height)},e.currentRenderTarget=function(){var t;return null!==(t=e.rendetTargetStack[e.rendetTargetStack.length-1])&&void 0!==t?t:null},e.rendetTargetStack=[],e}();exports.RenderTexture=e;
},{}],"JNHK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var r,i=require("../math"),s=require("./texture"),n=require("./shader"),o=require("../math/mat3"),u=require("./renderTexture");!function(t){t[t.FILL=0]="FILL",t[t.WIREFRAME=1]="WIREFRAME"}(r=exports.RenderMode||(exports.RenderMode={}));var h="\n    precision mediump float;\n\n    attribute vec3 a_position;\n    attribute vec4 a_color;\n    attribute vec2 a_uv;\n\n    uniform mat4 u_projection;\n\n    varying vec2 v_uv;\n    varying vec4 v_color;\n    varying float v_uvId;\n\n    void main() \n    {\n        v_uvId = a_position.z;\n        v_color = a_color;\n        v_uv = a_uv;\n        gl_Position = vec4(a_position.x, a_position.y, 0.0, 1.0) * u_projection;\n    }\n",a="\n    precision mediump float;\n\n    varying vec2 v_uv;\n    varying vec4 v_color;\n    varying float v_uvId;\n\n    uniform sampler2D u_texture0;\n    uniform sampler2D u_texture1;\n    uniform sampler2D u_texture2;\n    uniform sampler2D u_texture3;\n    uniform sampler2D u_texture4;\n\n    void main() \n    {\n        if      ( v_uvId == 0.0 ) gl_FragColor = texture2D(u_texture0, v_uv.st) * v_color;\n        else if ( v_uvId == 1.0 ) gl_FragColor = texture2D(u_texture1, v_uv.st) * v_color;\n        else if ( v_uvId == 2.0 ) gl_FragColor = texture2D(u_texture2, v_uv.st) * v_color;\n        else if ( v_uvId == 3.0 ) gl_FragColor = texture2D(u_texture3, v_uv.st) * v_color;\n        else if ( v_uvId == 4.0 ) gl_FragColor = texture2D(u_texture4, v_uv.st) * v_color;\n        else gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n",l=function(e){function r(t){var r=e.call(this,t)||this;return r.program=r.createProgram(r.createShader(h,r.gl.VERTEX_SHADER),r.createShader(a,r.gl.FRAGMENT_SHADER),["a_position","a_color","a_uv"],!0),r}return t(r,e),r.prototype.setTexture=function(t,e){var r=this.gl.getUniformLocation(this.program,"u_texture"+e);this.bindTexture2d(t,r,e)},r.prototype.setProjection=function(t){var e=this.gl.getUniformLocation(this.program,"u_projection"),r=t.toArray();this.gl.uniformMatrix4fv(e,!0,r)},r}(n.Shader),c=function(){function t(t,e,r){this.gl=t,this.vSizeBytes=e,this.iSizeBytes=r,this.vao=this.gl.createVertexArray(),this.vbo=this.gl.createBuffer(),this.ibo=this.gl.createBuffer()}return t.prototype.destroy=function(){this.gl.deleteBuffer(this.ibo),this.gl.deleteBuffer(this.vbo),this.gl.deleteVertexArray(this.vao)},t.prototype.bind=function(){this.gl.bindVertexArray(this.vao),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.ibo)},t.prototype.unbind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null)},t.prototype.setVertexBufferSize=function(t){var e=t*this.vSizeBytes;this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.DYNAMIC_DRAW)},t.prototype.setIndexBufferSize=function(t){var e=t*this.iSizeBytes;this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.DYNAMIC_DRAW)},t.prototype.setVertexBufferData=function(t,e,r){this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,t,0)},t.prototype.setIndexBufferData=function(t,e){this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,t,0)},t.prototype.draw=function(t,e){void 0===e&&(e=this.gl.TRIANGLES),this.gl.drawElements(e,t,this.gl.UNSIGNED_SHORT,0)},t}(),f=function(){function t(t){this.gl=t,this.verts=new Float32Array(4608),this.indices=new Uint16Array(768),this.size=9*Float32Array.BYTES_PER_ELEMENT,this.currentVert=0,this.currentFace=0,this.buffer=new c(this.gl,9*Float32Array.BYTES_PER_ELEMENT,Uint16Array.BYTES_PER_ELEMENT),this.buffer.bind(),this.buffer.setIndexBufferSize(this.indices.length),this.buffer.setVertexBufferSize(this.verts.length),this.gl.enableVertexAttribArray(0),this.gl.enableVertexAttribArray(1),this.gl.enableVertexAttribArray(2);var e=this.size,r=Float32Array.BYTES_PER_ELEMENT;this.gl.vertexAttribPointer(0,3,this.gl.FLOAT,!1,e,0*r),this.gl.vertexAttribPointer(1,4,this.gl.FLOAT,!1,e,3*r),this.gl.vertexAttribPointer(2,2,this.gl.FLOAT,!1,e,7*r),this.buffer.unbind()}return Object.defineProperty(t.prototype,"currentVertIndex",{get:function(){return 9*this.currentVert},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentIndicyIndex",{get:function(){return 3*this.currentFace},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.buffer.destroy(),this.buffer=null},t.prototype.draw=function(t){void 0===t&&(t=this.gl.TRIANGLES),this.buffer.bind(),this.buffer.setVertexBufferData(this.verts,this.currentVert,9),this.buffer.setIndexBufferData(this.indices,this.currentIndicyIndex),this.buffer.draw(this.currentIndicyIndex,t),this.buffer.unbind()},t.prototype.getPos=function(t){var e=t*this.size,r=this.verts;return{x:r[e+0],y:r[e+1],z:r[e+2]}},t.prototype.getColor=function(t){var e=t*this.size,r=this.verts;return{x:r[e+3],y:r[e+4],z:r[e+5],w:r[e+6]}},t.prototype.getUV=function(t){var e=t*this.size,r=this.verts;return{x:r[e+7],y:r[e+8]}},t.prototype.setPos=function(t){var e=this.currentVertIndex,r=this.verts;return r[e+0]=t.x,r[e+1]=t.y,r[e+2]=t.z,this},t.prototype.setColor=function(t){var e=this.currentVertIndex,r=this.verts;return r[e+3]=t.x,r[e+4]=t.y,r[e+5]=t.z,r[e+6]=t.w,this},t.prototype.setUV=function(t){var e=this.currentVertIndex,r=this.verts;return r[e+7]=t.x,r[e+8]=t.y,this},t.prototype.clear=function(){this.currentVert=0,this.currentFace=0},t.prototype.saveVert=function(){return this.currentVert++},t.prototype.saveFace=function(t,e,r){return this.indices[this.currentIndicyIndex+0]=t,this.indices[this.currentIndicyIndex+1]=e,this.indices[this.currentIndicyIndex+2]=r,this.currentFace+=1,this},t}(),d=function(){function t(t,e){this.canvas=t,this.gl=e,this.projection=new i.Mat4,this.maxTextures=5,this.activeTextures=[null,null,null,null,null],this.currentTextureId=0,this.processingRender=!1,this.renderState=[],this.numFlushes=0,this.blankTexture=new s.Texture2D(this.gl),this.blankTexture.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII="),this.saveState(!0),this.shader=new l(this.gl),this.spriteBuffer=new f(this.gl)}return t.prototype.destroy=function(){this.spriteBuffer.destroy(),this.shader.destroy()},t.prototype.begin=function(){this.processingRender=!0,this.spriteBuffer.clear(),this.currentTextureId=0;var t=u.RenderTexture.currentRenderTarget();this.projection=null==t?i.Mat4.orthographicProjection(0,this.canvas.width,this.canvas.height,0,0,100):i.Mat4.orthographicProjection(0,t.width,t.height,0,0,100),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE),this.shader.enable(),this.shader.setProjection(this.projection)},t.prototype.end=function(){this.flushBatch(),this.processingRender=!1,this.renderState=[],this.saveState(!0),this.numFlushes=0},t.prototype.darwRect=function(t,e,r,s,n,u,h){var a,l,c;this.shouldFlush()&&this.flushBatch();var f=this.renderState[this.renderState.length-1],d=this.useTexture(null!==(a=f.texture)&&void 0!==a?a:this.blankTexture),p=null!==(l=f.color)&&void 0!==l?l:[i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE],v=null!==(c=f.uvRect)&&void 0!==c?c:new i.Rect(0,0,1,1),g=o.Mat3.mul(o.Mat3.mul(o.Mat3.scale(r,s),o.Mat3.rotation(n)),o.Mat3.translation(t,e)),x=o.Mat3.transformPoint(g,{x:0-u,y:0-h,z:1}),y=o.Mat3.transformPoint(g,{x:1-u,y:0-h,z:1}),_=o.Mat3.transformPoint(g,{x:1-u,y:1-h,z:1}),A=o.Mat3.transformPoint(g,{x:0-u,y:1-h,z:1});x.z=d,y.z=d,_.z=d,A.z=d;var E=this.spriteBuffer.setPos(x).setColor(p[0]).setUV(v.topLeft).saveVert(),b=this.spriteBuffer.setPos(y).setColor(p[1]).setUV(v.topRight).saveVert(),R=this.spriteBuffer.setPos(_).setColor(p[2]).setUV(v.bottomRight).saveVert(),S=this.spriteBuffer.setPos(A).setColor(p[3]).setUV(v.bottomLeft).saveVert();this.spriteBuffer.saveFace(E,b,R).saveFace(E,R,S)},t.prototype.drawLine=function(t,e,r,s,n,o){this.drawLines([new i.Vec2(t,e),new i.Vec2(r,s)],n,o)},t.prototype.drawLines=function(t,e,r){var s,n,o;this.shouldFlush()&&this.flushBatch(),r=null!=r?r:[],this.saveState();for(var u=this.renderState[this.renderState.length-1],h=this.useTexture(this.blankTexture),a=null!==(s=u.color[0])&&void 0!==s?s:i.Vec4.ONE,l=[],c=i.Vec2.ZERO,f=0;f<t.length;f++){var d=t[f],p=null!==(n=t[f+1])&&void 0!==n?n:i.Vec2.add(d,c),v=i.Vec2.sub(null!=p?p:d,d).normalise(),g=i.Vec2.add(c,v).normalise(),x=i.Vec2.perpendicular(g),y=e/x.dot(i.Vec2.perpendicular(v))*.5,_=i.Vec2.mul(x,{x:y,y:y}),A=null!==(o=r[f])&&void 0!==o?o:a,E=this.spriteBuffer.setPos({x:d.x+_.x,y:d.y+_.y,z:h}).setColor(A).setUV({x:0,y:0}).saveVert(),b=this.spriteBuffer.setPos({x:d.x-_.x,y:d.y-_.y,z:h}).setColor(A).setUV({x:0,y:0}).saveVert();l.push(E),l.push(b),c=v}for(f=0;f<l.length-2;f+=2){var R=l[f];this.spriteBuffer.saveFace(R,R+1,R+2),this.spriteBuffer.saveFace(R+1,R+2,R+3)}this.popState()},t.prototype.drawCircle=function(t,e,r,s){var n,o,u;this.shouldFlush()&&this.flushBatch();for(var h=this.renderState[this.renderState.length-1],a=this.useTexture(null!==(n=h.texture)&&void 0!==n?n:this.blankTexture),l=null!==(o=h.color[0])&&void 0!==o?o:i.Vec4.ONE,c=null!==(u=h.uvRect)&&void 0!==u?u:new i.Rect(0,0,1,1),f=this.spriteBuffer.setPos({x:t,y:e,z:a}).setColor(l).setUV({x:.5*(c.right-c.left),y:.5*(c.bottom-c.top)}).saveVert(),d=0;d<=s;d++){var p=2*Math.PI/s*d,v=Math.sin(p),g=-Math.cos(p);this.spriteBuffer.setPos({x:v*r+t,y:g*r+e,z:a}).setColor(l).setUV({x:.5*v+.5,y:.5*g+.5}).saveVert()}for(d=0;d<=s;d++)this.spriteBuffer.saveFace(f,f+d,f+d+1)},t.prototype.clear=function(t,e,r,i){void 0===t&&(t=1),void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),this.gl.clearColor(t,r,e,i),this.gl.clear(this.gl.COLOR_BUFFER_BIT)},t.prototype.setTexture=function(t){this.renderState[this.renderState.length-1].texture=t},t.prototype.setColor=function(t){var e=this.renderState[this.renderState.length-1];e.color[0]=t,e.color[1]=t,e.color[2]=t,e.color[3]=t},t.prototype.setColorPoints=function(t,e,r,i){var s=this.renderState[this.renderState.length-1];s.color[0]=t,s.color[1]=e,s.color[2]=r,s.color[3]=i},t.prototype.setUvRect=function(t){this.renderState[this.renderState.length-1].uvRect=t},t.prototype.setRenderMode=function(t){var e=this.renderState[this.renderState.length-1];e.renderMode!=t&&(this.flushBatch(),e.renderMode=t)},t.prototype.saveState=function(t){void 0===t&&(t=!1);var s=this.renderState[this.renderState.length-1],n=t?{color:[i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE,i.Vec4.ONE],uvRect:new i.Rect(0,0,1,1),texture:this.blankTexture,renderMode:r.FILL}:s;this.renderState.push(e(e({},this.renderState[this.renderState.length-1]),n))},t.prototype.popState=function(){if(!(this.renderState.length<=1)){var t=this.renderState[this.renderState.length-1],e=this.renderState[this.renderState.length-2],r=!1;(r=r||t.renderMode!=e.renderMode)&&this.flushBatch(),this.renderState.pop()}},t.prototype.useTexture=function(t){for(var e=0;e<=this.currentTextureId;e++)if(this.activeTextures[e]==t)return e;return this.currentTextureId>=this.maxTextures&&this.flushBatch(),this.activeTextures[this.currentTextureId]=t,this.shader.setTexture(t.handle,this.currentTextureId),this.currentTextureId+=1,this.currentTextureId-1},t.prototype.flushBatch=function(){if(0!==this.spriteBuffer.currentIndicyIndex&&0!==this.spriteBuffer.currentVertIndex&&!1!==this.processingRender){var t=this.gl.TRIANGLES;switch(this.renderState[this.renderState.length-1].renderMode){case r.FILL:t=this.gl.TRIANGLES;break;case r.WIREFRAME:t=this.gl.LINE_STRIP}this.spriteBuffer.draw(t),this.spriteBuffer.clear();for(var e=0;e<this.maxTextures;e++)this.activeTextures[e]=null;this.currentTextureId=0,this.numFlushes+=1}},t.prototype.shouldFlush=function(){return this.spriteBuffer.currentVertIndex>=this.spriteBuffer.verts.length-1||this.spriteBuffer.currentVertIndex>=this.spriteBuffer.indices.length-1},t}();exports.Renderer2d=d;
},{"../math":"sYjz","./texture":"LCz5","./shader":"LQfK","../math/mat3":"gVZ7","./renderTexture":"oObx"}],"ATgh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this.deltaTime=0,this.startTime=0,this.stopTime=0}return t.prototype.start=function(){this.stopTime=0,this.startTime=performance.now()/1e3},t.prototype.stop=function(){this.stopTime=performance.now()/1e3,this.deltaTime=this.stopTime-this.startTime},t}();exports.Timer=t;
},{}],"DiVr":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./timer"),r=function(e){function r(){var t=e.call(this)||this;return t.framesPerSecond=0,t.frameCounter=0,t.runningTime=0,t}return t(r,e),r.prototype.update=function(){this.stop(),this.runningTime+=this.deltaTime,this.frameCounter+=1,this.runningTime>=1&&(this.framesPerSecond=this.frameCounter,this.runningTime=0,this.frameCounter=0),this.start()},r}(e.Timer);exports.FrameTimer=r;
},{"./timer":"ATgh"}],"gfsx":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function o(t){try{u(i.next(t))}catch(e){a(e)}}function s(t){try{u(i.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,s)}u((i=i.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./input/inputManager"),i=require("./graphics/renderer2d"),r=require("./utils/frameTimer"),a=require("./graphics/renderTexture"),o=function(){function o(t){this.animationFrameToken=null,this.canvas=document.getElementById(t),this.resize(),this.time=new r.FrameTimer,this.gl=this.canvas.getContext("webgl2",{antialias:!0}),o.input=new n.InputManager(this.canvas),this.gl.viewport(0,0,this.canvas.width,this.canvas.height);var e=new a.RenderTexture(this.gl);e.width=this.canvas.width,e.height=this.canvas.height,e.enable(),this.renderer2d=new i.Renderer2d(this.canvas,this.gl)}return Object.defineProperty(o.prototype,"input",{get:function(){return o.input},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){cancelAnimationFrame(this.animationFrameToken),o.input.destroy()},o.prototype.loadAssets=function(){return t(this,void 0,void 0,function(){return e(this,function(t){return[2]})})},o.prototype.launch=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.loadAssets()];case 1:return t.sent(),this.run(),[2]}})})},o.prototype.update=function(){},o.prototype.draw=function(){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},o.prototype.run=function(){var t=this;this.time.update(),this.update(),this.draw(),this.input.keyboard.update(),this.input.mouse.update(),this.animationFrameToken=requestAnimationFrame(function(){t.run()})},o.prototype.resize=function(){var t=this.canvas.clientWidth,e=this.canvas.clientHeight;this.canvas.width===t&&this.canvas.height===e||(this.canvas.width=t,this.canvas.height=e)},o}();exports.App=o;
},{"./input/inputManager":"MPCL","./graphics/renderer2d":"JNHK","./utils/frameTimer":"DiVr","./graphics/renderTexture":"oObx"}],"EfLs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../engine/math");exports.levels=[{tileSize:55,rows:8,cols:8,startTile:[6,4],map:[["0000","0000","0000","1424","0000","0000","0000","0000"],["0000","0000","0000","0000","0000","0000","0000","0000"],["0000","0000","0001","0001","0001","0001","0000","0000"],["1325","0000","0001","0001","0001","0001","0000","0000"],["0000","0000","0001","0001","0001","0001","0001","0000"],["0000","0000","0001","0001","0001","0103","0000","0000"],["0000","0000","0000","0000","0000","0000","0000","0000"],["0000","0000","0000","0000","0000","0000","0000","0000"]],zones:[new e.Rect(2,2,4,4)]},{tileSize:55,rows:8,cols:8,startTile:[6,4],map:[["0000","2324","0000","0000","1424","0000","0000","0000"],["0000","0000","0000","0000","0000","0000","0000","0000"],["0000","0000","0001","0001","0001","0001","0000","0000"],["1325","0000","0001","0001","0001","0001","0000","0000"],["0000","0000","0001","0001","0001","0001","0001","0000"],["0000","0000","0001","0001","0001","0103","0000","0000"],["0000","0000","0000","0000","0000","0000","0000","0000"],["0000","2000","0000","0000","0000","0000","0000","0000"]],zones:[new e.Rect(2,2,4,4)]}];
},{"../../engine/math":"sYjz"}],"wuKq":[function(require,module,exports) {
module.exports="https://aaronrcox.github.io/arcgl.ts/tile-base.bd51c170.png";
},{}],"NksG":[function(require,module,exports) {
module.exports="https://aaronrcox.github.io/arcgl.ts/NextLevelBtn.cc3521ea.png";
},{}],"pWGR":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var a,l,h=require("../../engine/app"),c=require("../../engine/math"),u=require("./levels"),d=s(require("./assets/tile-base.png")),p=s(require("./assets/NextLevelBtn.png")),f=require("../../engine/graphics/texture"),v={1:new c.Vec4(1,1,1,1),2:new c.Vec4(1,138/255,128/255,1),3:new c.Vec4(43/255,187/255,173/255,1),4:new c.Vec4(179/255,136/255,1,1),5:new c.Vec4(149/255,158/255,1,1),6:new c.Vec4(63/255,114/255,155/255,1)};!function(e){e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.UP=2]="UP",e[e.RIGHT=3]="RIGHT",e[e.DOWN=4]="DOWN"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.EMPTY=1]="EMPTY",e[e.SOLID=2]="SOLID",e[e.CORNER=3]="CORNER",e[e.EMITTER=4]="EMITTER",e[e.RECEIVER=5]="RECEIVER"}(l||(l={}));var y=function(){function e(e){void 0===e&&(e=null),this.parent=null,this.children=[],this.transform=c.Mat3.identity(),this.lastTrasform=null,this._isDirty=!1,this._dirtyCheck=!1,this.setParent(e)}return Object.defineProperty(e.prototype,"globalTransform",{get:function(){return this.parent?c.Mat3.mul(this.transform,this.parent.globalTransform):this.transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),e.prototype.update=function(e){var t;this._dirtyCheck&&(this._isDirty=0==(null===(t=this.lastTrasform)||void 0===t?void 0:t.equal(this.transform)),this.lastTrasform=this.transform.copy())},e.prototype.draw=function(e){},e.prototype.setParent=function(e){var t,r;null===(t=this.parent)||void 0===t||t.removeChild(this),this.parent=e,null===(r=this.parent)||void 0===r||r.addChild(this)},e.prototype.checkForChangesPerFrame=function(e){this._dirtyCheck=e,this._isDirty=!0},e.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>=0&&this.children.splice(t,1)},e.prototype.addChild=function(e){this.children.indexOf(e)<0&&this.children.push(e)},e}(),m=function(t){function r(e){var r=t.call(this)||this;return r.tileTextures={},r.tiles=[],r.movingTiles=new Set,r.data=e,r}return e(r,t),r.prototype.posToIndex=function(e){var t=Math.floor(e.x/this.data.tileSize),r=Math.floor(e.y/this.data.tileSize);return new c.Vec2(t,r)},r.prototype.indexToPos=function(e){var t=.5*this.data.tileSize,r=Math.floor(e.x*this.data.tileSize+t),i=Math.floor(e.y*this.data.tileSize+t);return new c.Vec2(r,i)},r.prototype.inZone=function(e){var t,r;try{for(var n=i(this.data.zones),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.contains(e))return s}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return null},r.prototype.findTileAtIndex=function(e){var t,r;try{for(var n=i(this.tiles),o=n.next();!o.done;o=n.next()){var s=o.value,a=this.posToIndex(s.transform.pos);if(a.x===e.x&&a.y==e.y)return s}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},r.prototype.update=function(e){t.prototype.update.call(this,e)},r.prototype.draw=function(){},r}(y),w=function(t){function r(e,r,i,n,o){var s=t.call(this,e)||this;return s.shapeGeometry=null,s.isMovingToTarget=!1,s.level=e,s.lightId=r,s.shapeId=i,s.dirId=n,s.colorId=o,s}return e(r,t),r.prototype.update=function(e){t.prototype.update.call(this,e),this.moveToTargetPos(e),this.updateShapeGeometry()},r.prototype.draw=function(e){},r.prototype.drawShapeGeometry=function(e){this.shapeGeometry&&(e.setColor(new c.Vec4(1,1,1,1)),e.drawLines(this.shapeGeometry.points,2))},r.prototype.updateShapeGeometry=function(){if(this.shapeGeometry){var e=this.globalTransform,t=r.createTileShape(this.shapeId,e.pos.x,e.pos.y,.6*this.level.data.tileSize,.6*this.level.data.tileSize,r.tileRotation(this.dirId));this.shapeGeometry.points=t.points}},r.prototype.moveToTargetPos=function(e){if(!1!==this.isMovingToTarget){var t=this.level.data.tileSize,r=c.Vec2.sub(this.targetPos,this.transform.pos).normalise();this.transform.move(r.x*e*t*6,r.y*e*t*6),Math.abs(this.transform.pos.x-this.targetPos.x)<4&&this.transform.setPosX(this.targetPos.x),Math.abs(this.transform.pos.y-this.targetPos.y)<4&&this.transform.setPosY(this.targetPos.y),this.transform.pos.x==this.targetPos.x&&this.transform.pos.y==this.targetPos.y&&(this.isMovingToTarget=!1,this.onMoveFinished&&this.onMoveFinished(this))}},r.prototype.move=function(e){var t=this.level.posToIndex(this.transform.pos).add(e);this.targetPos=this.level.indexToPos(t),this.isMovingToTarget=!0},r.prototype.moveWith=function(e,t){var r=this.level.posToIndex(this.transform.pos);return(r.y==t.y&&0!==e.x||r.x==t.x&&0!==e.y)&&(this.move(e),!0)},r.tileRotation=function(e){switch(e){case a.RIGHT:return 0;case a.DOWN:return Math.PI/2;case a.LEFT:return Math.PI;case a.UP:return Math.PI+Math.PI/2;default:return 0}},r.createTileShape=function(e,t,r,i,n,o){switch(e){case l.SOLID:return c.Shape.makeBox(t,r,i,n,o,!1);case l.EMITTER:case l.RECEIVER:return c.Shape.makeBox(t,r,i,n,o,!0);case l.CORNER:return c.Shape.makeAngleTriangle(t,r,i,n,o);default:return null}},r.tileGeometries=[],r}(y),x=function(t){function r(e,r,i,n,o){var s,a=t.call(this,e,r,i,n,o)||this,l=w.tileRotation(n);return a.shapeGeometry=w.createTileShape(a.shapeId,a.transform.pos.x,a.transform.pos.y,a.level.data.tileSize,a.level.data.tileSize,l),(null===(s=a.shapeGeometry)||void 0===s?void 0:s.points.length)>0&&(a.checkForChangesPerFrame(!0),w.tileGeometries.push(a.shapeGeometry)),a}return e(r,t),r.prototype.draw=function(e){var t=this.globalTransform,r=t.pos,i=t.scale,n=this.level.data.tileSize*i.x,o=this.level.data.tileSize*i.y,s=w.tileRotation(this.dirId);e.setColor(new c.Vec4(1,1,1,.5)),e.setTexture(this.level.tileTextures[1]),e.darwRect(r.x,r.y,n,o,s,.5,.5),this.drawShapeGeometry(e)},r}(w),T=function(t){function r(e,r,i,n,o){var s,a=t.call(this,e,r,i,n,o)||this;a.lightRays=[],a.allLightRays=[];var l=w.tileRotation(a.dirId);return a.shapeGeometry=w.createTileShape(a.shapeId,a.transform.pos.x,a.transform.pos.y,a.level.data.tileSize,a.level.data.tileSize,l),(null===(s=a.shapeGeometry)||void 0===s?void 0:s.points.length)>0&&(a.checkForChangesPerFrame(!0),w.tileGeometries.push(a.shapeGeometry)),a}return e(r,t),Object.defineProperty(r.prototype,"color",{get:function(){var e;return null!==(e=v[this.colorId])&&void 0!==e?e:new c.Vec4(1,1,1,1)},enumerable:!0,configurable:!0}),r.prototype.update=function(e){t.prototype.update.call(this,e)},r.prototype.updateLights=function(e){var t,r=this.globalTransform,i=this.dirToVec(this.dirId),n=c.Vec2.negate(i).scale(6);if(r.move(n.x,n.y),this.shapeId==l.EMITTER){this.lightRays=this.makeRayLine(r.pos,i,4,3),this.allLightRays=[];for(var s=0;s<this.lightRays.length;s++){var a=this.lightRays[s];a.castToShapes(w.tileGeometries,10),(t=this.allLightRays).push.apply(t,o(a.rays()))}}},r.prototype.draw=function(e){t.prototype.draw.call(this,e);var r=this.globalTransform,i=r.pos,n=r.scale,o=this.level.data.tileSize*n.x,s=this.level.data.tileSize*n.y;e.saveState(!0);var a=new c.Vec4(this.color.x,this.color.y,this.color.z,1);e.setColor(a),e.darwRect(i.x,i.y,o/2,s/2,0,.5,.5),this.drawLight(e),e.setColor(new c.Vec4(0,0,0,1)),this.drawShapeGeometry(e),e.popState()},r.prototype.drawLight=function(e){var t,r,n,o,s=new c.Vec4(this.color.x,this.color.y,this.color.z,.5);e.saveState(),e.setColor(s);try{for(var a=i(this.allLightRays),l=a.next();!l.done;l=a.next()){var h=l.value,u=Math.min(null!==(o=null===(n=h.hit)||void 0===n?void 0:n.distance)&&void 0!==o?o:2e3),d=h.pos,p=c.Vec2.mul(h.dir,{x:u,y:u}).add(h.pos);e.drawLine(d.x,d.y,p.x,p.y,3)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}e.popState()},r.prototype.dirToVec=function(e){switch(e){case a.LEFT:return new c.Vec2(-1,0);case a.UP:return new c.Vec2(0,-1);case a.RIGHT:return new c.Vec2(1,0);case a.DOWN:return new c.Vec2(0,1);default:return new c.Vec2(0,0)}},r.prototype.makeRayLine=function(e,t,r,i){for(var n=[],o=c.Vec2.perpendicular(t),s=Math.ceil(r/2),a=Math.ceil(r/2),l=-s;l<=a;l++)n.push(new c.Ray(c.Vec2.add(e,c.Vec2.scale(o,l*i)),t));return n},r}(w),g=function(n){function o(e){var t=n.call(this,e)||this;return t.currentLevelIndex=0,t.tileTextures={},t.elapsedTime=0,t.world=new y(null),t.world.transform.setPos(t.canvas.width/2,t.canvas.height/2),t.currentLevelIndex=0,t.loadLevelbyIndex(0),t}return e(o,n),o.prototype.loadAssets=function(){return t(this,void 0,Promise,function(){var e,t=this;return r(this,function(r){switch(r.label){case 0:return[4,n.prototype.loadAssets.call(this)];case 1:return r.sent(),this.tileTextures[0]=null,this.tileTextures[l.EMPTY]=new f.Texture2D(this.gl),this.tileTextures[l.EMPTY].load(d.default),[4,(e=new f.Texture2D(this.gl)).load(p.default)];case 2:return r.sent(),this.nextLevelBtn=new L(this.gl,e),this.nextLevelBtn.xPos=this.canvas.width-e.width-10,this.nextLevelBtn.yPos=100,this.nextLevelBtn.onClick=function(){t.currentLevelIndex+=1,t.loadLevelbyIndex(t.currentLevelIndex)},[2]}})})},o.prototype.loadLevelbyIndex=function(e){this.currentLevel=new m(u.levels[e]),this.currentLevel.tileTextures=this.tileTextures,this.currentLevel.setParent(this.world),w.tileGeometries=[],this.loadLevel()},o.prototype.update=function(){var e,t,r,o;n.prototype.update.call(this);var s=this.input.keyboard,a=new c.Vec2(0,0);this.elapsedTime+=this.time.deltaTime,s.wasKeyPressed(38)?a.y=-1:s.wasKeyPressed(40)?a.y=1:s.wasKeyPressed(37)?a.x=-1:s.wasKeyPressed(39)&&(a.x=1),0===a.x&&0===a.y||this.moveActiveTile(a);try{for(var l=i(this.currentLevel.tiles),h=l.next();!h.done;h=l.next()){(p=h.value).update(this.time.deltaTime)}}catch(f){e={error:f}}finally{try{h&&!h.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}try{for(var u=i(this.currentLevel.tiles),d=u.next();!d.done;d=u.next()){var p;(p=d.value)instanceof T&&p.updateLights(this.time.deltaTime)}}catch(v){r={error:v}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}this.nextLevelBtn.update(this.time.deltaTime,this.input.mouse)},o.prototype.draw=function(){n.prototype.draw.call(this),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.renderer2d.begin(),this.drawBackgroundGrid(),this.drawTiles(),this.nextLevelBtn.draw(this.renderer2d),this.renderer2d.end()},o.prototype.drawBackgroundGrid=function(){var e=this.currentLevel.globalTransform,t=e.pos,r=e.scale,i=this.currentLevel.data.tileSize*r.x,n=this.currentLevel.data.tileSize*r.y,o=this.currentLevel.data.cols,s=this.currentLevel.data.rows;this.renderer2d.saveState(!0);for(var a=new c.Vec4(1,1,1,.2),l=[new c.Vec4(a.x,a.y,a.z,0),new c.Vec4(a.x,a.y,a.z,a.w),new c.Vec4(a.x,a.y,a.z,a.w),new c.Vec4(a.x,a.y,a.z,0)],h=2;h<=o-2;h++){var u=[new c.Vec2(t.x+h*i,t.y+0*n),new c.Vec2(t.x+h*i,t.y+2*n),new c.Vec2(t.x+h*i,t.y+(s-2)*n),new c.Vec2(t.x+h*i,t.y+(s-0)*n)];this.renderer2d.drawLines(u,1,l)}for(h=2;h<=s-2;h++){u=[new c.Vec2(t.x+0*i,t.y+h*n),new c.Vec2(t.x+2*i,t.y+h*n),new c.Vec2(t.x+(o-2)*i,t.y+h*n),new c.Vec2(t.x+(o-0)*i,t.y+h*n)];this.renderer2d.drawLines(u,1,l)}this.renderer2d.popState()},o.prototype.drawTiles=function(){this.renderer2d.saveState(!0);for(var e=0;e<this.currentLevel.tiles.length;e++){this.currentLevel.tiles[e].draw(this.renderer2d)}this.renderer2d.popState()},o.prototype.moveActiveTile=function(e){var t,r,n=this;if(!(this.currentLevel.movingTiles.size>0||null===this.currentLevel.activeTile)){var o=this.currentLevel.posToIndex(this.currentLevel.activeTile.transform.pos),s=c.Vec2.add(o,e),a=this.currentLevel.inZone(s),l=function(e){n.currentLevel.movingTiles.delete(e),e.onMoveFinished=null;var t=n.currentLevel.posToIndex(e.transform.pos);(null==a?void 0:a.contains(t))||(n.currentLevel.activeTile=e)};if(this.currentLevel.activeTile.move(e),this.currentLevel.activeTile.onMoveFinished=l,this.currentLevel.activeTile=null,null!==a)try{for(var h=i(this.currentLevel.tiles),u=h.next();!u.done;u=h.next()){var d=u.value,p=this.currentLevel.posToIndex(d.transform.pos);a.contains(p)&&d.moveWith(e,o)&&(this.currentLevel.movingTiles.add(d),d.onMoveFinished=l)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}}},o.prototype.loadLevel=function(){var e=this.currentLevel,t=e.data.map,r=e.data.tileSize,i=r*e.data.rows,n=r*e.data.cols;e.transform.move(-i/2,-n/2);for(var o=e.data.cols,s=e.data.rows,a=0;a<s;a++)for(var l=0;l<o;l++){var h=parseInt(t[a][l][0]),c=parseInt(t[a][l][1]),u=parseInt(t[a][l][2]),d=parseInt(t[a][l][3]),p=this.createTile(e,l,a,h,d,c,u);p&&e.tiles.push(p),e.data.startTile[0]==l&&e.data.startTile[1]==a&&(e.activeTile=p)}},o.prototype.createTile=function(e,t,r,i,n,o,s){var a=e.data.tileSize,h=a/2,u=null;switch(n){case l.NONE:return;case l.EMPTY:case l.CORNER:case l.SOLID:u=new x(e,i,n,o,s);break;case l.RECEIVER:case l.EMITTER:u=new T(e,i,n,o,s);break;default:return}var d=new c.Vec2(t*a+h,r*a+h);return u.transform.setPos(d.x,d.y),u},o}(h.App);exports.LightBender=g;var L=function(){function e(e,t){this.gl=e,this.texture=t,this.mouseOver=!1}return e.prototype.update=function(e,t){var r=t.pos.x,i=t.pos.y;this.mouseOver=r>this.xPos&&r<this.xPos+this.texture.width&&i>this.yPos&&i<this.yPos+this.texture.height,this.mouseOver&&t.leftButtonDown&&this.onClick&&this.onClick()},e.prototype.draw=function(e){e.saveState(!0),e.setTexture(this.texture),e.setColor(this.mouseOver?new c.Vec4(1,1,1,.8):new c.Vec4(1,1,1,.6)),e.darwRect(this.xPos,this.yPos,this.texture.width,this.texture.height,0,0,0),e.popState()},e}();
},{"../../engine/app":"gfsx","../../engine/math":"sYjz","./levels":"EfLs","./assets/tile-base.png":"wuKq","./assets/NextLevelBtn.png":"NksG","../../engine/graphics/texture":"LCz5"}],"ZDti":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(a,o){function i(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,s)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../../engine/app"),s=require("../../engine/math"),l=function(n){function i(t){var e=n.call(this,t)||this;return e.polygons=[],e.rays=[],e.rayHits=[],e.allRays=[],e.elapsedTime=0,e}return t(i,n),i.prototype.loadAssets=function(){return e(this,void 0,Promise,function(){var t,e,a,o,i,l,h,c,u;return r(this,function(r){switch(r.label){case 0:return[4,n.prototype.loadAssets.call(this)];case 1:return r.sent(),t=this.canvas.width,e=this.canvas.height,a=t/1.5,o=e/1.5,i=Math.min(a,o),l=t/2-i/2,h=t/2+i/2,c=e/2-i/2,u=e/2+i/2,this.polygons.push(s.Shape.makeCircle(t/2-i/4,e/2,i/10,4)),this.polygons.push(s.Shape.makeCircle(t/2+i/4,e/2,i/10,4)),this.polygons.push(s.Shape.makeCircle(t/2,e/2-i/4,i/10,4)),this.polygons.push(s.Shape.makeCircle(t/2,e/2+i/4,i/10,4)),this.polygons.push(s.Shape.makeBox(this.canvas.width/2,this.canvas.height/2,h-l,u-c,0)),this.polygons.push(s.Shape.makeBox(this.canvas.width/2,this.canvas.height/2,t,e,0)),this.rays=[],[2]}})})},i.prototype.update=function(){var t,e;n.prototype.update.call(this),this.elapsedTime+=this.time.deltaTime;var r=.25*this.elapsedTime;this.rays=this.makeRayLine(this.input.mouse.pos,new s.Vec2(Math.cos(r),Math.sin(r)),10,3),this.rayHits=[],this.allRays=[];for(var o=0;o<this.rays.length;o++){var i=this.rays[o];i.castToShapes(this.polygons,5),(t=this.rayHits).push.apply(t,a(i.hits())),(e=this.allRays).push.apply(e,a(i.rays()))}},i.prototype.draw=function(){var t,e;n.prototype.draw.call(this),this.renderer2d.begin();try{for(var r=o(this.polygons),a=r.next();!a.done;a=r.next()){var i=a.value;this.drawShape(i)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.drawRays(this.allRays),this.renderer2d.end()},i.prototype.drawShape=function(t){this.renderer2d.saveState(),this.renderer2d.drawLines(t.points,1),this.renderer2d.popState()},i.prototype.updateRayPositions=function(t,e){for(var r=0;r<this.rays.length;r++){var n=this.rays[r];n.pos.x=t,n.pos.y=e}},i.prototype.drawRays=function(t){var e,r,n,a;try{for(var i=o(t),l=i.next();!l.done;l=i.next()){var h=l.value,c=h.pos,u=Math.min(null!==(a=null===(n=h.hit)||void 0===n?void 0:n.distance)&&void 0!==a?a:2e3),p=s.Vec2.mul(h.dir,{x:u,y:u}).add(h.pos);this.renderer2d.drawLine(c.x,c.y,p.x,p.y,1)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},i.prototype.drawRayHits=function(t){var e,r;try{for(var n=o(t),a=n.next();!a.done;a=n.next()){var i=a.value;this.renderer2d.drawLine(i.incomingRay.pos.x,i.incomingRay.pos.y,i.point.x,i.point.y,1)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},i.prototype.makeRayFan=function(t,e,r){for(var n=[],a=0;a<r;a++){var o=2*Math.PI/r*a;n.push(new s.Ray(new s.Vec2(t,e),new s.Vec2(Math.sin(o),-Math.cos(o))))}return n},i.prototype.makeRaysToShapes=function(t,e,r){var n,a,i,l,h=new s.Vec2(t,e),c=[];try{for(var u=o(r),p=u.next();!p.done;p=u.next()){var y=p.value;try{for(var f=(i=void 0,o(y.points)),d=f.next();!d.done;d=f.next()){var v=d.value;c.push(new s.Ray(h,s.Vec2.sub(v,h).normalise()))}}catch(w){i={error:w}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(i)throw i.error}}}}catch(m){n={error:m}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return c},i.prototype.makeRayLine=function(t,e,r,n){for(var a=[],o=s.Vec2.perpendicular(e),i=-Math.floor(r/2),l=Math.ceil(r/2),h=i;h<l;h++)a.push(new s.Ray(s.Vec2.add(t,s.Vec2.scale(o,h*n)),e));return a},i}(i.App);exports.RayCastingDemo=l;
},{"../../engine/app":"gfsx","../../engine/math":"sYjz"}],"OeKX":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(u,a)}c((r=r.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../engine/app"),o=require("../../engine/math"),i=function(r){function i(t){return r.call(this,t)||this}return t(i,r),i.prototype.loadAssets=function(){return e(this,void 0,Promise,function(){return n(this,function(t){switch(t.label){case 0:return[4,r.prototype.loadAssets.call(this)];case 1:return t.sent(),[2]}})})},i.prototype.update=function(){r.prototype.update.call(this)},i.prototype.draw=function(){r.prototype.draw.call(this),this.renderer2d.begin();var t=[new o.Vec2(100,100),new o.Vec2(200,100),this.input.mouse.pos];this.renderer2d.drawLines(t,20),this.renderer2d.drawLine(300,300,400,400,6),this.renderer2d.end()},i}(r.App);exports.LineRenderingDemo=i;
},{"../../engine/app":"gfsx","../../engine/math":"sYjz"}],"dnao":[function(require,module,exports) {
module.exports="https://aaronrcox.github.io/arcgl.ts/prop-crate-plain.a8a900c8.png";
},{}],"w7Ln":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{h(n.next(e))}catch(t){s(t)}}function a(e){try{h(n.throw(e))}catch(t){s(t)}}function h(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=n(require("../../assets/prop-crate-plain.png")),s=require("../../engine/graphics/texture"),o=require("../../engine/app"),a=require("../../engine/math"),h=require("../../engine/graphics/renderTexture"),u=function(n){function o(e){var t=n.call(this,e)||this;return t.rot=0,t}return e(o,n),o.prototype.loadAssets=function(){return t(this,void 0,Promise,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,n.prototype.loadAssets.call(this)];case 1:return t.sent(),this.image=new s.Texture2D(this.gl),this.image.load(i.default),this.renderTexture=new h.RenderTexture(this.gl),e=Math.min(this.canvas.width/4,256),this.renderTexture.load(e,e),[2]}})})},o.prototype.update=function(){n.prototype.update.call(this),this.rot+=this.time.deltaTime},o.prototype.draw=function(){n.prototype.draw.call(this);var e=this.renderTexture.width;this.renderTexture.enable(),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.renderer2d.begin(),this.renderer2d.saveState(!0),this.renderer2d.setTexture(this.image),this.renderer2d.setColor(new a.Vec4(1,1,1,1)),this.renderer2d.darwRect(e/2,e/2,.75*e,.75*e,this.rot,.5,.5),this.renderer2d.drawLines(a.Shape.makeBox(e/2,e/2,e-2,e-2,0).points,2),this.renderer2d.popState(),this.renderer2d.end(),this.renderTexture.disable(),this.renderer2d.begin(),this.renderer2d.saveState(!0),this.renderer2d.setTexture(this.renderTexture),this.renderer2d.setColor(new a.Vec4(1,1,1,1)),this.renderer2d.darwRect(this.canvas.width/2-e-10,this.canvas.height/2,e,e,0,.5,.5),this.renderer2d.setColor(new a.Vec4(0,0,0,1)),this.renderer2d.darwRect(this.canvas.width/2,this.canvas.height/2,e,e,0,.5,.5),this.renderer2d.setColor(new a.Vec4(1,0,0,1)),this.renderer2d.darwRect(this.canvas.width/2+e+10,this.canvas.height/2,e,e,0,.5,.5),this.renderer2d.popState(),this.renderer2d.end()},o}(o.App);exports.RenderTextureDemo=u;
},{"../../assets/prop-crate-plain.png":"dnao","../../engine/graphics/texture":"LCz5","../../engine/app":"gfsx","../../engine/math":"sYjz","../../engine/graphics/renderTexture":"oObx"}],"lXfC":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{d(n.next(e))}catch(t){o(t)}}function a(e){try{d(n.throw(e))}catch(t){o(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=n(require("../../assets/prop-crate-plain.png")),o=require("../../engine/graphics/texture"),s=require("../../engine/app"),a=require("../../engine/math"),d=function(n){function s(e){var t=n.call(this,e)||this;return t.rot=0,t}return e(s,n),s.prototype.loadAssets=function(){return t(this,void 0,Promise,function(){return r(this,function(e){switch(e.label){case 0:return[4,n.prototype.loadAssets.call(this)];case 1:return e.sent(),this.image=new o.Texture2D(this.gl),this.image.load(i.default),[2]}})})},s.prototype.update=function(){n.prototype.update.call(this),this.rot+=this.time.deltaTime},s.prototype.draw=function(){n.prototype.draw.call(this);var e=this.canvas.width,t=this.canvas.height,r=e/1.5,i=t/1.5,o=Math.min(r,i)-75,s=e/2-o/2,d=e/2+o/2,c=t/2-o/2,h=t/2+o/2;this.renderer2d.begin();var u=75,l=75;this.renderer2d.saveState(!0),this.renderer2d.setTexture(this.image),this.renderer2d.setColor(new a.Vec4(1,1,1,1)),this.renderer2d.darwRect(s,c,u,l,this.rot,0,0),this.renderer2d.darwRect((s+d)/2,c,u,l,this.rot,.5,0),this.renderer2d.darwRect(d,c,u,l,this.rot,1,0),this.renderer2d.darwRect(s,(c+h)/2,u,l,this.rot,0,.5),this.renderer2d.darwRect((s+d)/2,(c+h)/2,u,l,this.rot,.5,.5),this.renderer2d.darwRect(d,(c+h)/2,u,l,this.rot,1,.5),this.renderer2d.darwRect(s,h,u,l,this.rot,0,1),this.renderer2d.darwRect((s+d)/2,h,u,l,this.rot,.5,1),this.renderer2d.darwRect(d,h,u,l,this.rot,1,1),this.renderer2d.popState(),this.renderer2d.saveState(),this.renderer2d.setColor(new a.Vec4(1,1,1,.5));this.renderer2d.drawLine(s,c,d,c,3),this.renderer2d.drawLine(s,(h+c)/2,d,(h+c)/2,3),this.renderer2d.drawLine(s,h,d,h,3),this.renderer2d.drawLine(s,c,s,h,3),this.renderer2d.drawLine((s+d)/2,c,(s+d)/2,h,3),this.renderer2d.drawLine(d,c,d,h,3),this.renderer2d.end()},s}(s.App);exports.RectRotationDemo=d;
},{"../../assets/prop-crate-plain.png":"dnao","../../engine/graphics/texture":"LCz5","../../engine/app":"gfsx","../../engine/math":"sYjz"}],"FEq7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./renderTexture"),r=function(){function r(){}return Object.defineProperty(r,"current",{get:function(){var r=e.RenderTexture.rendetTargetStack.length;return e.RenderTexture.rendetTargetStack[r-1]},enumerable:!0,configurable:!0}),r}();exports.RenderTarget=r;
},{"./renderTexture":"oObx"}],"PqLk":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),e=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function s(t){try{h(r.next(t))}catch(e){o(e)}}function a(t){try{h(r.throw(t))}catch(e){o(e)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}h((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var o,s,a=n(require("../../assets/prop-crate-plain.png")),h=require("../../engine/graphics/texture"),l=require("../../engine/app"),u=require("../../engine/math"),c=require("../../engine/graphics/renderTarget"),d=require("../../engine/input/mouseInput"),p=n(require("./assets/tile-base.png"));!function(t){t.NONE="0",t.LEFT="1",t.UP="2",t.RIGHT="3",t.DOWN="4"}(o||(o={})),function(t){t.EMPTY="0",t.SOLID="1",t.CORNER="2",t.EMITTER="3",t.RECEIVER="4"}(s||(s={}));var f={0:new u.Vec4(1,1,1,1),1:new u.Vec4(1,138/255,128/255,1),2:new u.Vec4(43/255,187/255,173/255,1),3:new u.Vec4(179/255,136/255,1,1),4:new u.Vec4(149/255,158/255,1,1),5:new u.Vec4(63/255,114/255,155/255,1)},y=function(){function t(e,i,r){this.level=null,this.data=null,this.pos=new u.Vec2,this.rot=Math.PI,this.collider=null,this.level=e,this.data=i,this.pos=r,this.rot=t.tileRotation(this.data.dirId),this.level.tiles.push(this)}return Object.defineProperty(t.prototype,"index",{get:function(){return this.level.posToIndex(this.pos)},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.level.moveTile(this,this.index,this.index),this.updateCollider()},t.prototype.updateCollider=function(){this.collider=t.createTileShape(this.data.shapeId,this.pos.x,this.pos.y,this.level.tWidth,this.level.tHeight,this.rot)},t.prototype.draw=function(e){e.saveState(!0),e.setTexture(t.textures[0]),e.darwRect(this.pos.x,this.pos.y,this.level.tWidth,this.level.tHeight,0,.5,.5),this.drawCollider(e),e.popState()},t.prototype.drawCollider=function(t){var e;if(this.collider){t.setColor(null!==(e=f[this.data.colorId])&&void 0!==e?e:new u.Vec4(1,0,1,1));for(var i=0;i<this.collider.points.length-1;i++){var r=this.collider.points[i],n=this.collider.points[(i+1)%this.collider.points.length];t.drawLine(r.x,r.y,n.x,n.y,2)}}},t.prototype.move=function(t){var e=this.index;this.pos.add(t);var i=this.index;e.x==i.x&&e.y==i.y||this.level.moveTile(this,e,i)},t.createTileShape=function(t,e,i,r,n,o){switch(t){case s.SOLID:return u.Shape.makeBox(e,i,r,n,o,!1);case s.EMITTER:case s.RECEIVER:return u.Shape.makeBox(e,i,r,n,o,!0);case s.CORNER:return u.Shape.makeAngleTriangle(e,i,r,n,o);default:return null}},t.tileRotation=function(t){switch(t){case o.RIGHT:return 0;case o.DOWN:return Math.PI/2;case o.LEFT:return Math.PI;case o.UP:return Math.PI+Math.PI/2;default:return 0}},t.textures=[],t}(),w=function(){function t(){this.grid={},this.tiles=[],this.rows=8,this.cols=8,this.tWidth=8,this.tHeight=8,this.pos=new u.Vec2,this.mouseHoverIndex=new u.Vec2,this.tWidth=55,this.tHeight=55,this.pos=new u.Vec2(c.RenderTarget.current.width/2-this.tWidth*this.cols*.5,c.RenderTarget.current.height/2-this.tHeight*this.rows*.5);for(var t=0;t<this.rows;t++){this.grid[t]={};for(var e=0;e<this.cols;e++)this.grid[t][e]=new Set}}return t.prototype.update=function(){this.mouseHoverIndex=this.posToIndex(l.App.input.mouse.pos),l.App.input.mouse.wasButtonPressed(d.MOUSE.LEFT)&&this.createTile("2530",this.mouseHoverIndex),l.App.input.mouse.wasButtonPressed(d.MOUSE.RIGHT)&&this.destroyTileAt(this.mouseHoverIndex),this.updateTiles()},t.prototype.updateTiles=function(){var t,e;try{for(var i=r(this.tiles),n=i.next();!n.done;n=i.next()){n.value.update()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.draw=function(t){var e,i;if(t.saveState(!0),null!==this.mouseHoverIndex){var n=this.indexToPos(this.mouseHoverIndex);t.setColor(new u.Vec4(1,1,1,.1)),t.darwRect(n.x,n.y,this.tWidth,this.tHeight,0,.5,.5)}var o=new u.Vec4(1,1,1,.2);this.drawBackgroundGrid(t,o);try{for(var s=r(this.tiles),a=s.next();!a.done;a=s.next()){a.value.draw(t)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}t.popState()},t.prototype.createTile=function(t,e){if(this.indexInBounds(e)){var i={shapeId:t[0],colorId:t[1],dirId:t[2],LightId:t[3]},r=new y(this,i,this.indexToPos(e));return console.log(r.data),r}},t.prototype.destroyTileAt=function(t){var e,i;if(this.indexInBounds(t))try{for(var n=r(this.grid[t.y][t.x]),o=n.next();!o.done;o=n.next()){var s=o.value;this.grid[t.y][t.x].delete(s),this.tiles.splice(this.tiles.indexOf(s),1)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.moveTile=function(t,e,i){e&&this.indexInBounds(e)&&this.grid[e.y][e.x].delete(t),i&&this.indexInBounds(i)&&this.grid[i.y][i.x].add(t)},t.prototype.drawBackgroundGrid=function(t,e){t.saveState(!0);for(var i=new u.Vec4(e.x,e.y,e.z,e.w),r=[new u.Vec4(i.x,i.y,i.z,0),new u.Vec4(i.x,i.y,i.z,i.w),new u.Vec4(i.x,i.y,i.z,i.w),new u.Vec4(i.x,i.y,i.z,0)],n=this.pos,o=this.tWidth,s=this.tHeight,a=this.cols,h=this.rows,l=0;l<=a;l++){var c=[new u.Vec2(n.x+l*o,n.y+0*s),new u.Vec2(n.x+l*o,n.y+2*s),new u.Vec2(n.x+l*o,n.y+(h-2)*s),new u.Vec2(n.x+l*o,n.y+(h-0)*s)];t.drawLines(c,1,r)}for(l=0;l<=h;l++){c=[new u.Vec2(n.x+0*o,n.y+l*s),new u.Vec2(n.x+2*o,n.y+l*s),new u.Vec2(n.x+(a-2)*o,n.y+l*s),new u.Vec2(n.x+(a-0)*o,n.y+l*s)];t.drawLines(c,1,r)}t.popState()},t.prototype.posToIndex=function(t){var e=new u.Vec2(Math.floor((t.x-this.pos.x)/this.tWidth),Math.floor((t.y-this.pos.y)/this.tHeight));return this.indexInBounds(e)?e:null},t.prototype.indexToPos=function(t){return new u.Vec2(t.x*this.tWidth+this.pos.x+.5*this.tWidth,t.y*this.tHeight+this.pos.y+.5*this.tHeight)},t.prototype.indexInBounds=function(t){return t&&t.x>=0&&t.x<this.cols&&t.y>=0&&t.y<this.rows},t}(),x=function(r){function n(t){var e=r.call(this,t)||this;return e.levelIndex=0,e}return t(n,r),n.prototype.loadAssets=function(){return e(this,void 0,Promise,function(){return i(this,function(t){switch(t.label){case 0:return[4,r.prototype.loadAssets.call(this)];case 1:return t.sent(),this.image=new h.Texture2D(this.gl),this.image.load(a.default),y.textures[0]=new h.Texture2D(this.gl),y.textures[0].load(p.default),this.level=new w,[2]}})})},n.prototype.update=function(){r.prototype.update.call(this),this.level.update()},n.prototype.draw=function(){r.prototype.draw.call(this),this.renderer2d.begin(),this.level.draw(this.renderer2d),this.renderer2d.end()},n}(l.App);exports.LightBenderEditor=x;
},{"../../assets/prop-crate-plain.png":"dnao","../../engine/graphics/texture":"LCz5","../../engine/app":"gfsx","../../engine/math":"sYjz","../../engine/graphics/renderTarget":"FEq7","../../engine/input/mouseInput":"vCX4","./assets/tile-base.png":"wuKq"}],"coan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./lightBender"),r=require("./rayCasting"),n=require("./lineRendering"),t=require("./renderTextureDemo"),i=require("./rectRotation"),o=require("../engine/app"),u=require("./lightBender/editor");function a(a,d){switch(d){case"LightBender":return new e.LightBender(a);case"LightBenderEditor":return new u.LightBenderEditor(a);case"RayCastingDemo":return new r.RayCastingDemo(a);case"LineRenderingDemo":return new n.LineRenderingDemo(a);case"RectRotationDemo":return new i.RectRotationDemo(a);case"RenderTextureDemo":return new t.RenderTextureDemo(a);default:return new o.App(a)}}exports.default=a;
},{"./lightBender":"pWGR","./rayCasting":"ZDti","./lineRendering":"OeKX","./renderTextureDemo":"w7Ln","./rectRotation":"lXfC","../engine/app":"gfsx","./lightBender/editor":"PqLk"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"npqE":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var t,e=arguments[3],r=require("process");!function(t){!function(n){var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=u(t);function u(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===i.Reflect?i.Reflect=t:o=u(i.Reflect,o),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,a={__proto__:[]}instanceof Array,f=!u&&!a,c={create:u?function(){return I(Object.create(null))}:a?function(){return I({__proto__:null})}:function(){return I({})},has:f?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:f?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},s=Object.getPrototypeOf(Function),h="object"==typeof r&&r.env&&!1,y=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,u)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function u(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new y}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,l=new(h||"function"!=typeof WeakMap?function(){var t=16,r=c.create(),n=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){var r=o(t,!0);return r[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+a()}while(c.has(r,t));return r[t]=!0,t}function o(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function u(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(){var e=function(t){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):u(new Uint8Array(t),t);return u(new Array(t),t)}(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var i=e[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function v(t,e,r){var n=l.get(t);if(k(n)){if(!r)return;n=new y,l.set(t,n)}var i=n.get(e);if(k(i)){if(!r)return;i=new y,n.set(e,i)}return i}function _(t,e,r){var n=v(e,r,!1);return!k(n)&&!!n.has(t)}function d(t,e,r){var n=v(e,r,!1);if(!k(n))return n.get(t)}function w(t,e,r,n){var i=v(r,n,!0);i.set(t,e)}function g(t,e){var r=[],n=v(t,e,!1);if(k(n))return r;for(var i=n.keys(),u=function(t){var e=A(t,o);if(!x(e))throw new TypeError;var r=e.call(t);if(!O(r))throw new TypeError;return r}(i),a=0;;){var f=S(u);if(!f)return r.length=a,r;var c=f.value;try{r[a]=c}catch(s){try{P(u)}finally{throw s}}a++}}function b(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function k(t){return void 0===t}function m(t){return null===t}function O(t){return"object"==typeof t?null!==t:"function"==typeof t}function E(t,e){switch(b(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",n=A(t,i);if(void 0!==n){var o=n.call(t,r);if(O(o))throw new TypeError;return o}return function(t,e){if("string"===e){var r=t.toString;if(x(r)){var n=r.call(t);if(!O(n))return n}var i=t.valueOf;if(x(i)){var n=i.call(t);if(!O(n))return n}}else{var i=t.valueOf;if(x(i)){var n=i.call(t);if(!O(n))return n}var o=t.toString;if(x(o)){var n=o.call(t);if(!O(n))return n}}throw new TypeError}(t,"default"===r?"number":r)}function T(t){var e=E(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function j(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function x(t){return"function"==typeof t}function M(t){return"function"==typeof t}function A(t,e){var r=t[e];if(null!=r){if(!x(r))throw new TypeError;return r}}function S(t){var e=t.next();return!e.done&&e}function P(t){var e=t.return;e&&e.call(t)}function K(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===s)return e;if(e!==s)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i?e:i===t?e:i}function I(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,r,n){if(k(r)){if(!j(t))throw new TypeError;if(!M(e))throw new TypeError;return function(t,e){for(var r=t.length-1;r>=0;--r){var n=t[r],i=n(e);if(!k(i)&&!m(i)){if(!M(i))throw new TypeError;e=i}}return e}(t,e)}if(!j(t))throw new TypeError;if(!O(e))throw new TypeError;if(!O(n)&&!k(n)&&!m(n))throw new TypeError;return m(n)&&(n=void 0),r=T(r),function(t,e,r,n){for(var i=t.length-1;i>=0;--i){var o=t[i],u=o(e,r,n);if(!k(u)&&!m(u)){if(!O(u))throw new TypeError;n=u}}return n}(t,e,r,n)}),t("metadata",function(t,e){return function(r,n){if(!O(r))throw new TypeError;if(!k(n)&&!function(t){switch(b(t)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;w(t,e,r,n)}}),t("defineMetadata",function(t,e,r,n){if(!O(r))throw new TypeError;k(n)||(n=T(n));return w(t,e,r,n)}),t("hasMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return function t(e,r,n){var i=_(e,r,n);if(i)return!0;var o=K(r);if(!m(o))return t(e,o,n);return!1}(t,e,r)}),t("hasOwnMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return _(t,e,r)}),t("getMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return function t(e,r,n){var i=_(e,r,n);if(i)return d(e,r,n);var o=K(r);if(!m(o))return t(e,o,n);return}(t,e,r)}),t("getOwnMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return d(t,e,r)}),t("getMetadataKeys",function(t,e){if(!O(t))throw new TypeError;k(e)||(e=T(e));return function t(e,r){var n=g(e,r);var i=K(e);if(null===i)return n;var o=t(i,r);if(o.length<=0)return n;if(n.length<=0)return o;var u=new p;var a=[];for(var f=0,c=n;f<c.length;f++){var s=c[f],h=u.has(s);h||(u.add(s),a.push(s))}for(var y=0,l=o;y<l.length;y++){var s=l[y],h=u.has(s);h||(u.add(s),a.push(s))}return a}(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!O(t))throw new TypeError;k(e)||(e=T(e));return g(t,e)}),t("deleteMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));var n=v(e,r,!1);if(k(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var i=l.get(e);return i.delete(r),i.size>0||(l.delete(e),!0)})}(o)}()}(t||(t={}));
},{"process":"pBGv"}],"uO1O":[function(require,module,exports) {

},{}],"e3Cr":[function(require,module,exports) {
function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1}}function l(e){module.exports.defaults=e}module.exports={defaults:e(),getDefaults:e,changeDefaults:l};
},{}],"sUTH":[function(require,module,exports) {
var e=/[&<>"']/,r=/[&<>"']/g,t=/[<>"']|&(?!#?\w+;)/,n=/[<>"']|&(?!#?\w+;)/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i=function(e){return a[e]};function o(a,o){if(o){if(e.test(a))return a.replace(r,i)}else if(t.test(a))return a.replace(n,i);return a}var c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function u(e){return e.replace(c,function(e,r){return"colon"===(r=r.toLowerCase())?":":"#"===r.charAt(0)?"x"===r.charAt(1)?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""})}var s=/(^|[^\[])\^/g;function l(e,r){e=e.source||e,r=r||"";var t={replace:function(r,n){return n=(n=n.source||n).replace(s,"$1"),e=e.replace(r,n),t},getRegex:function(){return new RegExp(e,r)}};return t}var f=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function d(e,r,t){if(e){var n;try{n=decodeURIComponent(u(t)).replace(f,"").toLowerCase()}catch(a){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}r&&!p.test(t)&&(t=x(r,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(a){return null}return t}var g={},h=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,m=/^([^:]+:\/*[^/]*)[\s\S]*$/;function x(e,r){g[" "+e]||(h.test(e)?g[" "+e]=e+"/":g[" "+e]=A(e,"/",!0));var t=-1===(e=g[" "+e]).indexOf(":");return"//"===r.substring(0,2)?t?r:e.replace(v,"$1")+r:"/"===r.charAt(0)?t?r:e.replace(m,"$1")+r:e+r}var w={exec:function(){}};function C(e){for(var r,t,n=1;n<arguments.length;n++)for(t in r=arguments[n])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}function b(e,r){var t=e.replace(/\|/g,function(e,r,t){for(var n=!1,a=r;--a>=0&&"\\"===t[a];)n=!n;return n?"|":" |"}).split(/ \|/),n=0;if(t.length>r)t.splice(r);else for(;t.length<r;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function A(e,r,t){var n=e.length;if(0===n)return"";for(var a=0;a<n;){var i=e.charAt(n-a-1);if(i!==r||t){if(i===r||!t)break;a++}else a++}return e.substr(0,n-a)}function O(e,r){if(-1===e.indexOf(r[1]))return-1;for(var t=e.length,n=0,a=0;a<t;a++)if("\\"===e[a])a++;else if(e[a]===r[0])n++;else if(e[a]===r[1]&&--n<0)return a;return-1}function $(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}module.exports={escape:o,unescape:u,edit:l,cleanUrl:d,resolveUrl:x,noopTest:w,merge:C,splitCells:b,rtrim:A,findClosingBracket:O,checkSanitizeDeprecation:$};
},{}],"ZrSq":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}var r=require("./defaults.js"),n=r.defaults,l=require("./helpers.js"),a=l.rtrim,s=l.splitCells,c=l.escape,o=l.findClosingBracket;function u(e,t,i){var r=t.href,n=t.title?c(t.title):null;return"!"!==e[0].charAt(0)?{type:"link",raw:i,href:r,title:n,text:e[1]}:{type:"image",raw:i,text:c(e[1]),href:r,title:n}}module.exports=function(){function t(i){e(this,t),this.options=i||n}return i(t,[{key:"space",value:function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}},{key:"code",value:function(e,t){var i=this.rules.block.code.exec(e);if(i){var r=t[t.length-1];if(r&&"paragraph"===r.type)return t.pop(),r.text+="\n"+i[0].trimRight(),r.raw+="\n"+i[0],r;var n=i[0].replace(/^ {4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?n:a(n,"\n")}}}},{key:"fences",value:function(e){var t=this.rules.block.fences.exec(e);if(t)return{type:"code",raw:t[0],lang:t[2]?t[2].trim():t[2],text:t[3]||""}}},{key:"heading",value:function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}}},{key:"nptable",value:function(e){var t=this.rules.block.nptable.exec(e);if(t){var i={type:"table",header:s(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(i.header.length===i.align.length){var r,n=i.align.length;for(r=0;r<n;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(n=i.cells.length,r=0;r<n;r++)i.cells[r]=s(i.cells[r],i.header.length);return i}}}},{key:"hr",value:function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}},{key:"blockquote",value:function(e){var t=this.rules.block.blockquote.exec(e);if(t){var i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:i}}}},{key:"list",value:function(e){var t=this.rules.block.list.exec(e);if(t){for(var i,r,n,l,a,s,c,o=t[0],u=t[2],h=u.length>1,p={type:"list",raw:o,ordered:h,start:h?+u:"",loose:!1,items:[]},f=t[0].match(this.rules.block.item),g=!1,v=f.length,x=0;x<v;x++)o=i=f[x],r=i.length,~(i=i.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(r-=i.length,i=this.options.pedantic?i.replace(/^ {1,4}/gm,""):i.replace(new RegExp("^ {1,"+r+"}","gm"),"")),x!==v-1&&(n=this.rules.block.bullet.exec(f[x+1])[0],(u.length>1?1===n.length:n.length>1||this.options.smartLists&&n!==u)&&(l=f.slice(x+1).join("\n"),p.raw=p.raw.substring(0,p.raw.length-l.length),x=v-1)),a=g||/\n\n(?!\s*$)/.test(i),x!==v-1&&(g="\n"===i.charAt(i.length-1),a||(a=g)),a&&(p.loose=!0),c=void 0,(s=/^\[[ xX]\] /.test(i))&&(c=" "!==i[1],i=i.replace(/^\[[ xX]\] +/,"")),p.items.push({raw:o,task:s,checked:c,loose:a,text:i});return p}}},{key:"html",value:function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):c(t[0]):t[0]}}},{key:"def",value:function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}},{key:"table",value:function(e){var t=this.rules.block.table.exec(e);if(t){var i={type:"table",header:s(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];var r,n=i.align.length;for(r=0;r<n;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(n=i.cells.length,r=0;r<n;r++)i.cells[r]=s(i.cells[r].replace(/^ *\| *| *\| *$/g,""),i.header.length);return i}}}},{key:"lheading",value:function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}}},{key:"paragraph",value:function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}}},{key:"text",value:function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}}},{key:"escape",value:function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:c(t[1])}}},{key:"tag",value:function(e,t,i){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!i&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?i=!0:i&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(i=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:i,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):c(r[0]):r[0]}}},{key:"link",value:function(e){var t=this.rules.inline.link.exec(e);if(t){var i=o(t[2],"()");if(i>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,r).trim(),t[3]=""}var n=t[2],l="";if(this.options.pedantic){var a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);a?(n=a[1],l=a[3]):l=""}else l=t[3]?t[3].slice(1,-1):"";return u(t,{href:(n=n.trim().replace(/^<([\s\S]*)>$/,"$1"))?n.replace(this.rules.inline._escapes,"$1"):n,title:l?l.replace(this.rules.inline._escapes,"$1"):l},t[0])}}},{key:"reflink",value:function(e,t){var i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){var r=(i[2]||i[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return u(i,r,i[0])}}},{key:"strong",value:function(e){var t=this.rules.inline.strong.exec(e);if(t)return{type:"strong",raw:t[0],text:t[4]||t[3]||t[2]||t[1]}}},{key:"em",value:function(e){var t=this.rules.inline.em.exec(e);if(t)return{type:"em",raw:t[0],text:t[6]||t[5]||t[4]||t[3]||t[2]||t[1]}}},{key:"codespan",value:function(e){var t=this.rules.inline.code.exec(e);if(t)return{type:"codespan",raw:t[0],text:c(t[2].trim(),!0)}}},{key:"br",value:function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}},{key:"del",value:function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[1]}}},{key:"autolink",value:function(e,t){var i,r,n=this.rules.inline.autolink.exec(e);if(n)return r="@"===n[2]?"mailto:"+(i=c(this.options.mangle?t(n[1]):n[1])):i=c(n[1]),{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}},{key:"url",value:function(e,t){var i;if(i=this.rules.inline.url.exec(e)){var r,n;if("@"===i[2])n="mailto:"+(r=c(this.options.mangle?t(i[0]):i[0]));else{var l;do{l=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(l!==i[0]);r=c(i[0]),n="www."===i[1]?"http://"+r:r}return{type:"link",raw:i[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}},{key:"inlineText",value:function(e,t,i){var r,n=this.rules.inline.text.exec(e);if(n)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):c(n[0]):n[0]:c(this.options.smartypants?i(n[0]):n[0]),{type:"text",raw:n[0],text:r}}}]),t}();
},{"./defaults.js":"e3Cr","./helpers.js":"sUTH"}],"tlvE":[function(require,module,exports) {
var e=require("./helpers.js"),a=e.noopTest,l=e.edit,t=e.merge,n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:a,table:a,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};n.def=l(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=l(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=l(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=l(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=l(n._paragraph).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.blockquote=l(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=t({},n),n.gfm=t({},n.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),n.gfm.nptable=l(n.gfm.nptable).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.gfm.table=l(n.gfm.table).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.pedantic=t({},n.normal,{html:l("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:a,paragraph:l(n.normal._paragraph).replace("hr",n.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",n.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var r={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:a,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^_([^\s_<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s*<\[])\*(?!\*)|^\*([^\s<"][\s\S]*?[^\s\[\*])\*(?![\]`punctuation])|^\*([^\s*"<\[][\s\S]*[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:a,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+\\-./:;<=>?@\\[^_{|}~"};r.em=l(r.em).replace(/punctuation/g,r._punctuation).getRegex(),r._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=l(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=l(r.tag).replace("comment",n._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,r._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=l(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=l(r.reflink).replace("label",r._label).getRegex(),r.normal=t({},r),r.pedantic=t({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:l(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:l(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=t({},r.normal,{escape:l(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),r.gfm.url=l(r.gfm.url,"i").replace("email",r.gfm._extended_email).getRegex(),r.breaks=t({},r.gfm,{br:l(r.br).replace("{2,}","*").getRegex(),text:l(r.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),module.exports={block:n,inline:r};
},{"./helpers.js":"sUTH"}],"GfVS":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}var i=require("./Tokenizer.js"),s=require("./defaults.js"),r=s.defaults,o=require("./rules.js"),l=o.block,h=o.inline;function a(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function k(e){var t,n,i="",s=e.length;for(t=0;t<s;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}module.exports=function(){function t(n){e(this,t),this.tokens=[],this.tokens.links=Object.create(null),this.options=n||r,this.options.tokenizer=this.options.tokenizer||new i,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var s={block:l.normal,inline:h.normal};this.options.pedantic?(s.block=l.pedantic,s.inline=h.pedantic):this.options.gfm&&(s.block=l.gfm,this.options.breaks?s.inline=h.breaks:s.inline=h.gfm),this.tokenizer.rules=s}return n(t,[{key:"lex",value:function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens}},{key:"blockTokens",value:function(e){var t,n,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(e=e.replace(/^ +$/gm,"");e;)if(t=this.tokenizer.space(e))e=e.substring(t.raw.length),t.type&&s.push(t);else if(t=this.tokenizer.code(e,s))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.fences(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.heading(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.nptable(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.hr(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.blockquote(e))e=e.substring(t.raw.length),t.tokens=this.blockTokens(t.text,[],r),s.push(t);else if(t=this.tokenizer.list(e)){for(e=e.substring(t.raw.length),i=t.items.length,n=0;n<i;n++)t.items[n].tokens=this.blockTokens(t.items[n].text,[],!1);s.push(t)}else if(t=this.tokenizer.html(e))e=e.substring(t.raw.length),s.push(t);else if(r&&(t=this.tokenizer.def(e)))e=e.substring(t.raw.length),this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});else if(t=this.tokenizer.table(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.lheading(e))e=e.substring(t.raw.length),s.push(t);else if(r&&(t=this.tokenizer.paragraph(e)))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.text(e))e=e.substring(t.raw.length),s.push(t);else if(e){var o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}return s}},{key:"inline",value:function(e){var t,n,i,s,r,o,l=e.length;for(t=0;t<l;t++)switch((o=e[t]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},s=o.header.length,n=0;n<s;n++)o.tokens.header[n]=[],this.inlineTokens(o.header[n],o.tokens.header[n]);for(s=o.cells.length,n=0;n<s;n++)for(r=o.cells[n],o.tokens.cells[n]=[],i=0;i<r.length;i++)o.tokens.cells[n][i]=[],this.inlineTokens(r[i],o.tokens.cells[n][i]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(s=o.items.length,n=0;n<s;n++)this.inline(o.items[n].tokens)}return e}},{key:"inlineTokens",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e;)if(t=this.tokenizer.escape(e))e=e.substring(t.raw.length),n.push(t);else if(t=this.tokenizer.tag(e,i,s))e=e.substring(t.raw.length),i=t.inLink,s=t.inRawBlock,n.push(t);else if(t=this.tokenizer.link(e))e=e.substring(t.raw.length),"link"===t.type&&(t.tokens=this.inlineTokens(t.text,[],!0,s)),n.push(t);else if(t=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(t.raw.length),"link"===t.type&&(t.tokens=this.inlineTokens(t.text,[],!0,s)),n.push(t);else if(t=this.tokenizer.strong(e))e=e.substring(t.raw.length),t.tokens=this.inlineTokens(t.text,[],i,s),n.push(t);else if(t=this.tokenizer.em(e))e=e.substring(t.raw.length),t.tokens=this.inlineTokens(t.text,[],i,s),n.push(t);else if(t=this.tokenizer.codespan(e))e=e.substring(t.raw.length),n.push(t);else if(t=this.tokenizer.br(e))e=e.substring(t.raw.length),n.push(t);else if(t=this.tokenizer.del(e))e=e.substring(t.raw.length),t.tokens=this.inlineTokens(t.text,[],i,s),n.push(t);else if(t=this.tokenizer.autolink(e,k))e=e.substring(t.raw.length),n.push(t);else if(i||!(t=this.tokenizer.url(e,k))){if(t=this.tokenizer.inlineText(e,s,a))e=e.substring(t.raw.length),n.push(t);else if(e){var r="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(r);break}throw new Error(r)}}else e=e.substring(t.raw.length),n.push(t);return n}}],[{key:"lex",value:function(e,n){return new t(n).lex(e)}},{key:"rules",get:function(){return{block:l,inline:h}}}]),t}();
},{"./Tokenizer.js":"ZrSq","./defaults.js":"e3Cr","./rules.js":"tlvE"}],"GGSY":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var r=require("./defaults.js"),i=r.defaults,o=require("./helpers.js"),u=o.cleanUrl,l=o.escape;module.exports=function(){function n(t){e(this,n),this.options=t||i}return t(n,[{key:"code",value:function(e,n,t){var r=(n||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(t=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+l(r,!0)+'">'+(t?e:l(e,!0))+"</code></pre>\n":"<pre><code>"+(t?e:l(e,!0))+"</code></pre>"}},{key:"blockquote",value:function(e){return"<blockquote>\n"+e+"</blockquote>\n"}},{key:"html",value:function(e){return e}},{key:"heading",value:function(e,n,t,r){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+r.slug(t)+'">'+e+"</h"+n+">\n":"<h"+n+">"+e+"</h"+n+">\n"}},{key:"hr",value:function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}},{key:"list",value:function(e,n,t){var r=n?"ol":"ul";return"<"+r+(n&&1!==t?' start="'+t+'"':"")+">\n"+e+"</"+r+">\n"}},{key:"listitem",value:function(e){return"<li>"+e+"</li>\n"}},{key:"checkbox",value:function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}},{key:"paragraph",value:function(e){return"<p>"+e+"</p>\n"}},{key:"table",value:function(e,n){return n&&(n="<tbody>"+n+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}},{key:"tablerow",value:function(e){return"<tr>\n"+e+"</tr>\n"}},{key:"tablecell",value:function(e,n){var t=n.header?"th":"td";return(n.align?"<"+t+' align="'+n.align+'">':"<"+t+">")+e+"</"+t+">\n"}},{key:"strong",value:function(e){return"<strong>"+e+"</strong>"}},{key:"em",value:function(e){return"<em>"+e+"</em>"}},{key:"codespan",value:function(e){return"<code>"+e+"</code>"}},{key:"br",value:function(){return this.options.xhtml?"<br/>":"<br>"}},{key:"del",value:function(e){return"<del>"+e+"</del>"}},{key:"link",value:function(e,n,t){if(null===(e=u(this.options.sanitize,this.options.baseUrl,e)))return t;var r='<a href="'+l(e)+'"';return n&&(r+=' title="'+n+'"'),r+=">"+t+"</a>"}},{key:"image",value:function(e,n,t){if(null===(e=u(this.options.sanitize,this.options.baseUrl,e)))return t;var r='<img src="'+e+'" alt="'+t+'"';return n&&(r+=' title="'+n+'"'),r+=this.options.xhtml?"/>":">"}},{key:"text",value:function(e){return e}}]),n}();
},{"./defaults.js":"e3Cr","./helpers.js":"sUTH"}],"Xnzt":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var u=n[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function t(e,t,u){return t&&n(e.prototype,t),u&&n(e,u),e}module.exports=function(){function n(){e(this,n)}return t(n,[{key:"strong",value:function(e){return e}},{key:"em",value:function(e){return e}},{key:"codespan",value:function(e){return e}},{key:"del",value:function(e){return e}},{key:"html",value:function(e){return e}},{key:"text",value:function(e){return e}},{key:"link",value:function(e,n,t){return""+t}},{key:"image",value:function(e,n,t){return""+t}},{key:"br",value:function(){return""}}]),n}();
},{}],"Qrlq":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}module.exports=function(){function n(){e(this,n),this.seen={}}return r(n,[{key:"slug",value:function(e){var n=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(n)){var r=n;do{this.seen[r]++,n=r+"-"+this.seen[r]}while(this.seen.hasOwnProperty(n))}return this.seen[n]=0,n}}]),n}();
},{}],"Xd8K":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=require("./Renderer.js"),s=require("./TextRenderer.js"),i=require("./Slugger.js"),o=require("./defaults.js"),a=o.defaults,h=require("./helpers.js"),l=h.unescape;module.exports=function(){function t(r){e(this,t),this.options=r||a,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new s,this.slugger=new i}return r(t,[{key:"parse",value:function(e){var t,r,n,s,i,o,a,h,c,p,d,k,u,f,g,x,b,w,y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m="",v=e.length;for(t=0;t<v;t++)switch((p=e[t]).type){case"space":continue;case"hr":m+=this.renderer.hr();continue;case"heading":m+=this.renderer.heading(this.parseInline(p.tokens),p.depth,l(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":m+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(h="",a="",s=p.header.length,r=0;r<s;r++)a+=this.renderer.tablecell(this.parseInline(p.tokens.header[r]),{header:!0,align:p.align[r]});for(h+=this.renderer.tablerow(a),c="",s=p.cells.length,r=0;r<s;r++){for(a="",i=(o=p.tokens.cells[r]).length,n=0;n<i;n++)a+=this.renderer.tablecell(this.parseInline(o[n]),{header:!1,align:p.align[n]});c+=this.renderer.tablerow(a)}m+=this.renderer.table(h,c);continue;case"blockquote":c=this.parse(p.tokens),m+=this.renderer.blockquote(c);continue;case"list":for(d=p.ordered,k=p.start,u=p.loose,s=p.items.length,c="",r=0;r<s;r++)x=(g=p.items[r]).checked,b=g.task,f="",g.task&&(w=this.renderer.checkbox(x),u?"text"===g.tokens[0].type?(g.tokens[0].text=w+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=w+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:w}):f+=w),f+=this.parse(g.tokens,u),c+=this.renderer.listitem(f,b,x);m+=this.renderer.list(c,d,k);continue;case"html":m+=this.renderer.html(p.text);continue;case"paragraph":m+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":for(c=p.tokens?this.parseInline(p.tokens):p.text;t+1<v&&"text"===e[t+1].type;)c+="\n"+((p=e[++t]).tokens?this.parseInline(p.tokens):p.text);m+=y?this.renderer.paragraph(c):c;continue;default:var I='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void console.error(I);throw new Error(I)}return m}},{key:"parseInline",value:function(e,t){t=t||this.renderer;var r,n,s="",i=e.length;for(r=0;r<i;r++)switch((n=e[r]).type){case"escape":s+=t.text(n.text);break;case"html":s+=t.html(n.text);break;case"link":s+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":s+=t.image(n.href,n.title,n.text);break;case"strong":s+=t.strong(this.parseInline(n.tokens,t));break;case"em":s+=t.em(this.parseInline(n.tokens,t));break;case"codespan":s+=t.codespan(n.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(n.tokens,t));break;case"text":s+=t.text(n.text);break;default:var o='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(o);throw new Error(o)}return s}}],[{key:"parse",value:function(e,r){return new t(r).parse(e)}}]),t}();
},{"./Renderer.js":"GGSY","./TextRenderer.js":"Xnzt","./Slugger.js":"Qrlq","./defaults.js":"e3Cr","./helpers.js":"sUTH"}],"afg3":[function(require,module,exports) {
function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var r=require("./Lexer.js"),t=require("./Parser.js"),n=require("./Tokenizer.js"),o=require("./Renderer.js"),i=require("./TextRenderer.js"),u=require("./Slugger.js"),a=require("./helpers.js"),l=a.merge,f=a.checkSanitizeDeprecation,s=a.escape,p=require("./defaults.js"),c=p.getDefaults,d=p.changeDefaults,h=p.defaults;function g(n,o,i){if(null==n)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof n)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(i||"function"==typeof o){var u=function(){i||(i=o,o=null),o=l({},g.defaults,o||{}),f(o);var e,u,a=o.highlight,s=0;try{e=r.lex(n,o)}catch(c){return{v:i(c)}}u=e.length;var p=function(r){if(r)return o.highlight=a,i(r);var n;try{n=t.parse(e,o)}catch(c){r=c}return o.highlight=a,r?i(r):i(null,n)};if(!a||a.length<3)return{v:p()};if(delete o.highlight,!u)return{v:p()};for(;s<e.length;s++)!function(e){"code"!==e.type?--u||p():a(e.text,e.lang,function(r,t){return r?p(r):null==t||t===e.text?--u||p():(e.text=t,e.escaped=!0,void(--u||p()))})}(e[s]);return{v:void 0}}();if("object"===e(u))return u.v}try{return o=l({},g.defaults,o||{}),f(o),t.parse(r.lex(n,o),o)}catch(a){if(a.message+="\nPlease report this to https://github.com/markedjs/marked.",(o||g.defaults).silent)return"<p>An error occurred:</p><pre>"+s(a.message+"",!0)+"</pre>";throw a}}g.options=g.setOptions=function(e){return l(g.defaults,e),d(g.defaults),g},g.getDefaults=c,g.defaults=h,g.use=function(e){var r=l({},e);e.renderer&&function(){var t=g.defaults.renderer||new o,n=function(r){var n=t[r];t[r]=function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];var a=e.renderer[r].apply(t,i);return!1===a&&(a=n.apply(t,i)),a}};for(var i in e.renderer)n(i);r.renderer=t}(),e.tokenizer&&function(){var t=g.defaults.tokenizer||new n,o=function(r){var n=t[r];t[r]=function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];var a=e.tokenizer[r].apply(t,i);return!1===a&&(a=n.apply(t,i)),a}};for(var i in e.tokenizer)o(i);r.tokenizer=t}(),g.setOptions(r)},g.Parser=t,g.parser=t.parse,g.Renderer=o,g.TextRenderer=i,g.Lexer=r,g.lexer=r.lex,g.Tokenizer=n,g.Slugger=u,g.parse=g,module.exports=g;
},{"./Lexer.js":"GfVS","./Parser.js":"Xd8K","./Tokenizer.js":"ZrSq","./Renderer.js":"GGSY","./TextRenderer.js":"Xnzt","./Slugger.js":"Qrlq","./helpers.js":"sUTH","./defaults.js":"e3Cr"}],"toQY":[function(require,module,exports) {
"use strict";var e=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata"),require("./dark.scss");var t,n=require("marked");!function(e){e[e.INPUT=0]="INPUT",e[e.DROPDOWN=1]="DROPDOWN",e[e.BUTTON=2]="BUTTON",e[e.OBJECT=3]="OBJECT",e[e.ARRAY=4]="ARRAY",e[e.MARKDOWN=5]="MARKDOWN"}(t=exports.PropElementType||(exports.PropElementType={}));var r={text:"value",date:"valueAsDate",number:"valueAsNumber",checkbox:"checked"},a={String:"text",Date:"date",Number:"number",Boolean:"checkbox"},o={Function:t.BUTTON,String:t.INPUT,Date:t.INPUT,Number:t.INPUT,Boolean:t.INPUT,Array:t.ARRAY,Object:t.OBJECT};function i(e){return void 0===e&&(e={}),e.dropdown_enum_options&&(e.dropdown_options=Object.keys(e.dropdown_enum_options).filter(function(e){return isNaN(Number(e))}).map(function(t){return{name:t,value:e.dropdown_enum_options[t]}})),!e.type&&e.dropdown_options&&(e.type=t.DROPDOWN),function(t,n){var r=Reflect.getMetadata("design:type",t,n).name;e.type=e.type||o[r],e.inputType=a[r],e.label=void 0!==e.label?e.label:b(n),e.description=e.description||"",e.items_per_row=e.items_per_row||1;var i=Reflect.getMetadata("editableProperties",t)||[];i.indexOf(n)<0&&(l(t,n),i.push({parent:t,key:n,dataType:r,options:e})),Reflect.defineMetadata("editableProperties",i,t)}}function l(t,n){var r="__"+n+"__";Object.defineProperty(t,n,{get:function(){return this[r]},set:function(t){var a,o,i=this[r];this[r]=t;try{for(var l=e(this["__on_change_"+n]||[]),d=l.next();!d.done;d=l.next())(0,d.value)(i,t)}catch(c){a={error:c}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}},enumerable:!0,configurable:!0})}function d(e,t,n){e["__on_change_"+t]=e["__on_change_"+t]||[],e["__on_change_"+t].push(n)}exports.editable=i;var c=function(e,t,n){var a=document.createElement("label");a.textContent=e.options.label,a.htmlFor=e.key;var o=document.createElement("span");o.innerHTML=e.options.description;var i=document.createElement("input"),l=e.options.inputType;i.id=e,i.type=l,i.autocomplete="off",i[r[l]]=t[e.key],i.addEventListener("input",function(){t[e.key]=i[r[l]],n()}),d(t,e.key,function(e,t){i[r[l]]=t});var c=document.createElement("li");return c.classList.add("fb-element-"+l),c.appendChild(a),c.appendChild(i),c.appendChild(o),c},p=function(t,n,r){var a,o,i=document.createElement("label");i.textContent=t.options.label,i.htmlFor=t.key;var l=document.createElement("span");l.innerHTML=t.options.description;var c=document.createElement("select");c.id=t.key,c.autocomplete="off",c.value=n[t.key];try{for(var p=e(t.options.dropdown_options),u=p.next();!u.done;u=p.next()){var s=u.value,m=document.createElement("option");m.value=s.value,m.innerHTML=s.name,c.appendChild(m)}}catch(v){a={error:v}}finally{try{u&&!u.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}c.addEventListener("input",function(){n[t.key]=c.value,r()}),d(n,t.key,function(e,t){c.value=t});var f=document.createElement("li");return f.classList.add("fb-element-select"),f.appendChild(i),f.appendChild(c),f.appendChild(l),f},u=function(e,t,r){var a=document.createElement("div");a.classList.add("markdown"),a.innerHTML=n(h(t[e.key])),d(t,e.key,function(e,t){a.innerHTML=n(h(t))});var o=document.createElement("li");return o.classList.add("fb-element-markdown"),o.appendChild(a),o},s=function(e,t,n){var r=document.createElement("button");r.innerHTML=e.options.label,r.addEventListener("click",function(n){n.preventDefault(),t[e.key]()});var a=document.createElement("li");return a.classList.add("fb-element-button"),a.appendChild(r),a},m=function(e,t,n){var o=document.createElement("label");o.textContent=e.options.label,o.htmlFor=e.key;var i=document.createElement("span");i.innerHTML=e.options.description;var l=document.createElement("ul"),c=function(o,i){if(i%e.options.items_per_row==0){var d=document.createElement("li");d.classList.add("break"),l.appendChild(d)}var c=document.createElement("li"),p=document.createElement("input");p.type=a[t[e.key][i].constructor.name],p.autocomplete="off",p.id="fb-input-"+e+"-"+i,p.addEventListener("input",function(a){t[e.key][i]=p[r[p.type]],n()}),p[r[p.type]]=t[e.key][i],c.appendChild(p),l.appendChild(c)};t[e.key].forEach(c),d(t,e.key,function(n,r){l.innerHTML="",t[e.key].forEach(c)});var p=document.createElement("li");return p.classList.add("fb-element-array"),p.appendChild(o),p.appendChild(l),p.appendChild(i),p},f=function(e,t,n){var r=document.createElement("label");r.textContent=e.options.label,r.htmlFor=e.key;var o=document.createElement("span");o.innerHTML=e.options.description;var i=document.createElement("ul"),l=function(r,o){if(o%e.options.items_per_row==0){var l=document.createElement("li");l.classList.add("break"),i.appendChild(l)}var d=document.createElement("li"),c=t[e.key][r].constructor.name,p=a[c];if(p){var u=document.createElement("label");u.innerHTML=r;var s=document.createElement("input");s.type=p,s.autocomplete="off",s.id="fb-input-"+e+"-"+o,s.addEventListener("input",function(a){t[e.key][r]=s.value,n()}),s.value=t[e.key][r],d.appendChild(u),d.appendChild(s)}else if("Function"===c){var m=document.createElement("button");m.innerHTML=b(r),m.addEventListener("click",function(n){n.preventDefault(),t[e.key][r]()}),d.appendChild(m)}i.appendChild(d),o+=1};Object.keys(t[e.key]).forEach(l),d(t,e.key,function(n,r){i.innerHTML="",Object.keys(t[e.key]).forEach(l),console.log("change")});var c=document.createElement("li");return c.classList.add("fb-element-object"),c.appendChild(r),c.appendChild(i),c.appendChild(o),c},v={INPUT:c,DROPDOWN:p,MARKDOWN:u,BUTTON:s,ARRAY:m,OBJECT:f};function y(n,r,a){var o,i;void 0===a&&(a=function(){});var l=document.createElement("form");n.innerHTML="",n.appendChild(l);var d=document.createElement("ul");l.appendChild(d);var c=Reflect.getMetadata("editableProperties",r)||[];try{for(var p=e(c),u=p.next();!u.done;u=p.next()){var s=u.value,m=v[t[s.options.type]]||v.OBJECT;if(m){var f=m(s,r,a);d.appendChild(f)}}}catch(y){o={error:y}}finally{try{u&&!u.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}}function h(e){var t=e.split("\n");if(1===t.length)return t[0];for(var n=t[1].length-t[1].trimStart().length,r=0;r<t.length;r++)t[r]=t[r].substr(n);return t.join("\n")}function b(e){for(var t=e[0].toUpperCase(),n=1;n<e.length;n++){var r=e[n-1]||"",a=r===r.toUpperCase();e[n]===e[n].toUpperCase()&&!a&&(t+=" "),t+=e[n].toLowerCase()}return t}exports.generateForm=y;
},{"reflect-metadata":"npqE","./dark.scss":"uO1O","marked":"afg3"}],"QCba":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__decorate||function(t,n,o,i){var s,c=arguments.length,r=c<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,o):i;if("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,n,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(c<3?s(r):c>3?s(n,o,r):s(n,o))||r);return c>3&&r&&Object.defineProperty(n,o,r),r},n=this&&this.__metadata||function(t,n){if("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=o(require("./demos")),s=require("./engine/forms"),c=null;function r(){var e;return null!==(e=window.location.hash.substr(1).split("/").filter(function(e){return""!==e})[0])&&void 0!==e?e:"LightBender"}function a(){c&&(c.destroy(),c=null),(c=i.default("canvas",r())).launch()}window.addEventListener("hashchange",function(){a()}),window.onload=function(){a()};var u=document.querySelector("#main-menu-button"),l=document.querySelector(".main-menu-container"),d=document.querySelector(".main-menu"),f=document.querySelector("#docs-menu-button"),p=document.querySelector(".docs-menu-container"),m=document.querySelector(".page-nav"),y=document.querySelector(".backdrop"),h=document.querySelector("#canvas"),v=!1,g=!1;u.addEventListener("click",function(){L(!v)}),f.addEventListener("click",function(){console.log("clicky"),b(!g)}),y.addEventListener("click",function(){L(!v)});var L=function(e){(v=e)?(l.classList.add("open"),h.classList.add("push-right-200"),m.classList.add("push-right-400"),u.classList.add("open"),y.classList.add("active")):(l.classList.remove("open"),h.classList.remove("push-right-200"),m.classList.remove("push-right-400"),u.classList.remove("open"),y.classList.remove("active"))},b=function(e){(g=e)?(p.classList.add("open"),f.classList.add("open"),h.classList.add("push-left-200"),m.classList.add("push-left-400")):(p.classList.remove("open"),f.classList.remove("open"),h.classList.remove("push-left-200"),m.classList.remove("push-left-400"))},w=function(){function e(){this.info="\n        # ARCGL\n\n        A simple typescript / webgl framework\n        for creating interesting interactive demos\n        ",this.buttons={RayCast:function(){window.location.hash="RayCastingDemo"},SpriteRotationAroundOrigin:function(){window.location.hash="RectRotationDemo"},RenderToTexture:function(){window.location.hash="RenderTextureDemo"},LightBender:function(){window.location.hash="LightBender"}}}return t([s.editable({type:s.PropElementType.MARKDOWN}),n("design:type",String)],e.prototype,"info",void 0),t([s.editable({label:"",description:"Demos"}),n("design:type",Object)],e.prototype,"buttons",void 0),e}(),R=new w;console.log(JSON.stringify(R)),s.generateForm(d,R,function(){console.log(R)});
},{"./demos":"coan","./engine/forms":"toQY"}]},{},["QCba"], null)
//# sourceMappingURL=https://aaronrcox.github.io/arcgl.ts/src.0a8a143e.js.map